var Ig=d=>{throw TypeError(d)};var Uu=(d,t,i)=>t.has(d)||Ig("Cannot "+i);var Yt=(d,t,i)=>(Uu(d,t,"read from private field"),i?i.call(d):t.get(d)),Si=(d,t,i)=>t.has(d)?Ig("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,i),Fe=(d,t,i,s)=>(Uu(d,t,"write to private field"),s?s.call(d,i):t.set(d,i),i),wi=(d,t,i)=>(Uu(d,t,"access private method"),i);var jg=(d,t,i,s)=>({set _(r){Fe(d,t,r,i)},get _(){return Yt(d,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();var Hu={exports:{}},tr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function Qb(){if(Gg)return tr;Gg=1;var d=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var u in r)u!=="key"&&(l[u]=r[u])}else l=r;return r=l.ref,{$$typeof:d,type:s,key:c,ref:r!==void 0?r:null,props:l}}return tr.Fragment=t,tr.jsx=i,tr.jsxs=i,tr}var qg;function Wb(){return qg||(qg=1,Hu.exports=Qb()),Hu.exports}var U=Wb(),Iu={exports:{}},ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function Zb(){if(Vg)return ft;Vg=1;var d=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function E(R,G,Q){this.props=R,this.context=G,this.refs=x,this.updater=Q||w}E.prototype.isReactComponent={},E.prototype.setState=function(R,G){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,G,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function T(){}T.prototype=E.prototype;function C(R,G,Q){this.props=R,this.context=G,this.refs=x,this.updater=Q||w}var L=C.prototype=new T;L.constructor=C,S(L,E.prototype),L.isPureReactComponent=!0;var N=Array.isArray;function O(){}var P={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function K(R,G,Q){var tt=Q.ref;return{$$typeof:d,type:R,key:G,ref:tt!==void 0?tt:null,props:Q}}function J(R,G){return K(R.type,G,R.props)}function Z(R){return typeof R=="object"&&R!==null&&R.$$typeof===d}function ht(R){var G={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(Q){return G[Q]})}var At=/\/+/g;function vt(R,G){return typeof R=="object"&&R!==null&&R.key!=null?ht(""+R.key):G.toString(36)}function St(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(O,O):(R.status="pending",R.then(function(G){R.status==="pending"&&(R.status="fulfilled",R.value=G)},function(G){R.status==="pending"&&(R.status="rejected",R.reason=G)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function B(R,G,Q,tt,lt){var ut=typeof R;(ut==="undefined"||ut==="boolean")&&(R=null);var ot=!1;if(R===null)ot=!0;else switch(ut){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(R.$$typeof){case d:case t:ot=!0;break;case g:return ot=R._init,B(ot(R._payload),G,Q,tt,lt)}}if(ot)return lt=lt(R),ot=tt===""?"."+vt(R,0):tt,N(lt)?(Q="",ot!=null&&(Q=ot.replace(At,"$&/")+"/"),B(lt,G,Q,"",function(kn){return kn})):lt!=null&&(Z(lt)&&(lt=J(lt,Q+(lt.key==null||R&&R.key===lt.key?"":(""+lt.key).replace(At,"$&/")+"/")+ot)),G.push(lt)),1;ot=0;var ee=tt===""?".":tt+":";if(N(R))for(var It=0;It<R.length;It++)tt=R[It],ut=ee+vt(tt,It),ot+=B(tt,G,Q,ut,lt);else if(It=A(R),typeof It=="function")for(R=It.call(R),It=0;!(tt=R.next()).done;)tt=tt.value,ut=ee+vt(tt,It++),ot+=B(tt,G,Q,ut,lt);else if(ut==="object"){if(typeof R.then=="function")return B(St(R),G,Q,tt,lt);throw G=String(R),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ot}function V(R,G,Q){if(R==null)return R;var tt=[],lt=0;return B(R,tt,"","",function(ut){return G.call(Q,ut,lt++)}),tt}function W(R){if(R._status===-1){var G=R._result;G=G(),G.then(function(Q){(R._status===0||R._status===-1)&&(R._status=1,R._result=Q)},function(Q){(R._status===0||R._status===-1)&&(R._status=2,R._result=Q)}),R._status===-1&&(R._status=0,R._result=G)}if(R._status===1)return R._result.default;throw R._result}var dt=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},wt={map:V,forEach:function(R,G,Q){V(R,function(){G.apply(this,arguments)},Q)},count:function(R){var G=0;return V(R,function(){G++}),G},toArray:function(R){return V(R,function(G){return G})||[]},only:function(R){if(!Z(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return ft.Activity=y,ft.Children=wt,ft.Component=E,ft.Fragment=i,ft.Profiler=r,ft.PureComponent=C,ft.StrictMode=s,ft.Suspense=h,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ft.__COMPILER_RUNTIME={__proto__:null,c:function(R){return P.H.useMemoCache(R)}},ft.cache=function(R){return function(){return R.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(R,G,Q){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var tt=S({},R.props),lt=R.key;if(G!=null)for(ut in G.key!==void 0&&(lt=""+G.key),G)!X.call(G,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&G.ref===void 0||(tt[ut]=G[ut]);var ut=arguments.length-2;if(ut===1)tt.children=Q;else if(1<ut){for(var ot=Array(ut),ee=0;ee<ut;ee++)ot[ee]=arguments[ee+2];tt.children=ot}return K(R.type,lt,tt)},ft.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},ft.createElement=function(R,G,Q){var tt,lt={},ut=null;if(G!=null)for(tt in G.key!==void 0&&(ut=""+G.key),G)X.call(G,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(lt[tt]=G[tt]);var ot=arguments.length-2;if(ot===1)lt.children=Q;else if(1<ot){for(var ee=Array(ot),It=0;It<ot;It++)ee[It]=arguments[It+2];lt.children=ee}if(R&&R.defaultProps)for(tt in ot=R.defaultProps,ot)lt[tt]===void 0&&(lt[tt]=ot[tt]);return K(R,ut,lt)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(R){return{$$typeof:u,render:R}},ft.isValidElement=Z,ft.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:W}},ft.memo=function(R,G){return{$$typeof:f,type:R,compare:G===void 0?null:G}},ft.startTransition=function(R){var G=P.T,Q={};P.T=Q;try{var tt=R(),lt=P.S;lt!==null&&lt(Q,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(O,dt)}catch(ut){dt(ut)}finally{G!==null&&Q.types!==null&&(G.types=Q.types),P.T=G}},ft.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ft.use=function(R){return P.H.use(R)},ft.useActionState=function(R,G,Q){return P.H.useActionState(R,G,Q)},ft.useCallback=function(R,G){return P.H.useCallback(R,G)},ft.useContext=function(R){return P.H.useContext(R)},ft.useDebugValue=function(){},ft.useDeferredValue=function(R,G){return P.H.useDeferredValue(R,G)},ft.useEffect=function(R,G){return P.H.useEffect(R,G)},ft.useEffectEvent=function(R){return P.H.useEffectEvent(R)},ft.useId=function(){return P.H.useId()},ft.useImperativeHandle=function(R,G,Q){return P.H.useImperativeHandle(R,G,Q)},ft.useInsertionEffect=function(R,G){return P.H.useInsertionEffect(R,G)},ft.useLayoutEffect=function(R,G){return P.H.useLayoutEffect(R,G)},ft.useMemo=function(R,G){return P.H.useMemo(R,G)},ft.useOptimistic=function(R,G){return P.H.useOptimistic(R,G)},ft.useReducer=function(R,G,Q){return P.H.useReducer(R,G,Q)},ft.useRef=function(R){return P.H.useRef(R)},ft.useState=function(R){return P.H.useState(R)},ft.useSyncExternalStore=function(R,G,Q){return P.H.useSyncExternalStore(R,G,Q)},ft.useTransition=function(){return P.H.useTransition()},ft.version="19.2.0",ft}var Xg;function vh(){return Xg||(Xg=1,Iu.exports=Zb()),Iu.exports}var j=vh(),ju={exports:{}},er={},Gu={exports:{}},qu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function Jb(){return Yg||(Yg=1,(function(d){function t(B,V){var W=B.length;B.push(V);t:for(;0<W;){var dt=W-1>>>1,wt=B[dt];if(0<r(wt,V))B[dt]=V,B[W]=wt,W=dt;else break t}}function i(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var V=B[0],W=B.pop();if(W!==V){B[0]=W;t:for(var dt=0,wt=B.length,R=wt>>>1;dt<R;){var G=2*(dt+1)-1,Q=B[G],tt=G+1,lt=B[tt];if(0>r(Q,W))tt<wt&&0>r(lt,Q)?(B[dt]=lt,B[tt]=W,dt=tt):(B[dt]=Q,B[G]=W,dt=G);else if(tt<wt&&0>r(lt,W))B[dt]=lt,B[tt]=W,dt=tt;else break t}}return V}function r(B,V){var W=B.sortIndex-V.sortIndex;return W!==0?W:B.id-V.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;d.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();d.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,y=null,b=3,A=!1,w=!1,S=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function L(B){for(var V=i(f);V!==null;){if(V.callback===null)s(f);else if(V.startTime<=B)s(f),V.sortIndex=V.expirationTime,t(h,V);else break;V=i(f)}}function N(B){if(S=!1,L(B),!w)if(i(h)!==null)w=!0,O||(O=!0,ht());else{var V=i(f);V!==null&&St(N,V.startTime-B)}}var O=!1,P=-1,X=5,K=-1;function J(){return x?!0:!(d.unstable_now()-K<X)}function Z(){if(x=!1,O){var B=d.unstable_now();K=B;var V=!0;try{t:{w=!1,S&&(S=!1,T(P),P=-1),A=!0;var W=b;try{e:{for(L(B),y=i(h);y!==null&&!(y.expirationTime>B&&J());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,b=y.priorityLevel;var wt=dt(y.expirationTime<=B);if(B=d.unstable_now(),typeof wt=="function"){y.callback=wt,L(B),V=!0;break e}y===i(h)&&s(h),L(B)}else s(h);y=i(h)}if(y!==null)V=!0;else{var R=i(f);R!==null&&St(N,R.startTime-B),V=!1}}break t}finally{y=null,b=W,A=!1}V=void 0}}finally{V?ht():O=!1}}}var ht;if(typeof C=="function")ht=function(){C(Z)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,vt=At.port2;At.port1.onmessage=Z,ht=function(){vt.postMessage(null)}}else ht=function(){E(Z,0)};function St(B,V){P=E(function(){B(d.unstable_now())},V)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(B){B.callback=null},d.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<B?Math.floor(1e3/B):5},d.unstable_getCurrentPriorityLevel=function(){return b},d.unstable_next=function(B){switch(b){case 1:case 2:case 3:var V=3;break;default:V=b}var W=b;b=V;try{return B()}finally{b=W}},d.unstable_requestPaint=function(){x=!0},d.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var W=b;b=B;try{return V()}finally{b=W}},d.unstable_scheduleCallback=function(B,V,W){var dt=d.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?dt+W:dt):W=dt,B){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=W+wt,B={id:g++,callback:V,priorityLevel:B,startTime:W,expirationTime:wt,sortIndex:-1},W>dt?(B.sortIndex=W,t(f,B),i(h)===null&&B===i(f)&&(S?(T(P),P=-1):S=!0,St(N,W-dt))):(B.sortIndex=wt,t(h,B),w||A||(w=!0,O||(O=!0,ht()))),B},d.unstable_shouldYield=J,d.unstable_wrapCallback=function(B){var V=b;return function(){var W=b;b=V;try{return B.apply(this,arguments)}finally{b=W}}}})(qu)),qu}var $g;function tv(){return $g||($g=1,Gu.exports=Jb()),Gu.exports}var Vu={exports:{}},xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function ev(){if(Kg)return xe;Kg=1;var d=vh();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(h,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:f,implementation:g}}var c=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,xe.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(h,f,null,g)},xe.flushSync=function(h){var f=c.T,g=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=f,s.p=g,s.d.f()}},xe.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},xe.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},xe.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&s.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},xe.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=u(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},xe.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=u(g,f.crossOrigin);s.d.L(h,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},xe.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=u(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},xe.requestFormReset=function(h){s.d.r(h)},xe.unstable_batchedUpdates=function(h,f){return h(f)},xe.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},xe.useFormStatus=function(){return c.H.useHostTransitionStatus()},xe.version="19.2.0",xe}var Qg;function iv(){if(Qg)return Vu.exports;Qg=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),Vu.exports=ev(),Vu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function nv(){if(Wg)return er;Wg=1;var d=tv(),t=vh(),i=iv();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=l(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var p=a.return;if(p===null)break;var m=p.alternate;if(m===null){if(o=p.return,o!==null){a=o;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===a)return h(p),e;if(m===o)return h(p),n;m=m.sibling}throw Error(s(188))}if(a.return!==o.return)a=p,o=m;else{for(var v=!1,_=p.child;_;){if(_===a){v=!0,a=p,o=m;break}if(_===o){v=!0,o=p,a=m;break}_=_.sibling}if(!v){for(_=m.child;_;){if(_===a){v=!0,a=m,o=p;break}if(_===o){v=!0,o=m,a=p;break}_=_.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ht(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var At=Symbol.for("react.client.reference");function vt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===At?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case N:return"Suspense";case O:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case C:return e.displayName||"Context";case T:return(e._context.displayName||"Context")+".Consumer";case L:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return n=e.displayName||null,n!==null?n:vt(e.type)||"Memo";case X:n=e._payload,e=e._init;try{return vt(e(n))}catch{}}return null}var St=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},dt=[],wt=-1;function R(e){return{current:e}}function G(e){0>wt||(e.current=dt[wt],dt[wt]=null,wt--)}function Q(e,n){wt++,dt[wt]=e.current,e.current=n}var tt=R(null),lt=R(null),ut=R(null),ot=R(null);function ee(e,n){switch(Q(ut,n),Q(lt,e),Q(tt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?ug(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=ug(n),e=hg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(tt),Q(tt,e)}function It(){G(tt),G(lt),G(ut)}function kn(e){e.memoizedState!==null&&Q(ot,e);var n=tt.current,a=hg(n,e.type);n!==a&&(Q(lt,e),Q(tt,a))}function nn(e){lt.current===e&&(G(tt),G(lt)),ot.current===e&&(G(ot),Qa._currentValue=W)}var Bn,la;function Di(e){if(Bn===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Bn=n&&n[1]||"",la=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bn+e+la}var wo=!1;function Eo(e,n){if(!e||wo)return"";wo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(I){var H=I}Reflect.construct(e,[],$)}else{try{$.call()}catch(I){H=I}e.call($.prototype)}}else{try{throw Error()}catch(I){H=I}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(I){if(I&&H&&typeof I.stack=="string")return[I.stack,H.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),v=m[0],_=m[1];if(v&&_){var M=v.split(`
`),F=_.split(`
`);for(p=o=0;o<M.length&&!M[o].includes("DetermineComponentFrameRoot");)o++;for(;p<F.length&&!F[p].includes("DetermineComponentFrameRoot");)p++;if(o===M.length||p===F.length)for(o=M.length-1,p=F.length-1;1<=o&&0<=p&&M[o]!==F[p];)p--;for(;1<=o&&0<=p;o--,p--)if(M[o]!==F[p]){if(o!==1||p!==1)do if(o--,p--,0>p||M[o]!==F[p]){var q=`
`+M[o].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=o&&0<=p);break}}}finally{wo=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Di(a):""}function T0(e,n){switch(e.tag){case 26:case 27:case 5:return Di(e.type);case 16:return Di("Lazy");case 13:return e.child!==n&&n!==null?Di("Suspense Fallback"):Di("Suspense");case 19:return Di("SuspenseList");case 0:case 15:return Eo(e.type,!1);case 11:return Eo(e.type.render,!1);case 1:return Eo(e.type,!0);case 31:return Di("Activity");default:return""}}function Hh(e){try{var n="",a=null;do n+=T0(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var _o=Object.prototype.hasOwnProperty,xo=d.unstable_scheduleCallback,Co=d.unstable_cancelCallback,M0=d.unstable_shouldYield,R0=d.unstable_requestPaint,Ie=d.unstable_now,D0=d.unstable_getCurrentPriorityLevel,Ih=d.unstable_ImmediatePriority,jh=d.unstable_UserBlockingPriority,Mr=d.unstable_NormalPriority,N0=d.unstable_LowPriority,Gh=d.unstable_IdlePriority,L0=d.log,O0=d.unstable_setDisableYieldValue,oa=null,je=null;function sn(e){if(typeof L0=="function"&&O0(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(oa,e)}catch{}}var Ge=Math.clz32?Math.clz32:P0,k0=Math.log,B0=Math.LN2;function P0(e){return e>>>=0,e===0?32:31-(k0(e)/B0|0)|0}var Rr=256,Dr=262144,Nr=4194304;function Pn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Lr(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var p=0,m=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=o&134217727;return _!==0?(o=_&~m,o!==0?p=Pn(o):(v&=_,v!==0?p=Pn(v):a||(a=_&~e,a!==0&&(p=Pn(a))))):(_=o&~m,_!==0?p=Pn(_):v!==0?p=Pn(v):a||(a=o&~e,a!==0&&(p=Pn(a)))),p===0?0:n!==0&&n!==p&&(n&m)===0&&(m=p&-p,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:p}function ca(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function z0(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qh(){var e=Nr;return Nr<<=1,(Nr&62914560)===0&&(Nr=4194304),e}function To(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function ua(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function F0(e,n,a,o,p,m){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,M=e.expirationTimes,F=e.hiddenUpdates;for(a=v&~a;0<a;){var q=31-Ge(a),$=1<<q;_[q]=0,M[q]=-1;var H=F[q];if(H!==null)for(F[q]=null,q=0;q<H.length;q++){var I=H[q];I!==null&&(I.lane&=-536870913)}a&=~$}o!==0&&Vh(e,o,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(v&~n))}function Vh(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ge(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Xh(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Ge(a),p=1<<o;p&n|e[o]&n&&(e[o]|=n),a&=~p}}function Yh(e,n){var a=n&-n;return a=(a&42)!==0?1:Mo(a),(a&(e.suspendedLanes|n))!==0?0:a}function Mo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ro(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $h(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:kg(e.type))}function Kh(e,n){var a=V.p;try{return V.p=e,n()}finally{V.p=a}}var an=Math.random().toString(36).slice(2),me="__reactFiber$"+an,Ne="__reactProps$"+an,os="__reactContainer$"+an,Do="__reactEvents$"+an,U0="__reactListeners$"+an,H0="__reactHandles$"+an,Qh="__reactResources$"+an,ha="__reactMarker$"+an;function No(e){delete e[me],delete e[Ne],delete e[Do],delete e[U0],delete e[H0]}function cs(e){var n=e[me];if(n)return n;for(var a=e.parentNode;a;){if(n=a[os]||a[me]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=bg(e);e!==null;){if(a=e[me])return a;e=bg(e)}return n}e=a,a=e.parentNode}return null}function us(e){if(e=e[me]||e[os]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function da(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function hs(e){var n=e[Qh];return n||(n=e[Qh]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function de(e){e[ha]=!0}var Wh=new Set,Zh={};function zn(e,n){ds(e,n),ds(e+"Capture",n)}function ds(e,n){for(Zh[e]=n,e=0;e<n.length;e++)Wh.add(n[e])}var I0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jh={},td={};function j0(e){return _o.call(td,e)?!0:_o.call(Jh,e)?!1:I0.test(e)?td[e]=!0:(Jh[e]=!0,!1)}function Or(e,n,a){if(j0(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function kr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Ni(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function Je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ed(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function G0(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,m=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Lo(e){if(!e._valueTracker){var n=ed(e)?"checked":"value";e._valueTracker=G0(e,n,""+e[n])}}function id(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=ed(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function Br(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var q0=/[\n"\\]/g;function ti(e){return e.replace(q0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Oo(e,n,a,o,p,m,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Je(n)):e.value!==""+Je(n)&&(e.value=""+Je(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?ko(e,v,Je(n)):a!=null?ko(e,v,Je(a)):o!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+Je(_):e.removeAttribute("name")}function nd(e,n,a,o,p,m,v,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){Lo(e);return}a=a!=null?""+Je(a):"",n=n!=null?""+Je(n):a,_||n===e.value||(e.value=n),e.defaultValue=n}o=o??p,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=_?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Lo(e)}function ko(e,n,a){n==="number"&&Br(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function fs(e,n,a,o){if(e=e.options,n){n={};for(var p=0;p<a.length;p++)n["$"+a[p]]=!0;for(a=0;a<e.length;a++)p=n.hasOwnProperty("$"+e[a].value),e[a].selected!==p&&(e[a].selected=p),p&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Je(a),n=null,p=0;p<e.length;p++){if(e[p].value===a){e[p].selected=!0,o&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function sd(e,n,a){if(n!=null&&(n=""+Je(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Je(a):""}function ad(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(St(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Je(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Lo(e)}function ps(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var V0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rd(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||V0.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function ld(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var p in n)o=n[p],n.hasOwnProperty(p)&&a[p]!==o&&rd(e,p,o)}else for(var m in n)n.hasOwnProperty(m)&&rd(e,m,n[m])}function Bo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Y0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pr(e){return Y0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Li(){}var Po=null;function zo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gs=null,ms=null;function od(e){var n=us(e);if(n&&(e=n.stateNode)){var a=e[Ne]||null;t:switch(e=n.stateNode,n.type){case"input":if(Oo(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ti(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var p=o[Ne]||null;if(!p)throw Error(s(90));Oo(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&id(o)}break t;case"textarea":sd(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&fs(e,!!a.multiple,n,!1)}}}var Fo=!1;function cd(e,n,a){if(Fo)return e(n,a);Fo=!0;try{var o=e(n);return o}finally{if(Fo=!1,(gs!==null||ms!==null)&&(El(),gs&&(n=gs,e=ms,ms=gs=null,od(n),e)))for(n=0;n<e.length;n++)od(e[n])}}function fa(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Ne]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=!1;if(Oi)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){Uo=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{Uo=!1}var rn=null,Ho=null,zr=null;function ud(){if(zr)return zr;var e,n=Ho,a=n.length,o,p="value"in rn?rn.value:rn.textContent,m=p.length;for(e=0;e<a&&n[e]===p[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===p[m-o];o++);return zr=p.slice(e,1<o?1-o:void 0)}function Fr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ur(){return!0}function hd(){return!1}function Le(e){function n(a,o,p,m,v){this._reactName=a,this._targetInst=p,this.type=o,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ur:hd,this.isPropagationStopped=hd,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),n}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hr=Le(Fn),ga=y({},Fn,{view:0,detail:0}),$0=Le(ga),Io,jo,ma,Ir=y({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ma&&(ma&&e.type==="mousemove"?(Io=e.screenX-ma.screenX,jo=e.screenY-ma.screenY):jo=Io=0,ma=e),Io)},movementY:function(e){return"movementY"in e?e.movementY:jo}}),dd=Le(Ir),K0=y({},Ir,{dataTransfer:0}),Q0=Le(K0),W0=y({},ga,{relatedTarget:0}),Go=Le(W0),Z0=y({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),J0=Le(Z0),ty=y({},Fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ey=Le(ty),iy=y({},Fn,{data:0}),fd=Le(iy),ny={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ay={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ry(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ay[e])?!!n[e]:!1}function qo(){return ry}var ly=y({},ga,{key:function(e){if(e.key){var n=ny[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Fr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(e){return e.type==="keypress"?Fr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oy=Le(ly),cy=y({},Ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pd=Le(cy),uy=y({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),hy=Le(uy),dy=y({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),fy=Le(dy),py=y({},Ir,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gy=Le(py),my=y({},Fn,{newState:0,oldState:0}),yy=Le(my),by=[9,13,27,32],Vo=Oi&&"CompositionEvent"in window,ya=null;Oi&&"documentMode"in document&&(ya=document.documentMode);var vy=Oi&&"TextEvent"in window&&!ya,gd=Oi&&(!Vo||ya&&8<ya&&11>=ya),md=" ",yd=!1;function bd(e,n){switch(e){case"keyup":return by.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ys=!1;function Ay(e,n){switch(e){case"compositionend":return vd(n);case"keypress":return n.which!==32?null:(yd=!0,md);case"textInput":return e=n.data,e===md&&yd?null:e;default:return null}}function Sy(e,n){if(ys)return e==="compositionend"||!Vo&&bd(e,n)?(e=ud(),zr=Ho=rn=null,ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return gd&&n.locale!=="ko"?null:n.data;default:return null}}var wy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ad(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!wy[e.type]:n==="textarea"}function Sd(e,n,a,o){gs?ms?ms.push(o):ms=[o]:gs=o,n=Dl(n,"onChange"),0<n.length&&(a=new Hr("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var ba=null,va=null;function Ey(e){sg(e,0)}function jr(e){var n=da(e);if(id(n))return e}function wd(e,n){if(e==="change")return n}var Ed=!1;if(Oi){var Xo;if(Oi){var Yo="oninput"in document;if(!Yo){var _d=document.createElement("div");_d.setAttribute("oninput","return;"),Yo=typeof _d.oninput=="function"}Xo=Yo}else Xo=!1;Ed=Xo&&(!document.documentMode||9<document.documentMode)}function xd(){ba&&(ba.detachEvent("onpropertychange",Cd),va=ba=null)}function Cd(e){if(e.propertyName==="value"&&jr(va)){var n=[];Sd(n,va,e,zo(e)),cd(Ey,n)}}function _y(e,n,a){e==="focusin"?(xd(),ba=n,va=a,ba.attachEvent("onpropertychange",Cd)):e==="focusout"&&xd()}function xy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jr(va)}function Cy(e,n){if(e==="click")return jr(n)}function Ty(e,n){if(e==="input"||e==="change")return jr(n)}function My(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var qe=typeof Object.is=="function"?Object.is:My;function Aa(e,n){if(qe(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var p=a[o];if(!_o.call(n,p)||!qe(e[p],n[p]))return!1}return!0}function Td(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Md(e,n){var a=Td(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Td(a)}}function Rd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Rd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Dd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Br(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Br(e.document)}return n}function $o(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Ry=Oi&&"documentMode"in document&&11>=document.documentMode,bs=null,Ko=null,Sa=null,Qo=!1;function Nd(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qo||bs==null||bs!==Br(o)||(o=bs,"selectionStart"in o&&$o(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Sa&&Aa(Sa,o)||(Sa=o,o=Dl(Ko,"onSelect"),0<o.length&&(n=new Hr("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=bs)))}function Un(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var vs={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionrun:Un("Transition","TransitionRun"),transitionstart:Un("Transition","TransitionStart"),transitioncancel:Un("Transition","TransitionCancel"),transitionend:Un("Transition","TransitionEnd")},Wo={},Ld={};Oi&&(Ld=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Hn(e){if(Wo[e])return Wo[e];if(!vs[e])return e;var n=vs[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Ld)return Wo[e]=n[a];return e}var Od=Hn("animationend"),kd=Hn("animationiteration"),Bd=Hn("animationstart"),Dy=Hn("transitionrun"),Ny=Hn("transitionstart"),Ly=Hn("transitioncancel"),Pd=Hn("transitionend"),zd=new Map,Zo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zo.push("scrollEnd");function fi(e,n){zd.set(e,n),zn(n,[e])}var Gr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ei=[],As=0,Jo=0;function qr(){for(var e=As,n=Jo=As=0;n<e;){var a=ei[n];ei[n++]=null;var o=ei[n];ei[n++]=null;var p=ei[n];ei[n++]=null;var m=ei[n];if(ei[n++]=null,o!==null&&p!==null){var v=o.pending;v===null?p.next=p:(p.next=v.next,v.next=p),o.pending=p}m!==0&&Fd(a,p,m)}}function Vr(e,n,a,o){ei[As++]=e,ei[As++]=n,ei[As++]=a,ei[As++]=o,Jo|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function tc(e,n,a,o){return Vr(e,n,a,o),Xr(e)}function In(e,n){return Vr(e,null,null,n),Xr(e)}function Fd(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var p=!1,m=e.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&n!==null&&(p=31-Ge(a),e=m.hiddenUpdates,o=e[p],o===null?e[p]=[n]:o.push(n),n.lane=a|536870912),m):null}function Xr(e){if(50<Ga)throw Ga=0,cu=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ss={};function Oy(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(e,n,a,o){return new Oy(e,n,a,o)}function ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ki(e,n){var a=e.alternate;return a===null?(a=Ve(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Ud(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Yr(e,n,a,o,p,m){var v=0;if(o=e,typeof e=="function")ec(e)&&(v=1);else if(typeof e=="string")v=Fb(e,a,tt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case K:return e=Ve(31,a,n,p),e.elementType=K,e.lanes=m,e;case S:return jn(a.children,p,m,n);case x:v=8,p|=24;break;case E:return e=Ve(12,a,n,p|2),e.elementType=E,e.lanes=m,e;case N:return e=Ve(13,a,n,p),e.elementType=N,e.lanes=m,e;case O:return e=Ve(19,a,n,p),e.elementType=O,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break t;case T:v=9;break t;case L:v=11;break t;case P:v=14;break t;case X:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=Ve(v,a,n,p),n.elementType=e,n.type=o,n.lanes=m,n}function jn(e,n,a,o){return e=Ve(7,e,o,n),e.lanes=a,e}function ic(e,n,a){return e=Ve(6,e,null,n),e.lanes=a,e}function Hd(e){var n=Ve(18,null,null,0);return n.stateNode=e,n}function nc(e,n,a){return n=Ve(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Id=new WeakMap;function ii(e,n){if(typeof e=="object"&&e!==null){var a=Id.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Hh(n)},Id.set(e,n),n)}return{value:e,source:n,stack:Hh(n)}}var ws=[],Es=0,$r=null,wa=0,ni=[],si=0,ln=null,yi=1,bi="";function Bi(e,n){ws[Es++]=wa,ws[Es++]=$r,$r=e,wa=n}function jd(e,n,a){ni[si++]=yi,ni[si++]=bi,ni[si++]=ln,ln=e;var o=yi;e=bi;var p=32-Ge(o)-1;o&=~(1<<p),a+=1;var m=32-Ge(n)+p;if(30<m){var v=p-p%5;m=(o&(1<<v)-1).toString(32),o>>=v,p-=v,yi=1<<32-Ge(n)+p|a<<p|o,bi=m+e}else yi=1<<m|a<<p|o,bi=e}function sc(e){e.return!==null&&(Bi(e,1),jd(e,1,0))}function ac(e){for(;e===$r;)$r=ws[--Es],ws[Es]=null,wa=ws[--Es],ws[Es]=null;for(;e===ln;)ln=ni[--si],ni[si]=null,bi=ni[--si],ni[si]=null,yi=ni[--si],ni[si]=null}function Gd(e,n){ni[si++]=yi,ni[si++]=bi,ni[si++]=ln,yi=n.id,bi=n.overflow,ln=e}var ye=null,qt=null,Tt=!1,on=null,ai=!1,rc=Error(s(519));function cn(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ea(ii(n,e)),rc}function qd(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[me]=e,n[Ne]=o,a){case"dialog":_t("cancel",n),_t("close",n);break;case"iframe":case"object":case"embed":_t("load",n);break;case"video":case"audio":for(a=0;a<Va.length;a++)_t(Va[a],n);break;case"source":_t("error",n);break;case"img":case"image":case"link":_t("error",n),_t("load",n);break;case"details":_t("toggle",n);break;case"input":_t("invalid",n),nd(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":_t("invalid",n);break;case"textarea":_t("invalid",n),ad(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||og(n.textContent,a)?(o.popover!=null&&(_t("beforetoggle",n),_t("toggle",n)),o.onScroll!=null&&_t("scroll",n),o.onScrollEnd!=null&&_t("scrollend",n),o.onClick!=null&&(n.onclick=Li),n=!0):n=!1,n||cn(e,!0)}function Vd(e){for(ye=e.return;ye;)switch(ye.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:ye=ye.return}}function _s(e){if(e!==ye)return!1;if(!Tt)return Vd(e),Tt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||_u(e.type,e.memoizedProps)),a=!a),a&&qt&&cn(e),Vd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qt=yg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));qt=yg(e)}else n===27?(n=qt,En(e.type)?(e=Ru,Ru=null,qt=e):qt=n):qt=ye?li(e.stateNode.nextSibling):null;return!0}function Gn(){qt=ye=null,Tt=!1}function lc(){var e=on;return e!==null&&(Pe===null?Pe=e:Pe.push.apply(Pe,e),on=null),e}function Ea(e){on===null?on=[e]:on.push(e)}var oc=R(null),qn=null,Pi=null;function un(e,n,a){Q(oc,n._currentValue),n._currentValue=a}function zi(e){e._currentValue=oc.current,G(oc)}function cc(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function uc(e,n,a,o){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var v=p.child;m=m.firstContext;t:for(;m!==null;){var _=m;m=p;for(var M=0;M<n.length;M++)if(_.context===n[M]){m.lanes|=a,_=m.alternate,_!==null&&(_.lanes|=a),cc(m.return,a,e),o||(v=null);break t}m=_.next}}else if(p.tag===18){if(v=p.return,v===null)throw Error(s(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),cc(v,a,e),v=null}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===e){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}}function xs(e,n,a,o){e=null;for(var p=n,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var v=p.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=p.type;qe(p.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(p===ot.current){if(v=p.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Qa):e=[Qa])}p=p.return}e!==null&&uc(n,e,a,o),n.flags|=262144}function Kr(e){for(e=e.firstContext;e!==null;){if(!qe(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vn(e){qn=e,Pi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function be(e){return Xd(qn,e)}function Qr(e,n){return qn===null&&Vn(e),Xd(e,n)}function Xd(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Pi===null){if(e===null)throw Error(s(308));Pi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Pi=Pi.next=n;return a}var ky=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},By=d.unstable_scheduleCallback,Py=d.unstable_NormalPriority,ae={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hc(){return{controller:new ky,data:new Map,refCount:0}}function _a(e){e.refCount--,e.refCount===0&&By(Py,function(){e.controller.abort()})}var xa=null,dc=0,Cs=0,Ts=null;function zy(e,n){if(xa===null){var a=xa=[];dc=0,Cs=gu(),Ts={status:"pending",value:void 0,then:function(o){a.push(o)}}}return dc++,n.then(Yd,Yd),n}function Yd(){if(--dc===0&&xa!==null){Ts!==null&&(Ts.status="fulfilled");var e=xa;xa=null,Cs=0,Ts=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Fy(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var p=0;p<a.length;p++)(0,a[p])(n)},function(p){for(o.status="rejected",o.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),o}var $d=B.S;B.S=function(e,n){Lp=Ie(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&zy(e,n),$d!==null&&$d(e,n)};var Xn=R(null);function fc(){var e=Xn.current;return e!==null?e:jt.pooledCache}function Wr(e,n){n===null?Q(Xn,Xn.current):Q(Xn,n.pool)}function Kd(){var e=fc();return e===null?null:{parent:ae._currentValue,pool:e}}var Ms=Error(s(460)),pc=Error(s(474)),Zr=Error(s(542)),Jr={then:function(){}};function Qd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wd(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Li,Li),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jd(e),e;default:if(typeof n.status=="string")n.then(Li,Li);else{if(e=jt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=o}},function(o){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jd(e),e}throw $n=n,Ms}}function Yn(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($n=a,Ms):a}}var $n=null;function Zd(){if($n===null)throw Error(s(459));var e=$n;return $n=null,e}function Jd(e){if(e===Ms||e===Zr)throw Error(s(483))}var Rs=null,Ca=0;function tl(e){var n=Ca;return Ca+=1,Rs===null&&(Rs=[]),Wd(Rs,e,n)}function Ta(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function el(e,n){throw n.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function tf(e){function n(k,D){if(e){var z=k.deletions;z===null?(k.deletions=[D],k.flags|=16):z.push(D)}}function a(k,D){if(!e)return null;for(;D!==null;)n(k,D),D=D.sibling;return null}function o(k){for(var D=new Map;k!==null;)k.key!==null?D.set(k.key,k):D.set(k.index,k),k=k.sibling;return D}function p(k,D){return k=ki(k,D),k.index=0,k.sibling=null,k}function m(k,D,z){return k.index=z,e?(z=k.alternate,z!==null?(z=z.index,z<D?(k.flags|=67108866,D):z):(k.flags|=67108866,D)):(k.flags|=1048576,D)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function _(k,D,z,Y){return D===null||D.tag!==6?(D=ic(z,k.mode,Y),D.return=k,D):(D=p(D,z),D.return=k,D)}function M(k,D,z,Y){var at=z.type;return at===S?q(k,D,z.props.children,Y,z.key):D!==null&&(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===X&&Yn(at)===D.type)?(D=p(D,z.props),Ta(D,z),D.return=k,D):(D=Yr(z.type,z.key,z.props,null,k.mode,Y),Ta(D,z),D.return=k,D)}function F(k,D,z,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=nc(z,k.mode,Y),D.return=k,D):(D=p(D,z.children||[]),D.return=k,D)}function q(k,D,z,Y,at){return D===null||D.tag!==7?(D=jn(z,k.mode,Y,at),D.return=k,D):(D=p(D,z),D.return=k,D)}function $(k,D,z){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=ic(""+D,k.mode,z),D.return=k,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return z=Yr(D.type,D.key,D.props,null,k.mode,z),Ta(z,D),z.return=k,z;case w:return D=nc(D,k.mode,z),D.return=k,D;case X:return D=Yn(D),$(k,D,z)}if(St(D)||ht(D))return D=jn(D,k.mode,z,null),D.return=k,D;if(typeof D.then=="function")return $(k,tl(D),z);if(D.$$typeof===C)return $(k,Qr(k,D),z);el(k,D)}return null}function H(k,D,z,Y){var at=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return at!==null?null:_(k,D,""+z,Y);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return z.key===at?M(k,D,z,Y):null;case w:return z.key===at?F(k,D,z,Y):null;case X:return z=Yn(z),H(k,D,z,Y)}if(St(z)||ht(z))return at!==null?null:q(k,D,z,Y,null);if(typeof z.then=="function")return H(k,D,tl(z),Y);if(z.$$typeof===C)return H(k,D,Qr(k,z),Y);el(k,z)}return null}function I(k,D,z,Y,at){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return k=k.get(z)||null,_(D,k,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return k=k.get(Y.key===null?z:Y.key)||null,M(D,k,Y,at);case w:return k=k.get(Y.key===null?z:Y.key)||null,F(D,k,Y,at);case X:return Y=Yn(Y),I(k,D,z,Y,at)}if(St(Y)||ht(Y))return k=k.get(z)||null,q(D,k,Y,at,null);if(typeof Y.then=="function")return I(k,D,z,tl(Y),at);if(Y.$$typeof===C)return I(k,D,z,Qr(D,Y),at);el(D,Y)}return null}function it(k,D,z,Y){for(var at=null,Dt=null,st=D,bt=D=0,Ct=null;st!==null&&bt<z.length;bt++){st.index>bt?(Ct=st,st=null):Ct=st.sibling;var Nt=H(k,st,z[bt],Y);if(Nt===null){st===null&&(st=Ct);break}e&&st&&Nt.alternate===null&&n(k,st),D=m(Nt,D,bt),Dt===null?at=Nt:Dt.sibling=Nt,Dt=Nt,st=Ct}if(bt===z.length)return a(k,st),Tt&&Bi(k,bt),at;if(st===null){for(;bt<z.length;bt++)st=$(k,z[bt],Y),st!==null&&(D=m(st,D,bt),Dt===null?at=st:Dt.sibling=st,Dt=st);return Tt&&Bi(k,bt),at}for(st=o(st);bt<z.length;bt++)Ct=I(st,k,bt,z[bt],Y),Ct!==null&&(e&&Ct.alternate!==null&&st.delete(Ct.key===null?bt:Ct.key),D=m(Ct,D,bt),Dt===null?at=Ct:Dt.sibling=Ct,Dt=Ct);return e&&st.forEach(function(Mn){return n(k,Mn)}),Tt&&Bi(k,bt),at}function ct(k,D,z,Y){if(z==null)throw Error(s(151));for(var at=null,Dt=null,st=D,bt=D=0,Ct=null,Nt=z.next();st!==null&&!Nt.done;bt++,Nt=z.next()){st.index>bt?(Ct=st,st=null):Ct=st.sibling;var Mn=H(k,st,Nt.value,Y);if(Mn===null){st===null&&(st=Ct);break}e&&st&&Mn.alternate===null&&n(k,st),D=m(Mn,D,bt),Dt===null?at=Mn:Dt.sibling=Mn,Dt=Mn,st=Ct}if(Nt.done)return a(k,st),Tt&&Bi(k,bt),at;if(st===null){for(;!Nt.done;bt++,Nt=z.next())Nt=$(k,Nt.value,Y),Nt!==null&&(D=m(Nt,D,bt),Dt===null?at=Nt:Dt.sibling=Nt,Dt=Nt);return Tt&&Bi(k,bt),at}for(st=o(st);!Nt.done;bt++,Nt=z.next())Nt=I(st,k,bt,Nt.value,Y),Nt!==null&&(e&&Nt.alternate!==null&&st.delete(Nt.key===null?bt:Nt.key),D=m(Nt,D,bt),Dt===null?at=Nt:Dt.sibling=Nt,Dt=Nt);return e&&st.forEach(function(Kb){return n(k,Kb)}),Tt&&Bi(k,bt),at}function Ut(k,D,z,Y){if(typeof z=="object"&&z!==null&&z.type===S&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case A:t:{for(var at=z.key;D!==null;){if(D.key===at){if(at=z.type,at===S){if(D.tag===7){a(k,D.sibling),Y=p(D,z.props.children),Y.return=k,k=Y;break t}}else if(D.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===X&&Yn(at)===D.type){a(k,D.sibling),Y=p(D,z.props),Ta(Y,z),Y.return=k,k=Y;break t}a(k,D);break}else n(k,D);D=D.sibling}z.type===S?(Y=jn(z.props.children,k.mode,Y,z.key),Y.return=k,k=Y):(Y=Yr(z.type,z.key,z.props,null,k.mode,Y),Ta(Y,z),Y.return=k,k=Y)}return v(k);case w:t:{for(at=z.key;D!==null;){if(D.key===at)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){a(k,D.sibling),Y=p(D,z.children||[]),Y.return=k,k=Y;break t}else{a(k,D);break}else n(k,D);D=D.sibling}Y=nc(z,k.mode,Y),Y.return=k,k=Y}return v(k);case X:return z=Yn(z),Ut(k,D,z,Y)}if(St(z))return it(k,D,z,Y);if(ht(z)){if(at=ht(z),typeof at!="function")throw Error(s(150));return z=at.call(z),ct(k,D,z,Y)}if(typeof z.then=="function")return Ut(k,D,tl(z),Y);if(z.$$typeof===C)return Ut(k,D,Qr(k,z),Y);el(k,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,D!==null&&D.tag===6?(a(k,D.sibling),Y=p(D,z),Y.return=k,k=Y):(a(k,D),Y=ic(z,k.mode,Y),Y.return=k,k=Y),v(k)):a(k,D)}return function(k,D,z,Y){try{Ca=0;var at=Ut(k,D,z,Y);return Rs=null,at}catch(st){if(st===Ms||st===Zr)throw st;var Dt=Ve(29,st,null,k.mode);return Dt.lanes=Y,Dt.return=k,Dt}finally{}}}var Kn=tf(!0),ef=tf(!1),hn=!1;function gc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function dn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function fn(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Lt&2)!==0){var p=o.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),o.pending=n,n=Xr(e),Fd(e,null,a),n}return Vr(e,o,n,a),Xr(e)}function Ma(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Xh(e,a)}}function yc(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var p=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?p=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?p=m=n:m=m.next=n}else p=m=n;a={baseState:o.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var bc=!1;function Ra(){if(bc){var e=Ts;if(e!==null)throw e}}function Da(e,n,a,o){bc=!1;var p=e.updateQueue;hn=!1;var m=p.firstBaseUpdate,v=p.lastBaseUpdate,_=p.shared.pending;if(_!==null){p.shared.pending=null;var M=_,F=M.next;M.next=null,v===null?m=F:v.next=F,v=M;var q=e.alternate;q!==null&&(q=q.updateQueue,_=q.lastBaseUpdate,_!==v&&(_===null?q.firstBaseUpdate=F:_.next=F,q.lastBaseUpdate=M))}if(m!==null){var $=p.baseState;v=0,q=F=M=null,_=m;do{var H=_.lane&-536870913,I=H!==_.lane;if(I?(xt&H)===H:(o&H)===H){H!==0&&H===Cs&&(bc=!0),q!==null&&(q=q.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var it=e,ct=_;H=n;var Ut=a;switch(ct.tag){case 1:if(it=ct.payload,typeof it=="function"){$=it.call(Ut,$,H);break t}$=it;break t;case 3:it.flags=it.flags&-65537|128;case 0:if(it=ct.payload,H=typeof it=="function"?it.call(Ut,$,H):it,H==null)break t;$=y({},$,H);break t;case 2:hn=!0}}H=_.callback,H!==null&&(e.flags|=64,I&&(e.flags|=8192),I=p.callbacks,I===null?p.callbacks=[H]:I.push(H))}else I={lane:H,tag:_.tag,payload:_.payload,callback:_.callback,next:null},q===null?(F=q=I,M=$):q=q.next=I,v|=H;if(_=_.next,_===null){if(_=p.shared.pending,_===null)break;I=_,_=I.next,I.next=null,p.lastBaseUpdate=I,p.shared.pending=null}}while(!0);q===null&&(M=$),p.baseState=M,p.firstBaseUpdate=F,p.lastBaseUpdate=q,m===null&&(p.shared.lanes=0),bn|=v,e.lanes=v,e.memoizedState=$}}function nf(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function sf(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)nf(a[e],n)}var Ds=R(null),il=R(0);function af(e,n){e=Xi,Q(il,e),Q(Ds,n),Xi=e|n.baseLanes}function vc(){Q(il,Xi),Q(Ds,Ds.current)}function Ac(){Xi=il.current,G(Ds),G(il)}var Xe=R(null),ri=null;function pn(e){var n=e.alternate;Q(ie,ie.current&1),Q(Xe,e),ri===null&&(n===null||Ds.current!==null||n.memoizedState!==null)&&(ri=e)}function Sc(e){Q(ie,ie.current),Q(Xe,e),ri===null&&(ri=e)}function rf(e){e.tag===22?(Q(ie,ie.current),Q(Xe,e),ri===null&&(ri=e)):gn()}function gn(){Q(ie,ie.current),Q(Xe,Xe.current)}function Ye(e){G(Xe),ri===e&&(ri=null),G(ie)}var ie=R(0);function nl(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Tu(a)||Mu(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Fi=0,mt=null,zt=null,re=null,sl=!1,Ns=!1,Qn=!1,al=0,Na=0,Ls=null,Uy=0;function Zt(){throw Error(s(321))}function wc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!qe(e[a],n[a]))return!1;return!0}function Ec(e,n,a,o,p,m){return Fi=m,mt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=e===null||e.memoizedState===null?Gf:Fc,Qn=!1,m=a(o,p),Qn=!1,Ns&&(m=of(n,a,o,p)),lf(e),m}function lf(e){B.H=ka;var n=zt!==null&&zt.next!==null;if(Fi=0,re=zt=mt=null,sl=!1,Na=0,Ls=null,n)throw Error(s(300));e===null||le||(e=e.dependencies,e!==null&&Kr(e)&&(le=!0))}function of(e,n,a,o){mt=e;var p=0;do{if(Ns&&(Ls=null),Na=0,Ns=!1,25<=p)throw Error(s(301));if(p+=1,re=zt=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}B.H=qf,m=n(a,o)}while(Ns);return m}function Hy(){var e=B.H,n=e.useState()[0];return n=typeof n.then=="function"?La(n):n,e=e.useState()[0],(zt!==null?zt.memoizedState:null)!==e&&(mt.flags|=1024),n}function _c(){var e=al!==0;return al=0,e}function xc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Cc(e){if(sl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}sl=!1}Fi=0,re=zt=mt=null,Ns=!1,Na=al=0,Ls=null}function Ce(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?mt.memoizedState=re=e:re=re.next=e,re}function ne(){if(zt===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var n=re===null?mt.memoizedState:re.next;if(n!==null)re=n,zt=e;else{if(e===null)throw mt.alternate===null?Error(s(467)):Error(s(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},re===null?mt.memoizedState=re=e:re=re.next=e}return re}function rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function La(e){var n=Na;return Na+=1,Ls===null&&(Ls=[]),e=Wd(Ls,e,n),n=mt,(re===null?n.memoizedState:re.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?Gf:Fc),e}function ll(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return La(e);if(e.$$typeof===C)return be(e)}throw Error(s(438,String(e)))}function Tc(e){var n=null,a=mt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=mt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=rl(),mt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=J;return n.index++,a}function Ui(e,n){return typeof n=="function"?n(e):n}function ol(e){var n=ne();return Mc(n,zt,e)}function Mc(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var p=e.baseQueue,m=o.pending;if(m!==null){if(p!==null){var v=p.next;p.next=m.next,m.next=v}n.baseQueue=p=m,o.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{n=p.next;var _=v=null,M=null,F=n,q=!1;do{var $=F.lane&-536870913;if($!==F.lane?(xt&$)===$:(Fi&$)===$){var H=F.revertLane;if(H===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),$===Cs&&(q=!0);else if((Fi&H)===H){F=F.next,H===Cs&&(q=!0);continue}else $={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(_=M=$,v=m):M=M.next=$,mt.lanes|=H,bn|=H;$=F.action,Qn&&a(m,$),m=F.hasEagerState?F.eagerState:a(m,$)}else H={lane:$,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},M===null?(_=M=H,v=m):M=M.next=H,mt.lanes|=$,bn|=$;F=F.next}while(F!==null&&F!==n);if(M===null?v=m:M.next=_,!qe(m,e.memoizedState)&&(le=!0,q&&(a=Ts,a!==null)))throw a;e.memoizedState=m,e.baseState=v,e.baseQueue=M,o.lastRenderedState=m}return p===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Rc(e){var n=ne(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,p=a.pending,m=n.memoizedState;if(p!==null){a.pending=null;var v=p=p.next;do m=e(m,v.action),v=v.next;while(v!==p);qe(m,n.memoizedState)||(le=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,o]}function cf(e,n,a){var o=mt,p=ne(),m=Tt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!qe((zt||p).memoizedState,a);if(v&&(p.memoizedState=a,le=!0),p=p.queue,Lc(df.bind(null,o,p,e),[e]),p.getSnapshot!==n||v||re!==null&&re.memoizedState.tag&1){if(o.flags|=2048,Os(9,{destroy:void 0},hf.bind(null,o,p,a,n),null),jt===null)throw Error(s(349));m||(Fi&127)!==0||uf(o,n,a)}return a}function uf(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=mt.updateQueue,n===null?(n=rl(),mt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function hf(e,n,a,o){n.value=a,n.getSnapshot=o,ff(n)&&pf(e)}function df(e,n,a){return a(function(){ff(n)&&pf(e)})}function ff(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!qe(e,a)}catch{return!0}}function pf(e){var n=In(e,2);n!==null&&ze(n,e,2)}function Dc(e){var n=Ce();if(typeof e=="function"){var a=e;if(e=a(),Qn){sn(!0);try{a()}finally{sn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},n}function gf(e,n,a,o){return e.baseState=a,Mc(e,zt,typeof o=="function"?o:Ui)}function Iy(e,n,a,o,p){if(hl(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};B.T!==null?a(!0):m.isTransition=!1,o(m),a=n.pending,a===null?(m.next=n.pending=m,mf(n,m)):(m.next=a.next,n.pending=a.next=m)}}function mf(e,n){var a=n.action,o=n.payload,p=e.state;if(n.isTransition){var m=B.T,v={};B.T=v;try{var _=a(p,o),M=B.S;M!==null&&M(v,_),yf(e,n,_)}catch(F){Nc(e,n,F)}finally{m!==null&&v.types!==null&&(m.types=v.types),B.T=m}}else try{m=a(p,o),yf(e,n,m)}catch(F){Nc(e,n,F)}}function yf(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){bf(e,n,o)},function(o){return Nc(e,n,o)}):bf(e,n,a)}function bf(e,n,a){n.status="fulfilled",n.value=a,vf(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,mf(e,a)))}function Nc(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,vf(n),n=n.next;while(n!==o)}e.action=null}function vf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Af(e,n){return n}function Sf(e,n){if(Tt){var a=jt.formState;if(a!==null){t:{var o=mt;if(Tt){if(qt){e:{for(var p=qt,m=ai;p.nodeType!==8;){if(!m){p=null;break e}if(p=li(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){qt=li(p.nextSibling),o=p.data==="F!";break t}}cn(o)}o=!1}o&&(n=a[0])}}return a=Ce(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Af,lastRenderedState:n},a.queue=o,a=Hf.bind(null,mt,o),o.dispatch=a,o=Dc(!1),m=zc.bind(null,mt,!1,o.queue),o=Ce(),p={state:n,dispatch:null,action:e,pending:null},o.queue=p,a=Iy.bind(null,mt,p,m,a),p.dispatch=a,o.memoizedState=e,[n,a,!1]}function wf(e){var n=ne();return Ef(n,zt,e)}function Ef(e,n,a){if(n=Mc(e,n,Af)[0],e=ol(Ui)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=La(n)}catch(v){throw v===Ms?Zr:v}else o=n;n=ne();var p=n.queue,m=p.dispatch;return a!==n.memoizedState&&(mt.flags|=2048,Os(9,{destroy:void 0},jy.bind(null,p,a),null)),[o,m,e]}function jy(e,n){e.action=n}function _f(e){var n=ne(),a=zt;if(a!==null)return Ef(n,a,e);ne(),n=n.memoizedState,a=ne();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function Os(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=mt.updateQueue,n===null&&(n=rl(),mt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function xf(){return ne().memoizedState}function cl(e,n,a,o){var p=Ce();mt.flags|=e,p.memoizedState=Os(1|n,{destroy:void 0},a,o===void 0?null:o)}function ul(e,n,a,o){var p=ne();o=o===void 0?null:o;var m=p.memoizedState.inst;zt!==null&&o!==null&&wc(o,zt.memoizedState.deps)?p.memoizedState=Os(n,m,a,o):(mt.flags|=e,p.memoizedState=Os(1|n,m,a,o))}function Cf(e,n){cl(8390656,8,e,n)}function Lc(e,n){ul(2048,8,e,n)}function Gy(e){mt.flags|=4;var n=mt.updateQueue;if(n===null)n=rl(),mt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Tf(e){var n=ne().memoizedState;return Gy({ref:n,nextImpl:e}),function(){if((Lt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Mf(e,n){return ul(4,2,e,n)}function Rf(e,n){return ul(4,4,e,n)}function Df(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Nf(e,n,a){a=a!=null?a.concat([e]):null,ul(4,4,Df.bind(null,n,e),a)}function Oc(){}function Lf(e,n){var a=ne();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&wc(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Of(e,n){var a=ne();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&wc(n,o[1]))return o[0];if(o=e(),Qn){sn(!0);try{e()}finally{sn(!1)}}return a.memoizedState=[o,n],o}function kc(e,n,a){return a===void 0||(Fi&1073741824)!==0&&(xt&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=kp(),mt.lanes|=e,bn|=e,a)}function kf(e,n,a,o){return qe(a,n)?a:Ds.current!==null?(e=kc(e,a,o),qe(e,n)||(le=!0),e):(Fi&42)===0||(Fi&1073741824)!==0&&(xt&261930)===0?(le=!0,e.memoizedState=a):(e=kp(),mt.lanes|=e,bn|=e,n)}function Bf(e,n,a,o,p){var m=V.p;V.p=m!==0&&8>m?m:8;var v=B.T,_={};B.T=_,zc(e,!1,n,a);try{var M=p(),F=B.S;if(F!==null&&F(_,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var q=Fy(M,o);Oa(e,n,q,Qe(e))}else Oa(e,n,o,Qe(e))}catch($){Oa(e,n,{then:function(){},status:"rejected",reason:$},Qe())}finally{V.p=m,v!==null&&_.types!==null&&(v.types=_.types),B.T=v}}function qy(){}function Bc(e,n,a,o){if(e.tag!==5)throw Error(s(476));var p=Pf(e).queue;Bf(e,p,n,W,a===null?qy:function(){return zf(e),a(o)})}function Pf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:W},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function zf(e){var n=Pf(e);n.next===null&&(n=e.alternate.memoizedState),Oa(e,n.next.queue,{},Qe())}function Pc(){return be(Qa)}function Ff(){return ne().memoizedState}function Uf(){return ne().memoizedState}function Vy(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Qe();e=dn(a);var o=fn(n,e,a);o!==null&&(ze(o,n,a),Ma(o,n,a)),n={cache:hc()},e.payload=n;return}n=n.return}}function Xy(e,n,a){var o=Qe();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},hl(e)?If(n,a):(a=tc(e,n,a,o),a!==null&&(ze(a,e,o),jf(a,n,o)))}function Hf(e,n,a){var o=Qe();Oa(e,n,a,o)}function Oa(e,n,a,o){var p={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(hl(e))If(n,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,_=m(v,a);if(p.hasEagerState=!0,p.eagerState=_,qe(_,v))return Vr(e,n,p,0),jt===null&&qr(),!1}catch{}finally{}if(a=tc(e,n,p,o),a!==null)return ze(a,e,o),jf(a,n,o),!0}return!1}function zc(e,n,a,o){if(o={lane:2,revertLane:gu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},hl(e)){if(n)throw Error(s(479))}else n=tc(e,a,o,2),n!==null&&ze(n,e,2)}function hl(e){var n=e.alternate;return e===mt||n!==null&&n===mt}function If(e,n){Ns=sl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function jf(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Xh(e,a)}}var ka={readContext:be,use:ll,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};ka.useEffectEvent=Zt;var Gf={readContext:be,use:ll,useCallback:function(e,n){return Ce().memoizedState=[e,n===void 0?null:n],e},useContext:be,useEffect:Cf,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,cl(4194308,4,Df.bind(null,n,e),a)},useLayoutEffect:function(e,n){return cl(4194308,4,e,n)},useInsertionEffect:function(e,n){cl(4,2,e,n)},useMemo:function(e,n){var a=Ce();n=n===void 0?null:n;var o=e();if(Qn){sn(!0);try{e()}finally{sn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=Ce();if(a!==void 0){var p=a(n);if(Qn){sn(!0);try{a(n)}finally{sn(!1)}}}else p=n;return o.memoizedState=o.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},o.queue=e,e=e.dispatch=Xy.bind(null,mt,e),[o.memoizedState,e]},useRef:function(e){var n=Ce();return e={current:e},n.memoizedState=e},useState:function(e){e=Dc(e);var n=e.queue,a=Hf.bind(null,mt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Oc,useDeferredValue:function(e,n){var a=Ce();return kc(a,e,n)},useTransition:function(){var e=Dc(!1);return e=Bf.bind(null,mt,e.queue,!0,!1),Ce().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=mt,p=Ce();if(Tt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),jt===null)throw Error(s(349));(xt&127)!==0||uf(o,n,a)}p.memoizedState=a;var m={value:a,getSnapshot:n};return p.queue=m,Cf(df.bind(null,o,m,e),[e]),o.flags|=2048,Os(9,{destroy:void 0},hf.bind(null,o,m,a,n),null),a},useId:function(){var e=Ce(),n=jt.identifierPrefix;if(Tt){var a=bi,o=yi;a=(o&~(1<<32-Ge(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=al++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Uy++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Pc,useFormState:Sf,useActionState:Sf,useOptimistic:function(e){var n=Ce();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=zc.bind(null,mt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Tc,useCacheRefresh:function(){return Ce().memoizedState=Vy.bind(null,mt)},useEffectEvent:function(e){var n=Ce(),a={impl:e};return n.memoizedState=a,function(){if((Lt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Fc={readContext:be,use:ll,useCallback:Lf,useContext:be,useEffect:Lc,useImperativeHandle:Nf,useInsertionEffect:Mf,useLayoutEffect:Rf,useMemo:Of,useReducer:ol,useRef:xf,useState:function(){return ol(Ui)},useDebugValue:Oc,useDeferredValue:function(e,n){var a=ne();return kf(a,zt.memoizedState,e,n)},useTransition:function(){var e=ol(Ui)[0],n=ne().memoizedState;return[typeof e=="boolean"?e:La(e),n]},useSyncExternalStore:cf,useId:Ff,useHostTransitionStatus:Pc,useFormState:wf,useActionState:wf,useOptimistic:function(e,n){var a=ne();return gf(a,zt,e,n)},useMemoCache:Tc,useCacheRefresh:Uf};Fc.useEffectEvent=Tf;var qf={readContext:be,use:ll,useCallback:Lf,useContext:be,useEffect:Lc,useImperativeHandle:Nf,useInsertionEffect:Mf,useLayoutEffect:Rf,useMemo:Of,useReducer:Rc,useRef:xf,useState:function(){return Rc(Ui)},useDebugValue:Oc,useDeferredValue:function(e,n){var a=ne();return zt===null?kc(a,e,n):kf(a,zt.memoizedState,e,n)},useTransition:function(){var e=Rc(Ui)[0],n=ne().memoizedState;return[typeof e=="boolean"?e:La(e),n]},useSyncExternalStore:cf,useId:Ff,useHostTransitionStatus:Pc,useFormState:_f,useActionState:_f,useOptimistic:function(e,n){var a=ne();return zt!==null?gf(a,zt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Tc,useCacheRefresh:Uf};qf.useEffectEvent=Tf;function Uc(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Hc={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Qe(),p=dn(o);p.payload=n,a!=null&&(p.callback=a),n=fn(e,p,o),n!==null&&(ze(n,e,o),Ma(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Qe(),p=dn(o);p.tag=1,p.payload=n,a!=null&&(p.callback=a),n=fn(e,p,o),n!==null&&(ze(n,e,o),Ma(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Qe(),o=dn(a);o.tag=2,n!=null&&(o.callback=n),n=fn(e,o,a),n!==null&&(ze(n,e,a),Ma(n,e,a))}};function Vf(e,n,a,o,p,m,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,v):n.prototype&&n.prototype.isPureReactComponent?!Aa(a,o)||!Aa(p,m):!0}function Xf(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Hc.enqueueReplaceState(n,n.state,null)}function Wn(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var p in e)a[p]===void 0&&(a[p]=e[p])}return a}function Yf(e){Gr(e)}function $f(e){console.error(e)}function Kf(e){Gr(e)}function dl(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Qf(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Ic(e,n,a){return a=dn(a),a.tag=3,a.payload={element:null},a.callback=function(){dl(e,n)},a}function Wf(e){return e=dn(e),e.tag=3,e}function Zf(e,n,a,o){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var m=o.value;e.payload=function(){return p(m)},e.callback=function(){Qf(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Qf(n,a,o),typeof p!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var _=o.stack;this.componentDidCatch(o.value,{componentStack:_!==null?_:""})})}function Yy(e,n,a,o,p){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&xs(n,a,p,!0),a=Xe.current,a!==null){switch(a.tag){case 31:case 13:return ri===null?_l():a.alternate===null&&Jt===0&&(Jt=3),a.flags&=-257,a.flags|=65536,a.lanes=p,o===Jr?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),du(e,o,p)),!1;case 22:return a.flags|=65536,o===Jr?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),du(e,o,p)),!1}throw Error(s(435,a.tag))}return du(e,o,p),_l(),!1}if(Tt)return n=Xe.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,o!==rc&&(e=Error(s(422),{cause:o}),Ea(ii(e,a)))):(o!==rc&&(n=Error(s(423),{cause:o}),Ea(ii(n,a))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,o=ii(o,a),p=Ic(e.stateNode,o,p),yc(e,p),Jt!==4&&(Jt=2)),!1;var m=Error(s(520),{cause:o});if(m=ii(m,a),ja===null?ja=[m]:ja.push(m),Jt!==4&&(Jt=2),n===null)return!0;o=ii(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=p&-p,a.lanes|=e,e=Ic(a.stateNode,o,e),yc(a,e),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(vn===null||!vn.has(m))))return a.flags|=65536,p&=-p,a.lanes|=p,p=Wf(p),Zf(p,e,a,o),yc(a,p),!1}a=a.return}while(a!==null);return!1}var jc=Error(s(461)),le=!1;function ve(e,n,a,o){n.child=e===null?ef(n,null,a,o):Kn(n,e.child,a,o)}function Jf(e,n,a,o,p){a=a.render;var m=n.ref;if("ref"in o){var v={};for(var _ in o)_!=="ref"&&(v[_]=o[_])}else v=o;return Vn(n),o=Ec(e,n,a,v,m,p),_=_c(),e!==null&&!le?(xc(e,n,p),Hi(e,n,p)):(Tt&&_&&sc(n),n.flags|=1,ve(e,n,o,p),n.child)}function tp(e,n,a,o,p){if(e===null){var m=a.type;return typeof m=="function"&&!ec(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,ep(e,n,m,o,p)):(e=Yr(a.type,null,o,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!Qc(e,p)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Aa,a(v,o)&&e.ref===n.ref)return Hi(e,n,p)}return n.flags|=1,e=ki(m,o),e.ref=n.ref,e.return=n,n.child=e}function ep(e,n,a,o,p){if(e!==null){var m=e.memoizedProps;if(Aa(m,o)&&e.ref===n.ref)if(le=!1,n.pendingProps=o=m,Qc(e,p))(e.flags&131072)!==0&&(le=!0);else return n.lanes=e.lanes,Hi(e,n,p)}return Gc(e,n,a,o,p)}function ip(e,n,a,o){var p=o.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(o=n.child=e.child,p=0;o!==null;)p=p|o.lanes|o.childLanes,o=o.sibling;o=p&~m}else o=0,n.child=null;return np(e,n,m,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wr(n,m!==null?m.cachePool:null),m!==null?af(n,m):vc(),rf(n);else return o=n.lanes=536870912,np(e,n,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(Wr(n,m.cachePool),af(n,m),gn(),n.memoizedState=null):(e!==null&&Wr(n,null),vc(),gn());return ve(e,n,p,a),n.child}function Ba(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function np(e,n,a,o,p){var m=fc();return m=m===null?null:{parent:ae._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},e!==null&&Wr(n,null),vc(),rf(n),e!==null&&xs(e,n,o,!0),n.childLanes=p,null}function fl(e,n){return n=gl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function sp(e,n,a){return Kn(n,e.child,null,a),e=fl(n,n.pendingProps),e.flags|=2,Ye(n),n.memoizedState=null,e}function $y(e,n,a){var o=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Tt){if(o.mode==="hidden")return e=fl(n,o),n.lanes=536870912,Ba(null,e);if(Sc(n),(e=qt)?(e=mg(e,ai),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ln!==null?{id:yi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=Hd(e),a.return=n,n.child=a,ye=n,qt=null)):e=null,e===null)throw cn(n);return n.lanes=536870912,null}return fl(n,o)}var m=e.memoizedState;if(m!==null){var v=m.dehydrated;if(Sc(n),p)if(n.flags&256)n.flags&=-257,n=sp(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(le||xs(e,n,a,!1),p=(a&e.childLanes)!==0,le||p){if(o=jt,o!==null&&(v=Yh(o,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,In(e,v),ze(o,e,v),jc;_l(),n=sp(e,n,a)}else e=m.treeContext,qt=li(v.nextSibling),ye=n,Tt=!0,on=null,ai=!1,e!==null&&Gd(n,e),n=fl(n,o),n.flags|=4096;return n}return e=ki(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function pl(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Gc(e,n,a,o,p){return Vn(n),a=Ec(e,n,a,o,void 0,p),o=_c(),e!==null&&!le?(xc(e,n,p),Hi(e,n,p)):(Tt&&o&&sc(n),n.flags|=1,ve(e,n,a,p),n.child)}function ap(e,n,a,o,p,m){return Vn(n),n.updateQueue=null,a=of(n,o,a,p),lf(e),o=_c(),e!==null&&!le?(xc(e,n,m),Hi(e,n,m)):(Tt&&o&&sc(n),n.flags|=1,ve(e,n,a,m),n.child)}function rp(e,n,a,o,p){if(Vn(n),n.stateNode===null){var m=Ss,v=a.contextType;typeof v=="object"&&v!==null&&(m=be(v)),m=new a(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Hc,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},gc(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?be(v):Ss,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Uc(n,a,v,o),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Hc.enqueueReplaceState(m,m.state,null),Da(n,o,m,p),Ra(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){m=n.stateNode;var _=n.memoizedProps,M=Wn(a,_);m.props=M;var F=m.context,q=a.contextType;v=Ss,typeof q=="object"&&q!==null&&(v=be(q));var $=a.getDerivedStateFromProps;q=typeof $=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||F!==v)&&Xf(n,m,o,v),hn=!1;var H=n.memoizedState;m.state=H,Da(n,o,m,p),Ra(),F=n.memoizedState,_||H!==F||hn?(typeof $=="function"&&(Uc(n,a,$,o),F=n.memoizedState),(M=hn||Vf(n,a,M,o,H,F,v))?(q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=F),m.props=o,m.state=F,m.context=v,o=M):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,mc(e,n),v=n.memoizedProps,q=Wn(a,v),m.props=q,$=n.pendingProps,H=m.context,F=a.contextType,M=Ss,typeof F=="object"&&F!==null&&(M=be(F)),_=a.getDerivedStateFromProps,(F=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==$||H!==M)&&Xf(n,m,o,M),hn=!1,H=n.memoizedState,m.state=H,Da(n,o,m,p),Ra();var I=n.memoizedState;v!==$||H!==I||hn||e!==null&&e.dependencies!==null&&Kr(e.dependencies)?(typeof _=="function"&&(Uc(n,a,_,o),I=n.memoizedState),(q=hn||Vf(n,a,q,o,H,I,M)||e!==null&&e.dependencies!==null&&Kr(e.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,I,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,I,M)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=I),m.props=o,m.state=I,m.context=M,o=q):(typeof m.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),o=!1)}return m=o,pl(e,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&o?(n.child=Kn(n,e.child,null,p),n.child=Kn(n,null,a,p)):ve(e,n,a,p),n.memoizedState=m.state,e=n.child):e=Hi(e,n,p),e}function lp(e,n,a,o){return Gn(),n.flags|=256,ve(e,n,a,o),n.child}var qc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vc(e){return{baseLanes:e,cachePool:Kd()}}function Xc(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Ke),e}function op(e,n,a){var o=n.pendingProps,p=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=e!==null&&e.memoizedState===null?!1:(ie.current&2)!==0),v&&(p=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Tt){if(p?pn(n):gn(),(e=qt)?(e=mg(e,ai),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ln!==null?{id:yi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},a=Hd(e),a.return=n,n.child=a,ye=n,qt=null)):e=null,e===null)throw cn(n);return Mu(e)?n.lanes=32:n.lanes=536870912,null}var _=o.children;return o=o.fallback,p?(gn(),p=n.mode,_=gl({mode:"hidden",children:_},p),o=jn(o,p,a,null),_.return=n,o.return=n,_.sibling=o,n.child=_,o=n.child,o.memoizedState=Vc(a),o.childLanes=Xc(e,v,a),n.memoizedState=qc,Ba(null,o)):(pn(n),Yc(n,_))}var M=e.memoizedState;if(M!==null&&(_=M.dehydrated,_!==null)){if(m)n.flags&256?(pn(n),n.flags&=-257,n=$c(e,n,a)):n.memoizedState!==null?(gn(),n.child=e.child,n.flags|=128,n=null):(gn(),_=o.fallback,p=n.mode,o=gl({mode:"visible",children:o.children},p),_=jn(_,p,a,null),_.flags|=2,o.return=n,_.return=n,o.sibling=_,n.child=o,Kn(n,e.child,null,a),o=n.child,o.memoizedState=Vc(a),o.childLanes=Xc(e,v,a),n.memoizedState=qc,n=Ba(null,o));else if(pn(n),Mu(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var F=v.dgst;v=F,o=Error(s(419)),o.stack="",o.digest=v,Ea({value:o,source:null,stack:null}),n=$c(e,n,a)}else if(le||xs(e,n,a,!1),v=(a&e.childLanes)!==0,le||v){if(v=jt,v!==null&&(o=Yh(v,a),o!==0&&o!==M.retryLane))throw M.retryLane=o,In(e,o),ze(v,e,o),jc;Tu(_)||_l(),n=$c(e,n,a)}else Tu(_)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,qt=li(_.nextSibling),ye=n,Tt=!0,on=null,ai=!1,e!==null&&Gd(n,e),n=Yc(n,o.children),n.flags|=4096);return n}return p?(gn(),_=o.fallback,p=n.mode,M=e.child,F=M.sibling,o=ki(M,{mode:"hidden",children:o.children}),o.subtreeFlags=M.subtreeFlags&65011712,F!==null?_=ki(F,_):(_=jn(_,p,a,null),_.flags|=2),_.return=n,o.return=n,o.sibling=_,n.child=o,Ba(null,o),o=n.child,_=e.child.memoizedState,_===null?_=Vc(a):(p=_.cachePool,p!==null?(M=ae._currentValue,p=p.parent!==M?{parent:M,pool:M}:p):p=Kd(),_={baseLanes:_.baseLanes|a,cachePool:p}),o.memoizedState=_,o.childLanes=Xc(e,v,a),n.memoizedState=qc,Ba(e.child,o)):(pn(n),a=e.child,e=a.sibling,a=ki(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Yc(e,n){return n=gl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function gl(e,n){return e=Ve(22,e,null,n),e.lanes=0,e}function $c(e,n,a){return Kn(n,e.child,null,a),e=Yc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function cp(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),cc(e.return,n,a)}function Kc(e,n,a,o,p,m){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:p,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=p,v.treeForkCount=m)}function up(e,n,a){var o=n.pendingProps,p=o.revealOrder,m=o.tail;o=o.children;var v=ie.current,_=(v&2)!==0;if(_?(v=v&1|2,n.flags|=128):v&=1,Q(ie,v),ve(e,n,o,a),o=Tt?wa:0,!_&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cp(e,a,n);else if(e.tag===19)cp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(a=n.child,p=null;a!==null;)e=a.alternate,e!==null&&nl(e)===null&&(p=a),a=a.sibling;a=p,a===null?(p=n.child,n.child=null):(p=a.sibling,a.sibling=null),Kc(n,!1,p,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&nl(e)===null){n.child=p;break}e=p.sibling,p.sibling=a,a=p,p=e}Kc(n,!0,a,null,m,o);break;case"together":Kc(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Hi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),bn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(xs(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=ki(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=ki(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Qc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Kr(e)))}function Ky(e,n,a){switch(n.tag){case 3:ee(n,n.stateNode.containerInfo),un(n,ae,e.memoizedState.cache),Gn();break;case 27:case 5:kn(n);break;case 4:ee(n,n.stateNode.containerInfo);break;case 10:un(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Sc(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(pn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?op(e,n,a):(pn(n),e=Hi(e,n,a),e!==null?e.sibling:null);pn(n);break;case 19:var p=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(xs(e,n,a,!1),o=(a&n.childLanes)!==0),p){if(o)return up(e,n,a);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Q(ie,ie.current),o)break;return null;case 22:return n.lanes=0,ip(e,n,a,n.pendingProps);case 24:un(n,ae,e.memoizedState.cache)}return Hi(e,n,a)}function hp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)le=!0;else{if(!Qc(e,a)&&(n.flags&128)===0)return le=!1,Ky(e,n,a);le=(e.flags&131072)!==0}else le=!1,Tt&&(n.flags&1048576)!==0&&jd(n,wa,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=Yn(n.elementType),n.type=e,typeof e=="function")ec(e)?(o=Wn(e,o),n.tag=1,n=rp(null,n,e,o,a)):(n.tag=0,n=Gc(null,n,e,o,a));else{if(e!=null){var p=e.$$typeof;if(p===L){n.tag=11,n=Jf(null,n,e,o,a);break t}else if(p===P){n.tag=14,n=tp(null,n,e,o,a);break t}}throw n=vt(e)||e,Error(s(306,n,""))}}return n;case 0:return Gc(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,p=Wn(o,n.pendingProps),rp(e,n,o,p,a);case 3:t:{if(ee(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var m=n.memoizedState;p=m.element,mc(e,n),Da(n,o,null,a);var v=n.memoizedState;if(o=v.cache,un(n,ae,o),o!==m.cache&&uc(n,[ae],a,!0),Ra(),o=v.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=lp(e,n,o,a);break t}else if(o!==p){p=ii(Error(s(424)),n),Ea(p),n=lp(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qt=li(e.firstChild),ye=n,Tt=!0,on=null,ai=!0,a=ef(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gn(),o===p){n=Hi(e,n,a);break t}ve(e,n,o,a)}n=n.child}return n;case 26:return pl(e,n),e===null?(a=wg(n.type,null,n.pendingProps,null))?n.memoizedState=a:Tt||(a=n.type,e=n.pendingProps,o=Nl(ut.current).createElement(a),o[me]=n,o[Ne]=e,Ae(o,a,e),de(o),n.stateNode=o):n.memoizedState=wg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return kn(n),e===null&&Tt&&(o=n.stateNode=vg(n.type,n.pendingProps,ut.current),ye=n,ai=!0,p=qt,En(n.type)?(Ru=p,qt=li(o.firstChild)):qt=p),ve(e,n,n.pendingProps.children,a),pl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Tt&&((p=o=qt)&&(o=xb(o,n.type,n.pendingProps,ai),o!==null?(n.stateNode=o,ye=n,qt=li(o.firstChild),ai=!1,p=!0):p=!1),p||cn(n)),kn(n),p=n.type,m=n.pendingProps,v=e!==null?e.memoizedProps:null,o=m.children,_u(p,m)?o=null:v!==null&&_u(p,v)&&(n.flags|=32),n.memoizedState!==null&&(p=Ec(e,n,Hy,null,null,a),Qa._currentValue=p),pl(e,n),ve(e,n,o,a),n.child;case 6:return e===null&&Tt&&((e=a=qt)&&(a=Cb(a,n.pendingProps,ai),a!==null?(n.stateNode=a,ye=n,qt=null,e=!0):e=!1),e||cn(n)),null;case 13:return op(e,n,a);case 4:return ee(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Kn(n,null,o,a):ve(e,n,o,a),n.child;case 11:return Jf(e,n,n.type,n.pendingProps,a);case 7:return ve(e,n,n.pendingProps,a),n.child;case 8:return ve(e,n,n.pendingProps.children,a),n.child;case 12:return ve(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,un(n,n.type,o.value),ve(e,n,o.children,a),n.child;case 9:return p=n.type._context,o=n.pendingProps.children,Vn(n),p=be(p),o=o(p),n.flags|=1,ve(e,n,o,a),n.child;case 14:return tp(e,n,n.type,n.pendingProps,a);case 15:return ep(e,n,n.type,n.pendingProps,a);case 19:return up(e,n,a);case 31:return $y(e,n,a);case 22:return ip(e,n,a,n.pendingProps);case 24:return Vn(n),o=be(ae),e===null?(p=fc(),p===null&&(p=jt,m=hc(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=a),p=m),n.memoizedState={parent:o,cache:p},gc(n),un(n,ae,p)):((e.lanes&a)!==0&&(mc(e,n),Da(n,null,null,a),Ra()),p=e.memoizedState,m=n.memoizedState,p.parent!==o?(p={parent:o,cache:o},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),un(n,ae,o)):(o=m.cache,un(n,ae,o),o!==p.cache&&uc(n,[ae],a,!0))),ve(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Ii(e){e.flags|=4}function Wc(e,n,a,o,p){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(Fp())e.flags|=8192;else throw $n=Jr,pc}else e.flags&=-16777217}function dp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tg(n))if(Fp())e.flags|=8192;else throw $n=Jr,pc}function ml(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?qh():536870912,e.lanes|=n,zs|=n)}function Pa(e,n){if(!Tt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Vt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var p=e.child;p!==null;)a|=p.lanes|p.childLanes,o|=p.subtreeFlags&65011712,o|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)a|=p.lanes|p.childLanes,o|=p.subtreeFlags,o|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function Qy(e,n,a){var o=n.pendingProps;switch(ac(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(n),null;case 1:return Vt(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),zi(ae),It(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(_s(n)?Ii(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,lc())),Vt(n),null;case 26:var p=n.type,m=n.memoizedState;return e===null?(Ii(n),m!==null?(Vt(n),dp(n,m)):(Vt(n),Wc(n,p,null,o,a))):m?m!==e.memoizedState?(Ii(n),Vt(n),dp(n,m)):(Vt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Ii(n),Vt(n),Wc(n,p,e,o,a)),null;case 27:if(nn(n),a=ut.current,p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Ii(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Vt(n),null}e=tt.current,_s(n)?qd(n):(e=vg(p,o,a),n.stateNode=e,Ii(n))}return Vt(n),null;case 5:if(nn(n),p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Ii(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Vt(n),null}if(m=tt.current,_s(n))qd(n);else{var v=Nl(ut.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?v.createElement(p,{is:o.is}):v.createElement(p)}}m[me]=n,m[Ne]=o;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;t:switch(Ae(m,p,o),p){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Ii(n)}}return Vt(n),Wc(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Ii(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=ut.current,_s(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,p=ye,p!==null)switch(p.tag){case 27:case 5:o=p.memoizedProps}e[me]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||og(e.nodeValue,a)),e||cn(n,!0)}else e=Nl(e).createTextNode(o),e[me]=n,n.stateNode=e}return Vt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=_s(n),a!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[me]=n}else Gn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Vt(n),e=!1}else a=lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ye(n),n):(Ye(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Vt(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=_s(n),o!==null&&o.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[me]=n}else Gn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Vt(n),p=!1}else p=lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(Ye(n),n):(Ye(n),null)}return Ye(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,p=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(p=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==p&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),ml(n,n.updateQueue),Vt(n),null);case 4:return It(),e===null&&vu(n.stateNode.containerInfo),Vt(n),null;case 10:return zi(n.type),Vt(n),null;case 19:if(G(ie),o=n.memoizedState,o===null)return Vt(n),null;if(p=(n.flags&128)!==0,m=o.rendering,m===null)if(p)Pa(o,!1);else{if(Jt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=nl(e),m!==null){for(n.flags|=128,Pa(o,!1),e=m.updateQueue,n.updateQueue=e,ml(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Ud(a,e),a=a.sibling;return Q(ie,ie.current&1|2),Tt&&Bi(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&Ie()>Sl&&(n.flags|=128,p=!0,Pa(o,!1),n.lanes=4194304)}else{if(!p)if(e=nl(m),e!==null){if(n.flags|=128,p=!0,e=e.updateQueue,n.updateQueue=e,ml(n,e),Pa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!Tt)return Vt(n),null}else 2*Ie()-o.renderingStartTime>Sl&&a!==536870912&&(n.flags|=128,p=!0,Pa(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(e=o.last,e!==null?e.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ie(),e.sibling=null,a=ie.current,Q(ie,p?a&1|2:a&1),Tt&&Bi(n,o.treeForkCount),e):(Vt(n),null);case 22:case 23:return Ye(n),Ac(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(Vt(n),n.subtreeFlags&6&&(n.flags|=8192)):Vt(n),a=n.updateQueue,a!==null&&ml(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&G(Xn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),zi(ae),Vt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function Wy(e,n){switch(ac(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return zi(ae),It(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return nn(n),null;case 31:if(n.memoizedState!==null){if(Ye(n),n.alternate===null)throw Error(s(340));Gn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ye(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Gn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return G(ie),null;case 4:return It(),null;case 10:return zi(n.type),null;case 22:case 23:return Ye(n),Ac(),e!==null&&G(Xn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return zi(ae),null;case 25:return null;default:return null}}function fp(e,n){switch(ac(n),n.tag){case 3:zi(ae),It();break;case 26:case 27:case 5:nn(n);break;case 4:It();break;case 31:n.memoizedState!==null&&Ye(n);break;case 13:Ye(n);break;case 19:G(ie);break;case 10:zi(n.type);break;case 22:case 23:Ye(n),Ac(),e!==null&&G(Xn);break;case 24:zi(ae)}}function za(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var p=o.next;a=p;do{if((a.tag&e)===e){o=void 0;var m=a.create,v=a.inst;o=m(),v.destroy=o}a=a.next}while(a!==p)}}catch(_){Pt(n,n.return,_)}}function mn(e,n,a){try{var o=n.updateQueue,p=o!==null?o.lastEffect:null;if(p!==null){var m=p.next;o=m;do{if((o.tag&e)===e){var v=o.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,p=n;var M=a,F=_;try{F()}catch(q){Pt(p,M,q)}}}o=o.next}while(o!==m)}}catch(q){Pt(n,n.return,q)}}function pp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{sf(n,a)}catch(o){Pt(e,e.return,o)}}}function gp(e,n,a){a.props=Wn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Pt(e,n,o)}}function Fa(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(p){Pt(e,n,p)}}function vi(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(p){Pt(e,n,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){Pt(e,n,p)}else a.current=null}function mp(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(p){Pt(e,e.return,p)}}function Zc(e,n,a){try{var o=e.stateNode;vb(o,e.type,a,n),o[Ne]=n}catch(p){Pt(e,e.return,p)}}function yp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&En(e.type)||e.tag===4}function Jc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||yp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&En(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Li));else if(o!==4&&(o===27&&En(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(tu(e,n,a),e=e.sibling;e!==null;)tu(e,n,a),e=e.sibling}function yl(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&En(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(yl(e,n,a),e=e.sibling;e!==null;)yl(e,n,a),e=e.sibling}function bp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Ae(n,o,a),n[me]=e,n[Ne]=a}catch(m){Pt(e,e.return,m)}}var ji=!1,oe=!1,eu=!1,vp=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Zy(e,n){if(e=e.containerInfo,wu=Fl,e=Dd(e),$o(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var p=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var v=0,_=-1,M=-1,F=0,q=0,$=e,H=null;e:for(;;){for(var I;$!==a||p!==0&&$.nodeType!==3||(_=v+p),$!==m||o!==0&&$.nodeType!==3||(M=v+o),$.nodeType===3&&(v+=$.nodeValue.length),(I=$.firstChild)!==null;)H=$,$=I;for(;;){if($===e)break e;if(H===a&&++F===p&&(_=v),H===m&&++q===o&&(M=v),(I=$.nextSibling)!==null)break;$=H,H=$.parentNode}$=I}a=_===-1||M===-1?null:{start:_,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Eu={focusedElem:e,selectionRange:a},Fl=!1,fe=n;fe!==null;)if(n=fe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,fe=e;else for(;fe!==null;){switch(n=fe,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)p=e[a],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=n,p=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var it=Wn(a.type,p);e=o.getSnapshotBeforeUpdate(it,m),o.__reactInternalSnapshotBeforeUpdate=e}catch(ct){Pt(a,a.return,ct)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Cu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Cu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,fe=e;break}fe=n.return}}function Ap(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:qi(e,a),o&4&&za(5,a);break;case 1:if(qi(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Pt(a,a.return,v)}else{var p=Wn(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(p,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Pt(a,a.return,v)}}o&64&&pp(a),o&512&&Fa(a,a.return);break;case 3:if(qi(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{sf(e,n)}catch(v){Pt(a,a.return,v)}}break;case 27:n===null&&o&4&&bp(a);case 26:case 5:qi(e,a),n===null&&o&4&&mp(a),o&512&&Fa(a,a.return);break;case 12:qi(e,a);break;case 31:qi(e,a),o&4&&Ep(e,a);break;case 13:qi(e,a),o&4&&_p(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=lb.bind(null,a),Tb(e,a))));break;case 22:if(o=a.memoizedState!==null||ji,!o){n=n!==null&&n.memoizedState!==null||oe,p=ji;var m=oe;ji=o,(oe=n)&&!m?Vi(e,a,(a.subtreeFlags&8772)!==0):qi(e,a),ji=p,oe=m}break;case 30:break;default:qi(e,a)}}function Sp(e){var n=e.alternate;n!==null&&(e.alternate=null,Sp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&No(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xt=null,Oe=!1;function Gi(e,n,a){for(a=a.child;a!==null;)wp(e,n,a),a=a.sibling}function wp(e,n,a){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(oa,a)}catch{}switch(a.tag){case 26:oe||vi(a,n),Gi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:oe||vi(a,n);var o=Xt,p=Oe;En(a.type)&&(Xt=a.stateNode,Oe=!1),Gi(e,n,a),Ya(a.stateNode),Xt=o,Oe=p;break;case 5:oe||vi(a,n);case 6:if(o=Xt,p=Oe,Xt=null,Gi(e,n,a),Xt=o,Oe=p,Xt!==null)if(Oe)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(a.stateNode)}catch(m){Pt(a,n,m)}else try{Xt.removeChild(a.stateNode)}catch(m){Pt(a,n,m)}break;case 18:Xt!==null&&(Oe?(e=Xt,pg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Vs(e)):pg(Xt,a.stateNode));break;case 4:o=Xt,p=Oe,Xt=a.stateNode.containerInfo,Oe=!0,Gi(e,n,a),Xt=o,Oe=p;break;case 0:case 11:case 14:case 15:mn(2,a,n),oe||mn(4,a,n),Gi(e,n,a);break;case 1:oe||(vi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&gp(a,n,o)),Gi(e,n,a);break;case 21:Gi(e,n,a);break;case 22:oe=(o=oe)||a.memoizedState!==null,Gi(e,n,a),oe=o;break;default:Gi(e,n,a)}}function Ep(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vs(e)}catch(a){Pt(n,n.return,a)}}}function _p(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vs(e)}catch(a){Pt(n,n.return,a)}}function Jy(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new vp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new vp),n;default:throw Error(s(435,e.tag))}}function bl(e,n){var a=Jy(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var p=ob.bind(null,e,o);o.then(p,p)}})}function ke(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var p=a[o],m=e,v=n,_=v;t:for(;_!==null;){switch(_.tag){case 27:if(En(_.type)){Xt=_.stateNode,Oe=!1;break t}break;case 5:Xt=_.stateNode,Oe=!1;break t;case 3:case 4:Xt=_.stateNode.containerInfo,Oe=!0;break t}_=_.return}if(Xt===null)throw Error(s(160));wp(m,v,p),Xt=null,Oe=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)xp(n,e),n=n.sibling}var pi=null;function xp(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ke(n,e),Be(e),o&4&&(mn(3,e,e.return),za(3,e),mn(5,e,e.return));break;case 1:ke(n,e),Be(e),o&512&&(oe||a===null||vi(a,a.return)),o&64&&ji&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var p=pi;if(ke(n,e),Be(e),o&512&&(oe||a===null||vi(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,p=p.ownerDocument||p;e:switch(o){case"title":m=p.getElementsByTagName("title")[0],(!m||m[ha]||m[me]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(o),p.head.insertBefore(m,p.querySelector("head > title"))),Ae(m,o,a),m[me]=e,de(m),o=m;break t;case"link":var v=xg("link","href",p).get(o+(a.href||""));if(v){for(var _=0;_<v.length;_++)if(m=v[_],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(_,1);break e}}m=p.createElement(o),Ae(m,o,a),p.head.appendChild(m);break;case"meta":if(v=xg("meta","content",p).get(o+(a.content||""))){for(_=0;_<v.length;_++)if(m=v[_],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(_,1);break e}}m=p.createElement(o),Ae(m,o,a),p.head.appendChild(m);break;default:throw Error(s(468,o))}m[me]=e,de(m),o=m}e.stateNode=o}else Cg(p,e.type,e.stateNode);else e.stateNode=_g(p,o,e.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?Cg(p,e.type,e.stateNode):_g(p,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Zc(e,e.memoizedProps,a.memoizedProps)}break;case 27:ke(n,e),Be(e),o&512&&(oe||a===null||vi(a,a.return)),a!==null&&o&4&&Zc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ke(n,e),Be(e),o&512&&(oe||a===null||vi(a,a.return)),e.flags&32){p=e.stateNode;try{ps(p,"")}catch(it){Pt(e,e.return,it)}}o&4&&e.stateNode!=null&&(p=e.memoizedProps,Zc(e,p,a!==null?a.memoizedProps:p)),o&1024&&(eu=!0);break;case 6:if(ke(n,e),Be(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(it){Pt(e,e.return,it)}}break;case 3:if(kl=null,p=pi,pi=Ll(n.containerInfo),ke(n,e),pi=p,Be(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Vs(n.containerInfo)}catch(it){Pt(e,e.return,it)}eu&&(eu=!1,Cp(e));break;case 4:o=pi,pi=Ll(e.stateNode.containerInfo),ke(n,e),Be(e),pi=o;break;case 12:ke(n,e),Be(e);break;case 31:ke(n,e),Be(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,bl(e,o)));break;case 13:ke(n,e),Be(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Al=Ie()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,bl(e,o)));break;case 22:p=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,F=ji,q=oe;if(ji=F||p,oe=q||M,ke(n,e),oe=q,ji=F,Be(e),o&8192)t:for(n=e.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(a===null||M||ji||oe||Zn(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){M=a=n;try{if(m=M.stateNode,p)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=M.stateNode;var $=M.memoizedProps.style,H=$!=null&&$.hasOwnProperty("display")?$.display:null;_.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(it){Pt(M,M.return,it)}}}else if(n.tag===6){if(a===null){M=n;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch(it){Pt(M,M.return,it)}}}else if(n.tag===18){if(a===null){M=n;try{var I=M.stateNode;p?gg(I,!0):gg(M.stateNode,!1)}catch(it){Pt(M,M.return,it)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,bl(e,a))));break;case 19:ke(n,e),Be(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,bl(e,o)));break;case 30:break;case 21:break;default:ke(n,e),Be(e)}}function Be(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(yp(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var p=a.stateNode,m=Jc(e);yl(e,m,p);break;case 5:var v=a.stateNode;a.flags&32&&(ps(v,""),a.flags&=-33);var _=Jc(e);yl(e,_,v);break;case 3:case 4:var M=a.stateNode.containerInfo,F=Jc(e);tu(e,F,M);break;default:throw Error(s(161))}}catch(q){Pt(e,e.return,q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Cp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Cp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function qi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ap(e,n.alternate,n),n=n.sibling}function Zn(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:mn(4,n,n.return),Zn(n);break;case 1:vi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&gp(n,n.return,a),Zn(n);break;case 27:Ya(n.stateNode);case 26:case 5:vi(n,n.return),Zn(n);break;case 22:n.memoizedState===null&&Zn(n);break;case 30:Zn(n);break;default:Zn(n)}e=e.sibling}}function Vi(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,p=e,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:Vi(p,m,a),za(4,m);break;case 1:if(Vi(p,m,a),o=m,p=o.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(F){Pt(o,o.return,F)}if(o=m,p=o.updateQueue,p!==null){var _=o.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)nf(M[p],_)}catch(F){Pt(o,o.return,F)}}a&&v&64&&pp(m),Fa(m,m.return);break;case 27:bp(m);case 26:case 5:Vi(p,m,a),a&&o===null&&v&4&&mp(m),Fa(m,m.return);break;case 12:Vi(p,m,a);break;case 31:Vi(p,m,a),a&&v&4&&Ep(p,m);break;case 13:Vi(p,m,a),a&&v&4&&_p(p,m);break;case 22:m.memoizedState===null&&Vi(p,m,a),Fa(m,m.return);break;case 30:break;default:Vi(p,m,a)}n=n.sibling}}function iu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&_a(a))}function nu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&_a(e))}function gi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Tp(e,n,a,o),n=n.sibling}function Tp(e,n,a,o){var p=n.flags;switch(n.tag){case 0:case 11:case 15:gi(e,n,a,o),p&2048&&za(9,n);break;case 1:gi(e,n,a,o);break;case 3:gi(e,n,a,o),p&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&_a(e)));break;case 12:if(p&2048){gi(e,n,a,o),e=n.stateNode;try{var m=n.memoizedProps,v=m.id,_=m.onPostCommit;typeof _=="function"&&_(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Pt(n,n.return,M)}}else gi(e,n,a,o);break;case 31:gi(e,n,a,o);break;case 13:gi(e,n,a,o);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?gi(e,n,a,o):Ua(e,n):m._visibility&2?gi(e,n,a,o):(m._visibility|=2,ks(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),p&2048&&iu(v,n);break;case 24:gi(e,n,a,o),p&2048&&nu(n.alternate,n);break;default:gi(e,n,a,o)}}function ks(e,n,a,o,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,v=n,_=a,M=o,F=v.flags;switch(v.tag){case 0:case 11:case 15:ks(m,v,_,M,p),za(8,v);break;case 23:break;case 22:var q=v.stateNode;v.memoizedState!==null?q._visibility&2?ks(m,v,_,M,p):Ua(m,v):(q._visibility|=2,ks(m,v,_,M,p)),p&&F&2048&&iu(v.alternate,v);break;case 24:ks(m,v,_,M,p),p&&F&2048&&nu(v.alternate,v);break;default:ks(m,v,_,M,p)}n=n.sibling}}function Ua(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,p=o.flags;switch(o.tag){case 22:Ua(a,o),p&2048&&iu(o.alternate,o);break;case 24:Ua(a,o),p&2048&&nu(o.alternate,o);break;default:Ua(a,o)}n=n.sibling}}var Ha=8192;function Bs(e,n,a){if(e.subtreeFlags&Ha)for(e=e.child;e!==null;)Mp(e,n,a),e=e.sibling}function Mp(e,n,a){switch(e.tag){case 26:Bs(e,n,a),e.flags&Ha&&e.memoizedState!==null&&Ub(a,pi,e.memoizedState,e.memoizedProps);break;case 5:Bs(e,n,a);break;case 3:case 4:var o=pi;pi=Ll(e.stateNode.containerInfo),Bs(e,n,a),pi=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Ha,Ha=16777216,Bs(e,n,a),Ha=o):Bs(e,n,a));break;default:Bs(e,n,a)}}function Rp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ia(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];fe=o,Np(o,e)}Rp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Dp(e),e=e.sibling}function Dp(e){switch(e.tag){case 0:case 11:case 15:Ia(e),e.flags&2048&&mn(9,e,e.return);break;case 3:Ia(e);break;case 12:Ia(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,vl(e)):Ia(e);break;default:Ia(e)}}function vl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];fe=o,Np(o,e)}Rp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:mn(8,n,n.return),vl(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,vl(n));break;default:vl(n)}e=e.sibling}}function Np(e,n){for(;fe!==null;){var a=fe;switch(a.tag){case 0:case 11:case 15:mn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:_a(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,fe=o;else t:for(a=e;fe!==null;){o=fe;var p=o.sibling,m=o.return;if(Sp(o),o===a){fe=null;break t}if(p!==null){p.return=m,fe=p;break t}fe=m}}}var tb={getCacheForType:function(e){var n=be(ae),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return be(ae).controller.signal}},eb=typeof WeakMap=="function"?WeakMap:Map,Lt=0,jt=null,Et=null,xt=0,Bt=0,$e=null,yn=!1,Ps=!1,su=!1,Xi=0,Jt=0,bn=0,Jn=0,au=0,Ke=0,zs=0,ja=null,Pe=null,ru=!1,Al=0,Lp=0,Sl=1/0,wl=null,vn=null,he=0,An=null,Fs=null,Yi=0,lu=0,ou=null,Op=null,Ga=0,cu=null;function Qe(){return(Lt&2)!==0&&xt!==0?xt&-xt:B.T!==null?gu():$h()}function kp(){if(Ke===0)if((xt&536870912)===0||Tt){var e=Dr;Dr<<=1,(Dr&3932160)===0&&(Dr=262144),Ke=e}else Ke=536870912;return e=Xe.current,e!==null&&(e.flags|=32),Ke}function ze(e,n,a){(e===jt&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)&&(Us(e,0),Sn(e,xt,Ke,!1)),ua(e,a),((Lt&2)===0||e!==jt)&&(e===jt&&((Lt&2)===0&&(Jn|=a),Jt===4&&Sn(e,xt,Ke,!1)),Ai(e))}function Bp(e,n,a){if((Lt&6)!==0)throw Error(s(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ca(e,n),p=o?sb(e,n):hu(e,n,!0),m=o;do{if(p===0){Ps&&!o&&Sn(e,n,0,!1);break}else{if(a=e.current.alternate,m&&!ib(a)){p=hu(e,n,!1),m=!1;continue}if(p===2){if(m=n,e.errorRecoveryDisabledLanes&m)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var _=e;p=ja;var M=_.current.memoizedState.isDehydrated;if(M&&(Us(_,v).flags|=256),v=hu(_,v,!1),v!==2){if(su&&!M){_.errorRecoveryDisabledLanes|=m,Jn|=m,p=4;break t}m=Pe,Pe=p,m!==null&&(Pe===null?Pe=m:Pe.push.apply(Pe,m))}p=v}if(m=!1,p!==2)continue}}if(p===1){Us(e,0),Sn(e,n,0,!0);break}t:{switch(o=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Sn(o,n,Ke,!yn);break t;case 2:Pe=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(p=Al+300-Ie(),10<p)){if(Sn(o,n,Ke,!yn),Lr(o,0,!0)!==0)break t;Yi=n,o.timeoutHandle=dg(Pp.bind(null,o,a,Pe,wl,ru,n,Ke,Jn,zs,yn,m,"Throttled",-0,0),p);break t}Pp(o,a,Pe,wl,ru,n,Ke,Jn,zs,yn,m,null,-0,0)}}break}while(!0);Ai(e)}function Pp(e,n,a,o,p,m,v,_,M,F,q,$,H,I){if(e.timeoutHandle=-1,$=n.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Li},Mp(n,m,$);var it=(m&62914560)===m?Al-Ie():(m&4194048)===m?Lp-Ie():0;if(it=Hb($,it),it!==null){Yi=m,e.cancelPendingCommit=it(qp.bind(null,e,n,m,a,o,p,v,_,M,q,$,null,H,I)),Sn(e,m,v,!F);return}}qp(e,n,m,a,o,p,v,_,M)}function ib(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var p=a[o],m=p.getSnapshot;p=p.value;try{if(!qe(m(),p))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Sn(e,n,a,o){n&=~au,n&=~Jn,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var p=n;0<p;){var m=31-Ge(p),v=1<<m;o[m]=-1,p&=~v}a!==0&&Vh(e,a,n)}function El(){return(Lt&6)===0?(qa(0),!1):!0}function uu(){if(Et!==null){if(Bt===0)var e=Et.return;else e=Et,Pi=qn=null,Cc(e),Rs=null,Ca=0,e=Et;for(;e!==null;)fp(e.alternate,e),e=e.return;Et=null}}function Us(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,wb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Yi=0,uu(),jt=e,Et=a=ki(e.current,null),xt=n,Bt=0,$e=null,yn=!1,Ps=ca(e,n),su=!1,zs=Ke=au=Jn=bn=Jt=0,Pe=ja=null,ru=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var p=31-Ge(o),m=1<<p;n|=e[p],o&=~m}return Xi=n,qr(),a}function zp(e,n){mt=null,B.H=ka,n===Ms||n===Zr?(n=Zd(),Bt=3):n===pc?(n=Zd(),Bt=4):Bt=n===jc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,$e=n,Et===null&&(Jt=1,dl(e,ii(n,e.current)))}function Fp(){var e=Xe.current;return e===null?!0:(xt&4194048)===xt?ri===null:(xt&62914560)===xt||(xt&536870912)!==0?e===ri:!1}function Up(){var e=B.H;return B.H=ka,e===null?ka:e}function Hp(){var e=B.A;return B.A=tb,e}function _l(){Jt=4,yn||(xt&4194048)!==xt&&Xe.current!==null||(Ps=!0),(bn&134217727)===0&&(Jn&134217727)===0||jt===null||Sn(jt,xt,Ke,!1)}function hu(e,n,a){var o=Lt;Lt|=2;var p=Up(),m=Hp();(jt!==e||xt!==n)&&(wl=null,Us(e,n)),n=!1;var v=Jt;t:do try{if(Bt!==0&&Et!==null){var _=Et,M=$e;switch(Bt){case 8:uu(),v=6;break t;case 3:case 2:case 9:case 6:Xe.current===null&&(n=!0);var F=Bt;if(Bt=0,$e=null,Hs(e,_,M,F),a&&Ps){v=0;break t}break;default:F=Bt,Bt=0,$e=null,Hs(e,_,M,F)}}nb(),v=Jt;break}catch(q){zp(e,q)}while(!0);return n&&e.shellSuspendCounter++,Pi=qn=null,Lt=o,B.H=p,B.A=m,Et===null&&(jt=null,xt=0,qr()),v}function nb(){for(;Et!==null;)Ip(Et)}function sb(e,n){var a=Lt;Lt|=2;var o=Up(),p=Hp();jt!==e||xt!==n?(wl=null,Sl=Ie()+500,Us(e,n)):Ps=ca(e,n);t:do try{if(Bt!==0&&Et!==null){n=Et;var m=$e;e:switch(Bt){case 1:Bt=0,$e=null,Hs(e,n,m,1);break;case 2:case 9:if(Qd(m)){Bt=0,$e=null,jp(n);break}n=function(){Bt!==2&&Bt!==9||jt!==e||(Bt=7),Ai(e)},m.then(n,n);break t;case 3:Bt=7;break t;case 4:Bt=5;break t;case 7:Qd(m)?(Bt=0,$e=null,jp(n)):(Bt=0,$e=null,Hs(e,n,m,7));break;case 5:var v=null;switch(Et.tag){case 26:v=Et.memoizedState;case 5:case 27:var _=Et;if(v?Tg(v):_.stateNode.complete){Bt=0,$e=null;var M=_.sibling;if(M!==null)Et=M;else{var F=_.return;F!==null?(Et=F,xl(F)):Et=null}break e}}Bt=0,$e=null,Hs(e,n,m,5);break;case 6:Bt=0,$e=null,Hs(e,n,m,6);break;case 8:uu(),Jt=6;break t;default:throw Error(s(462))}}ab();break}catch(q){zp(e,q)}while(!0);return Pi=qn=null,B.H=o,B.A=p,Lt=a,Et!==null?0:(jt=null,xt=0,qr(),Jt)}function ab(){for(;Et!==null&&!M0();)Ip(Et)}function Ip(e){var n=hp(e.alternate,e,Xi);e.memoizedProps=e.pendingProps,n===null?xl(e):Et=n}function jp(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=ap(a,n,n.pendingProps,n.type,void 0,xt);break;case 11:n=ap(a,n,n.pendingProps,n.type.render,n.ref,xt);break;case 5:Cc(n);default:fp(a,n),n=Et=Ud(n,Xi),n=hp(a,n,Xi)}e.memoizedProps=e.pendingProps,n===null?xl(e):Et=n}function Hs(e,n,a,o){Pi=qn=null,Cc(n),Rs=null,Ca=0;var p=n.return;try{if(Yy(e,p,n,a,xt)){Jt=1,dl(e,ii(a,e.current)),Et=null;return}}catch(m){if(p!==null)throw Et=p,m;Jt=1,dl(e,ii(a,e.current)),Et=null;return}n.flags&32768?(Tt||o===1?e=!0:Ps||(xt&536870912)!==0?e=!1:(yn=e=!0,(o===2||o===9||o===3||o===6)&&(o=Xe.current,o!==null&&o.tag===13&&(o.flags|=16384))),Gp(n,e)):xl(n)}function xl(e){var n=e;do{if((n.flags&32768)!==0){Gp(n,yn);return}e=n.return;var a=Qy(n.alternate,n,Xi);if(a!==null){Et=a;return}if(n=n.sibling,n!==null){Et=n;return}Et=n=e}while(n!==null);Jt===0&&(Jt=5)}function Gp(e,n){do{var a=Wy(e.alternate,e);if(a!==null){a.flags&=32767,Et=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Et=e;return}Et=e=a}while(e!==null);Jt=6,Et=null}function qp(e,n,a,o,p,m,v,_,M){e.cancelPendingCommit=null;do Cl();while(he!==0);if((Lt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=Jo,F0(e,a,m,v,_,M),e===jt&&(Et=jt=null,xt=0),Fs=n,An=e,Yi=a,lu=m,ou=p,Op=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,cb(Mr,function(){return Kp(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=B.T,B.T=null,p=V.p,V.p=2,v=Lt,Lt|=4;try{Zy(e,n,a)}finally{Lt=v,V.p=p,B.T=o}}he=1,Vp(),Xp(),Yp()}}function Vp(){if(he===1){he=0;var e=An,n=Fs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var o=V.p;V.p=2;var p=Lt;Lt|=4;try{xp(n,e);var m=Eu,v=Dd(e.containerInfo),_=m.focusedElem,M=m.selectionRange;if(v!==_&&_&&_.ownerDocument&&Rd(_.ownerDocument.documentElement,_)){if(M!==null&&$o(_)){var F=M.start,q=M.end;if(q===void 0&&(q=F),"selectionStart"in _)_.selectionStart=F,_.selectionEnd=Math.min(q,_.value.length);else{var $=_.ownerDocument||document,H=$&&$.defaultView||window;if(H.getSelection){var I=H.getSelection(),it=_.textContent.length,ct=Math.min(M.start,it),Ut=M.end===void 0?ct:Math.min(M.end,it);!I.extend&&ct>Ut&&(v=Ut,Ut=ct,ct=v);var k=Md(_,ct),D=Md(_,Ut);if(k&&D&&(I.rangeCount!==1||I.anchorNode!==k.node||I.anchorOffset!==k.offset||I.focusNode!==D.node||I.focusOffset!==D.offset)){var z=$.createRange();z.setStart(k.node,k.offset),I.removeAllRanges(),ct>Ut?(I.addRange(z),I.extend(D.node,D.offset)):(z.setEnd(D.node,D.offset),I.addRange(z))}}}}for($=[],I=_;I=I.parentNode;)I.nodeType===1&&$.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<$.length;_++){var Y=$[_];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Fl=!!wu,Eu=wu=null}finally{Lt=p,V.p=o,B.T=a}}e.current=n,he=2}}function Xp(){if(he===2){he=0;var e=An,n=Fs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var o=V.p;V.p=2;var p=Lt;Lt|=4;try{Ap(e,n.alternate,n)}finally{Lt=p,V.p=o,B.T=a}}he=3}}function Yp(){if(he===4||he===3){he=0,R0();var e=An,n=Fs,a=Yi,o=Op;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?he=5:(he=0,Fs=An=null,$p(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(vn=null),Ro(a),n=n.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(oa,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=B.T,p=V.p,V.p=2,B.T=null;try{for(var m=e.onRecoverableError,v=0;v<o.length;v++){var _=o[v];m(_.value,{componentStack:_.stack})}}finally{B.T=n,V.p=p}}(Yi&3)!==0&&Cl(),Ai(e),p=e.pendingLanes,(a&261930)!==0&&(p&42)!==0?e===cu?Ga++:(Ga=0,cu=e):Ga=0,qa(0)}}function $p(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,_a(n)))}function Cl(){return Vp(),Xp(),Yp(),Kp()}function Kp(){if(he!==5)return!1;var e=An,n=lu;lu=0;var a=Ro(Yi),o=B.T,p=V.p;try{V.p=32>a?32:a,B.T=null,a=ou,ou=null;var m=An,v=Yi;if(he=0,Fs=An=null,Yi=0,(Lt&6)!==0)throw Error(s(331));var _=Lt;if(Lt|=4,Dp(m.current),Tp(m,m.current,v,a),Lt=_,qa(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(oa,m)}catch{}return!0}finally{V.p=p,B.T=o,$p(e,n)}}function Qp(e,n,a){n=ii(a,n),n=Ic(e.stateNode,n,2),e=fn(e,n,2),e!==null&&(ua(e,2),Ai(e))}function Pt(e,n,a){if(e.tag===3)Qp(e,e,a);else for(;n!==null;){if(n.tag===3){Qp(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(vn===null||!vn.has(o))){e=ii(a,e),a=Wf(2),o=fn(n,a,2),o!==null&&(Zf(a,o,n,e),ua(o,2),Ai(o));break}}n=n.return}}function du(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new eb;var p=new Set;o.set(n,p)}else p=o.get(n),p===void 0&&(p=new Set,o.set(n,p));p.has(a)||(su=!0,p.add(a),e=rb.bind(null,e,n,a),n.then(e,e))}function rb(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,jt===e&&(xt&a)===a&&(Jt===4||Jt===3&&(xt&62914560)===xt&&300>Ie()-Al?(Lt&2)===0&&Us(e,0):au|=a,zs===xt&&(zs=0)),Ai(e)}function Wp(e,n){n===0&&(n=qh()),e=In(e,n),e!==null&&(ua(e,n),Ai(e))}function lb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Wp(e,a)}function ob(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,p=e.memoizedState;p!==null&&(a=p.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Wp(e,a)}function cb(e,n){return xo(e,n)}var Tl=null,Is=null,fu=!1,Ml=!1,pu=!1,wn=0;function Ai(e){e!==Is&&e.next===null&&(Is===null?Tl=Is=e:Is=Is.next=e),Ml=!0,fu||(fu=!0,hb())}function qa(e,n){if(!pu&&Ml){pu=!0;do for(var a=!1,o=Tl;o!==null;){if(e!==0){var p=o.pendingLanes;if(p===0)var m=0;else{var v=o.suspendedLanes,_=o.pingedLanes;m=(1<<31-Ge(42|e)+1)-1,m&=p&~(v&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,eg(o,m))}else m=xt,m=Lr(o,o===jt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||ca(o,m)||(a=!0,eg(o,m));o=o.next}while(a);pu=!1}}function ub(){Zp()}function Zp(){Ml=fu=!1;var e=0;wn!==0&&Sb()&&(e=wn);for(var n=Ie(),a=null,o=Tl;o!==null;){var p=o.next,m=Jp(o,n);m===0?(o.next=null,a===null?Tl=p:a.next=p,p===null&&(Is=a)):(a=o,(e!==0||(m&3)!==0)&&(Ml=!0)),o=p}he!==0&&he!==5||qa(e),wn!==0&&(wn=0)}function Jp(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var v=31-Ge(m),_=1<<v,M=p[v];M===-1?((_&a)===0||(_&o)!==0)&&(p[v]=z0(_,n)):M<=n&&(e.expiredLanes|=_),m&=~_}if(n=jt,a=xt,a=Lr(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Co(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ca(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Co(o),Ro(a)){case 2:case 8:a=jh;break;case 32:a=Mr;break;case 268435456:a=Gh;break;default:a=Mr}return o=tg.bind(null,e),a=xo(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Co(o),e.callbackPriority=2,e.callbackNode=null,2}function tg(e,n){if(he!==0&&he!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Cl()&&e.callbackNode!==a)return null;var o=xt;return o=Lr(e,e===jt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Bp(e,o,n),Jp(e,Ie()),e.callbackNode!=null&&e.callbackNode===a?tg.bind(null,e):null)}function eg(e,n){if(Cl())return null;Bp(e,n,!0)}function hb(){Eb(function(){(Lt&6)!==0?xo(Ih,ub):Zp()})}function gu(){if(wn===0){var e=Cs;e===0&&(e=Rr,Rr<<=1,(Rr&261888)===0&&(Rr=256)),wn=e}return wn}function ig(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Pr(""+e)}function ng(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function db(e,n,a,o,p){if(n==="submit"&&a&&a.stateNode===p){var m=ig((p[Ne]||null).action),v=o.submitter;v&&(n=(n=v[Ne]||null)?ig(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var _=new Hr("action","action",null,o,p);e.push({event:_,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(wn!==0){var M=v?ng(p,v):new FormData(p);Bc(a,{pending:!0,data:M,method:p.method,action:m},null,M)}}else typeof m=="function"&&(_.preventDefault(),M=v?ng(p,v):new FormData(p),Bc(a,{pending:!0,data:M,method:p.method,action:m},m,M))},currentTarget:p}]})}}for(var mu=0;mu<Zo.length;mu++){var yu=Zo[mu],fb=yu.toLowerCase(),pb=yu[0].toUpperCase()+yu.slice(1);fi(fb,"on"+pb)}fi(Od,"onAnimationEnd"),fi(kd,"onAnimationIteration"),fi(Bd,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(Dy,"onTransitionRun"),fi(Ny,"onTransitionStart"),fi(Ly,"onTransitionCancel"),fi(Pd,"onTransitionEnd"),ds("onMouseEnter",["mouseout","mouseover"]),ds("onMouseLeave",["mouseout","mouseover"]),ds("onPointerEnter",["pointerout","pointerover"]),ds("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Va));function sg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],p=o.event;o=o.listeners;t:{var m=void 0;if(n)for(var v=o.length-1;0<=v;v--){var _=o[v],M=_.instance,F=_.currentTarget;if(_=_.listener,M!==m&&p.isPropagationStopped())break t;m=_,p.currentTarget=F;try{m(p)}catch(q){Gr(q)}p.currentTarget=null,m=M}else for(v=0;v<o.length;v++){if(_=o[v],M=_.instance,F=_.currentTarget,_=_.listener,M!==m&&p.isPropagationStopped())break t;m=_,p.currentTarget=F;try{m(p)}catch(q){Gr(q)}p.currentTarget=null,m=M}}}}function _t(e,n){var a=n[Do];a===void 0&&(a=n[Do]=new Set);var o=e+"__bubble";a.has(o)||(ag(n,e,2,!1),a.add(o))}function bu(e,n,a){var o=0;n&&(o|=4),ag(a,e,o,n)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function vu(e){if(!e[Rl]){e[Rl]=!0,Wh.forEach(function(a){a!=="selectionchange"&&(gb.has(a)||bu(a,!1,e),bu(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Rl]||(n[Rl]=!0,bu("selectionchange",!1,n))}}function ag(e,n,a,o){switch(kg(n)){case 2:var p=Gb;break;case 8:p=qb;break;default:p=ku}a=p.bind(null,n,a,e),p=void 0,!Uo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),o?p!==void 0?e.addEventListener(n,a,{capture:!0,passive:p}):e.addEventListener(n,a,!0):p!==void 0?e.addEventListener(n,a,{passive:p}):e.addEventListener(n,a,!1)}function Au(e,n,a,o,p){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var _=o.stateNode.containerInfo;if(_===p)break;if(v===4)for(v=o.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===p)return;v=v.return}for(;_!==null;){if(v=cs(_),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){o=m=v;continue t}_=_.parentNode}}o=o.return}cd(function(){var F=m,q=zo(a),$=[];t:{var H=zd.get(e);if(H!==void 0){var I=Hr,it=e;switch(e){case"keypress":if(Fr(a)===0)break t;case"keydown":case"keyup":I=oy;break;case"focusin":it="focus",I=Go;break;case"focusout":it="blur",I=Go;break;case"beforeblur":case"afterblur":I=Go;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Q0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=hy;break;case Od:case kd:case Bd:I=J0;break;case Pd:I=fy;break;case"scroll":case"scrollend":I=$0;break;case"wheel":I=gy;break;case"copy":case"cut":case"paste":I=ey;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=pd;break;case"toggle":case"beforetoggle":I=yy}var ct=(n&4)!==0,Ut=!ct&&(e==="scroll"||e==="scrollend"),k=ct?H!==null?H+"Capture":null:H;ct=[];for(var D=F,z;D!==null;){var Y=D;if(z=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||z===null||k===null||(Y=fa(D,k),Y!=null&&ct.push(Xa(D,Y,z))),Ut)break;D=D.return}0<ct.length&&(H=new I(H,it,null,a,q),$.push({event:H,listeners:ct}))}}if((n&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",H&&a!==Po&&(it=a.relatedTarget||a.fromElement)&&(cs(it)||it[os]))break t;if((I||H)&&(H=q.window===q?q:(H=q.ownerDocument)?H.defaultView||H.parentWindow:window,I?(it=a.relatedTarget||a.toElement,I=F,it=it?cs(it):null,it!==null&&(Ut=l(it),ct=it.tag,it!==Ut||ct!==5&&ct!==27&&ct!==6)&&(it=null)):(I=null,it=F),I!==it)){if(ct=dd,Y="onMouseLeave",k="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ct=pd,Y="onPointerLeave",k="onPointerEnter",D="pointer"),Ut=I==null?H:da(I),z=it==null?H:da(it),H=new ct(Y,D+"leave",I,a,q),H.target=Ut,H.relatedTarget=z,Y=null,cs(q)===F&&(ct=new ct(k,D+"enter",it,a,q),ct.target=z,ct.relatedTarget=Ut,Y=ct),Ut=Y,I&&it)e:{for(ct=mb,k=I,D=it,z=0,Y=k;Y;Y=ct(Y))z++;Y=0;for(var at=D;at;at=ct(at))Y++;for(;0<z-Y;)k=ct(k),z--;for(;0<Y-z;)D=ct(D),Y--;for(;z--;){if(k===D||D!==null&&k===D.alternate){ct=k;break e}k=ct(k),D=ct(D)}ct=null}else ct=null;I!==null&&rg($,H,I,ct,!1),it!==null&&Ut!==null&&rg($,Ut,it,ct,!0)}}t:{if(H=F?da(F):window,I=H.nodeName&&H.nodeName.toLowerCase(),I==="select"||I==="input"&&H.type==="file")var Dt=wd;else if(Ad(H))if(Ed)Dt=Ty;else{Dt=xy;var st=_y}else I=H.nodeName,!I||I.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&Bo(F.elementType)&&(Dt=wd):Dt=Cy;if(Dt&&(Dt=Dt(e,F))){Sd($,Dt,a,q);break t}st&&st(e,H,F),e==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&ko(H,"number",H.value)}switch(st=F?da(F):window,e){case"focusin":(Ad(st)||st.contentEditable==="true")&&(bs=st,Ko=F,Sa=null);break;case"focusout":Sa=Ko=bs=null;break;case"mousedown":Qo=!0;break;case"contextmenu":case"mouseup":case"dragend":Qo=!1,Nd($,a,q);break;case"selectionchange":if(Ry)break;case"keydown":case"keyup":Nd($,a,q)}var bt;if(Vo)t:{switch(e){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else ys?bd(e,a)&&(Ct="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ct="onCompositionStart");Ct&&(gd&&a.locale!=="ko"&&(ys||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&ys&&(bt=ud()):(rn=q,Ho="value"in rn?rn.value:rn.textContent,ys=!0)),st=Dl(F,Ct),0<st.length&&(Ct=new fd(Ct,e,null,a,q),$.push({event:Ct,listeners:st}),bt?Ct.data=bt:(bt=vd(a),bt!==null&&(Ct.data=bt)))),(bt=vy?Ay(e,a):Sy(e,a))&&(Ct=Dl(F,"onBeforeInput"),0<Ct.length&&(st=new fd("onBeforeInput","beforeinput",null,a,q),$.push({event:st,listeners:Ct}),st.data=bt)),db($,e,F,a,q)}sg($,n)})}function Xa(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Dl(e,n){for(var a=n+"Capture",o=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=fa(e,a),p!=null&&o.unshift(Xa(e,p,m)),p=fa(e,n),p!=null&&o.push(Xa(e,p,m))),e.tag===3)return o;e=e.return}return[]}function mb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function rg(e,n,a,o,p){for(var m=n._reactName,v=[];a!==null&&a!==o;){var _=a,M=_.alternate,F=_.stateNode;if(_=_.tag,M!==null&&M===o)break;_!==5&&_!==26&&_!==27||F===null||(M=F,p?(F=fa(a,m),F!=null&&v.unshift(Xa(a,F,M))):p||(F=fa(a,m),F!=null&&v.push(Xa(a,F,M)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var yb=/\r\n?/g,bb=/\u0000|\uFFFD/g;function lg(e){return(typeof e=="string"?e:""+e).replace(yb,`
`).replace(bb,"")}function og(e,n){return n=lg(n),lg(e)===n}function Ft(e,n,a,o,p,m){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||ps(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&ps(e,""+o);break;case"className":kr(e,"class",o);break;case"tabIndex":kr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(e,a,o);break;case"style":ld(e,o,m);break;case"data":if(n!=="object"){kr(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Pr(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&Ft(e,n,"name",p.name,p,null),Ft(e,n,"formEncType",p.formEncType,p,null),Ft(e,n,"formMethod",p.formMethod,p,null),Ft(e,n,"formTarget",p.formTarget,p,null)):(Ft(e,n,"encType",p.encType,p,null),Ft(e,n,"method",p.method,p,null),Ft(e,n,"target",p.target,p,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Pr(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Li);break;case"onScroll":o!=null&&_t("scroll",e);break;case"onScrollEnd":o!=null&&_t("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Pr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":_t("beforetoggle",e),_t("toggle",e),Or(e,"popover",o);break;case"xlinkActuate":Ni(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ni(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ni(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ni(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ni(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ni(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ni(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ni(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ni(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Or(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=X0.get(a)||a,Or(e,a,o))}}function Su(e,n,a,o,p,m){switch(a){case"style":ld(e,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?ps(e,o):(typeof o=="number"||typeof o=="bigint")&&ps(e,""+o);break;case"onScroll":o!=null&&_t("scroll",e);break;case"onScrollEnd":o!=null&&_t("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zh.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),n=a.slice(2,p?a.length-7:void 0),m=e[Ne]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(n,m,p),typeof o=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,p);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Or(e,a,o)}}}function Ae(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",e),_t("load",e);var o=!1,p=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":o=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ft(e,n,m,v,a,null)}}p&&Ft(e,n,"srcSet",a.srcSet,a,null),o&&Ft(e,n,"src",a.src,a,null);return;case"input":_t("invalid",e);var _=m=v=p=null,M=null,F=null;for(o in a)if(a.hasOwnProperty(o)){var q=a[o];if(q!=null)switch(o){case"name":p=q;break;case"type":v=q;break;case"checked":M=q;break;case"defaultChecked":F=q;break;case"value":m=q;break;case"defaultValue":_=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,n));break;default:Ft(e,n,o,q,a,null)}}nd(e,m,_,M,F,v,p,!1);return;case"select":_t("invalid",e),o=v=m=null;for(p in a)if(a.hasOwnProperty(p)&&(_=a[p],_!=null))switch(p){case"value":m=_;break;case"defaultValue":v=_;break;case"multiple":o=_;default:Ft(e,n,p,_,a,null)}n=m,a=v,e.multiple=!!o,n!=null?fs(e,!!o,n,!1):a!=null&&fs(e,!!o,a,!0);return;case"textarea":_t("invalid",e),m=p=o=null;for(v in a)if(a.hasOwnProperty(v)&&(_=a[v],_!=null))switch(v){case"value":o=_;break;case"defaultValue":p=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Ft(e,n,v,_,a,null)}ad(e,o,p,m);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(o=a[M],o!=null))switch(M){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ft(e,n,M,o,a,null)}return;case"dialog":_t("beforetoggle",e),_t("toggle",e),_t("cancel",e),_t("close",e);break;case"iframe":case"object":_t("load",e);break;case"video":case"audio":for(o=0;o<Va.length;o++)_t(Va[o],e);break;case"image":_t("error",e),_t("load",e);break;case"details":_t("toggle",e);break;case"embed":case"source":case"link":_t("error",e),_t("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(o=a[F],o!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ft(e,n,F,o,a,null)}return;default:if(Bo(n)){for(q in a)a.hasOwnProperty(q)&&(o=a[q],o!==void 0&&Su(e,n,q,o,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(o=a[_],o!=null&&Ft(e,n,_,o,a,null))}function vb(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,v=null,_=null,M=null,F=null,q=null;for(I in a){var $=a[I];if(a.hasOwnProperty(I)&&$!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":M=$;default:o.hasOwnProperty(I)||Ft(e,n,I,null,o,$)}}for(var H in o){var I=o[H];if($=a[H],o.hasOwnProperty(H)&&(I!=null||$!=null))switch(H){case"type":m=I;break;case"name":p=I;break;case"checked":F=I;break;case"defaultChecked":q=I;break;case"value":v=I;break;case"defaultValue":_=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,n));break;default:I!==$&&Ft(e,n,H,I,o,$)}}Oo(e,v,_,M,F,q,m,p);return;case"select":I=v=_=H=null;for(m in a)if(M=a[m],a.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":I=M;default:o.hasOwnProperty(m)||Ft(e,n,m,null,o,M)}for(p in o)if(m=o[p],M=a[p],o.hasOwnProperty(p)&&(m!=null||M!=null))switch(p){case"value":H=m;break;case"defaultValue":_=m;break;case"multiple":v=m;default:m!==M&&Ft(e,n,p,m,o,M)}n=_,a=v,o=I,H!=null?fs(e,!!a,H,!1):!!o!=!!a&&(n!=null?fs(e,!!a,n,!0):fs(e,!!a,a?[]:"",!1));return;case"textarea":I=H=null;for(_ in a)if(p=a[_],a.hasOwnProperty(_)&&p!=null&&!o.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Ft(e,n,_,null,o,p)}for(v in o)if(p=o[v],m=a[v],o.hasOwnProperty(v)&&(p!=null||m!=null))switch(v){case"value":H=p;break;case"defaultValue":I=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&Ft(e,n,v,p,o,m)}sd(e,H,I);return;case"option":for(var it in a)if(H=a[it],a.hasOwnProperty(it)&&H!=null&&!o.hasOwnProperty(it))switch(it){case"selected":e.selected=!1;break;default:Ft(e,n,it,null,o,H)}for(M in o)if(H=o[M],I=a[M],o.hasOwnProperty(M)&&H!==I&&(H!=null||I!=null))switch(M){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ft(e,n,M,H,o,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in a)H=a[ct],a.hasOwnProperty(ct)&&H!=null&&!o.hasOwnProperty(ct)&&Ft(e,n,ct,null,o,H);for(F in o)if(H=o[F],I=a[F],o.hasOwnProperty(F)&&H!==I&&(H!=null||I!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,n));break;default:Ft(e,n,F,H,o,I)}return;default:if(Bo(n)){for(var Ut in a)H=a[Ut],a.hasOwnProperty(Ut)&&H!==void 0&&!o.hasOwnProperty(Ut)&&Su(e,n,Ut,void 0,o,H);for(q in o)H=o[q],I=a[q],!o.hasOwnProperty(q)||H===I||H===void 0&&I===void 0||Su(e,n,q,H,o,I);return}}for(var k in a)H=a[k],a.hasOwnProperty(k)&&H!=null&&!o.hasOwnProperty(k)&&Ft(e,n,k,null,o,H);for($ in o)H=o[$],I=a[$],!o.hasOwnProperty($)||H===I||H==null&&I==null||Ft(e,n,$,H,o,I)}function cg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ab(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var p=a[o],m=p.transferSize,v=p.initiatorType,_=p.duration;if(m&&_&&cg(v)){for(v=0,_=p.responseEnd,o+=1;o<a.length;o++){var M=a[o],F=M.startTime;if(F>_)break;var q=M.transferSize,$=M.initiatorType;q&&cg($)&&(M=M.responseEnd,v+=q*(M<_?1:(_-F)/(M-F)))}if(--o,n+=8*(m+v)/(p.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var wu=null,Eu=null;function Nl(e){return e.nodeType===9?e:e.ownerDocument}function ug(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function _u(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var xu=null;function Sb(){var e=window.event;return e&&e.type==="popstate"?e===xu?!1:(xu=e,!0):(xu=null,!1)}var dg=typeof setTimeout=="function"?setTimeout:void 0,wb=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,Eb=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(e){return fg.resolve(null).then(e).catch(_b)}:dg;function _b(e){setTimeout(function(){throw e})}function En(e){return e==="head"}function pg(e,n){var a=n,o=0;do{var p=a.nextSibling;if(e.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(p),Vs(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Ya(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ya(a);for(var m=a.firstChild;m;){var v=m.nextSibling,_=m.nodeName;m[ha]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&Ya(e.ownerDocument.body);a=p}while(a);Vs(n)}function gg(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Cu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Cu(a),No(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function xb(e,n,a,o){for(;e.nodeType===1;){var p=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ha])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=li(e.nextSibling),e===null)break}return null}function Cb(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=li(e.nextSibling),e===null))return null;return e}function mg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=li(e.nextSibling),e===null))return null;return e}function Tu(e){return e.data==="$?"||e.data==="$~"}function Mu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Tb(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function li(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Ru=null;function yg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return li(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function bg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function vg(e,n,a){switch(n=Nl(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Ya(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);No(e)}var oi=new Map,Ag=new Set;function Ll(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $i=V.d;V.d={f:Mb,r:Rb,D:Db,C:Nb,L:Lb,m:Ob,X:Bb,S:kb,M:Pb};function Mb(){var e=$i.f(),n=El();return e||n}function Rb(e){var n=us(e);n!==null&&n.tag===5&&n.type==="form"?zf(n):$i.r(e)}var js=typeof document>"u"?null:document;function Sg(e,n,a){var o=js;if(o&&typeof n=="string"&&n){var p=ti(n);p='link[rel="'+e+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),Ag.has(p)||(Ag.add(p),e={rel:e,crossOrigin:a,href:n},o.querySelector(p)===null&&(n=o.createElement("link"),Ae(n,"link",e),de(n),o.head.appendChild(n)))}}function Db(e){$i.D(e),Sg("dns-prefetch",e,null)}function Nb(e,n){$i.C(e,n),Sg("preconnect",e,n)}function Lb(e,n,a){$i.L(e,n,a);var o=js;if(o&&e&&n){var p='link[rel="preload"][as="'+ti(n)+'"]';n==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+ti(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+ti(a.imageSizes)+'"]')):p+='[href="'+ti(e)+'"]';var m=p;switch(n){case"style":m=Gs(e);break;case"script":m=qs(e)}oi.has(m)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),oi.set(m,e),o.querySelector(p)!==null||n==="style"&&o.querySelector($a(m))||n==="script"&&o.querySelector(Ka(m))||(n=o.createElement("link"),Ae(n,"link",e),de(n),o.head.appendChild(n)))}}function Ob(e,n){$i.m(e,n);var a=js;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+ti(o)+'"][href="'+ti(e)+'"]',m=p;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=qs(e)}if(!oi.has(m)&&(e=y({rel:"modulepreload",href:e},n),oi.set(m,e),a.querySelector(p)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ka(m)))return}o=a.createElement("link"),Ae(o,"link",e),de(o),a.head.appendChild(o)}}}function kb(e,n,a){$i.S(e,n,a);var o=js;if(o&&e){var p=hs(o).hoistableStyles,m=Gs(e);n=n||"default";var v=p.get(m);if(!v){var _={loading:0,preload:null};if(v=o.querySelector($a(m)))_.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=oi.get(m))&&Du(e,a);var M=v=o.createElement("link");de(M),Ae(M,"link",e),M._p=new Promise(function(F,q){M.onload=F,M.onerror=q}),M.addEventListener("load",function(){_.loading|=1}),M.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Ol(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:_},p.set(m,v)}}}function Bb(e,n){$i.X(e,n);var a=js;if(a&&e){var o=hs(a).hoistableScripts,p=qs(e),m=o.get(p);m||(m=a.querySelector(Ka(p)),m||(e=y({src:e,async:!0},n),(n=oi.get(p))&&Nu(e,n),m=a.createElement("script"),de(m),Ae(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(p,m))}}function Pb(e,n){$i.M(e,n);var a=js;if(a&&e){var o=hs(a).hoistableScripts,p=qs(e),m=o.get(p);m||(m=a.querySelector(Ka(p)),m||(e=y({src:e,async:!0,type:"module"},n),(n=oi.get(p))&&Nu(e,n),m=a.createElement("script"),de(m),Ae(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(p,m))}}function wg(e,n,a,o){var p=(p=ut.current)?Ll(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Gs(a.href),a=hs(p).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Gs(a.href);var m=hs(p).hoistableStyles,v=m.get(e);if(v||(p=p.ownerDocument||p,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,v),(m=p.querySelector($a(e)))&&!m._p&&(v.instance=m,v.state.loading=5),oi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},oi.set(e,a),m||zb(p,e,a,v.state))),n&&o===null)throw Error(s(528,""));return v}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=qs(a),a=hs(p).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Gs(e){return'href="'+ti(e)+'"'}function $a(e){return'link[rel="stylesheet"]['+e+"]"}function Eg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function zb(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ae(n,"link",a),de(n),e.head.appendChild(n))}function qs(e){return'[src="'+ti(e)+'"]'}function Ka(e){return"script[async]"+e}function _g(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+ti(a.href)+'"]');if(o)return n.instance=o,de(o),o;var p=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),de(o),Ae(o,"style",p),Ol(o,a.precedence,e),n.instance=o;case"stylesheet":p=Gs(a.href);var m=e.querySelector($a(p));if(m)return n.state.loading|=4,n.instance=m,de(m),m;o=Eg(a),(p=oi.get(p))&&Du(o,p),m=(e.ownerDocument||e).createElement("link"),de(m);var v=m;return v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Ae(m,"link",o),n.state.loading|=4,Ol(m,a.precedence,e),n.instance=m;case"script":return m=qs(a.src),(p=e.querySelector(Ka(m)))?(n.instance=p,de(p),p):(o=a,(p=oi.get(m))&&(o=y({},a),Nu(o,p)),e=e.ownerDocument||e,p=e.createElement("script"),de(p),Ae(p,"link",o),e.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Ol(o,a.precedence,e));return n.instance}function Ol(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=o.length?o[o.length-1]:null,m=p,v=0;v<o.length;v++){var _=o[v];if(_.dataset.precedence===n)m=_;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Du(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Nu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var kl=null;function xg(e,n,a){if(kl===null){var o=new Map,p=kl=new Map;p.set(a,o)}else p=kl,o=p.get(a),o||(o=new Map,p.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),p=0;p<a.length;p++){var m=a[p];if(!(m[ha]||m[me]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=e+v;var _=o.get(v);_?_.push(m):o.set(v,[m])}}return o}function Cg(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Fb(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Tg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ub(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Gs(o.href),m=n.querySelector($a(p));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Bl.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=m,de(m);return}m=n.ownerDocument||n,o=Eg(o),(p=oi.get(p))&&Du(o,p),m=m.createElement("link"),de(m);var v=m;v._p=new Promise(function(_,M){v.onload=_,v.onerror=M}),Ae(m,"link",o),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Bl.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Lu=0;function Hb(e,n){return e.stylesheets&&e.count===0&&zl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&zl(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&Lu===0&&(Lu=62500*Ab());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&zl(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Lu?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(p)}}:null}function Bl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pl=null;function zl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pl=new Map,n.forEach(Ib,e),Pl=null,Bl.call(e))}function Ib(e,n){if(!(n.state.loading&4)){var a=Pl.get(e);if(a)var o=a.get(null);else{a=new Map,Pl.set(e,a);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var v=p[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}p=n.instance,v=p.getAttribute("data-precedence"),m=a.get(v)||o,m===o&&a.set(null,p),a.set(v,p),this.count++,o=Bl.bind(this),p.addEventListener("load",o),p.addEventListener("error",o),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),n.state.loading|=4}}var Qa={$$typeof:C,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function jb(e,n,a,o,p,m,v,_,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=To(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=To(0),this.hiddenUpdates=To(null),this.identifierPrefix=o,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Mg(e,n,a,o,p,m,v,_,M,F,q,$){return e=new jb(e,n,a,v,M,F,q,$,_),n=1,m===!0&&(n|=24),m=Ve(3,null,null,n),e.current=m,m.stateNode=e,n=hc(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:n},gc(m),e}function Rg(e){return e?(e=Ss,e):Ss}function Dg(e,n,a,o,p,m){p=Rg(p),o.context===null?o.context=p:o.pendingContext=p,o=dn(n),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=fn(e,o,n),a!==null&&(ze(a,e,n),Ma(a,e,n))}function Ng(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Ou(e,n){Ng(e,n),(e=e.alternate)&&Ng(e,n)}function Lg(e){if(e.tag===13||e.tag===31){var n=In(e,67108864);n!==null&&ze(n,e,67108864),Ou(e,67108864)}}function Og(e){if(e.tag===13||e.tag===31){var n=Qe();n=Mo(n);var a=In(e,n);a!==null&&ze(a,e,n),Ou(e,n)}}var Fl=!0;function Gb(e,n,a,o){var p=B.T;B.T=null;var m=V.p;try{V.p=2,ku(e,n,a,o)}finally{V.p=m,B.T=p}}function qb(e,n,a,o){var p=B.T;B.T=null;var m=V.p;try{V.p=8,ku(e,n,a,o)}finally{V.p=m,B.T=p}}function ku(e,n,a,o){if(Fl){var p=Bu(o);if(p===null)Au(e,n,o,Ul,a),Bg(e,o);else if(Xb(p,e,n,a,o))o.stopPropagation();else if(Bg(e,o),n&4&&-1<Vb.indexOf(e)){for(;p!==null;){var m=us(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Pn(m.pendingLanes);if(v!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var M=1<<31-Ge(v);_.entanglements[1]|=M,v&=~M}Ai(m),(Lt&6)===0&&(Sl=Ie()+500,qa(0))}}break;case 31:case 13:_=In(m,2),_!==null&&ze(_,m,2),El(),Ou(m,2)}if(m=Bu(o),m===null&&Au(e,n,o,Ul,a),m===p)break;p=m}p!==null&&o.stopPropagation()}else Au(e,n,o,null,a)}}function Bu(e){return e=zo(e),Pu(e)}var Ul=null;function Pu(e){if(Ul=null,e=cs(e),e!==null){var n=l(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=c(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Ul=e,null}function kg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(D0()){case Ih:return 2;case jh:return 8;case Mr:case N0:return 32;case Gh:return 268435456;default:return 32}default:return 32}}var zu=!1,_n=null,xn=null,Cn=null,Wa=new Map,Za=new Map,Tn=[],Vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bg(e,n){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Wa.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(n.pointerId)}}function Ja(e,n,a,o,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[p]},n!==null&&(n=us(n),n!==null&&Lg(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function Xb(e,n,a,o,p){switch(n){case"focusin":return _n=Ja(_n,e,n,a,o,p),!0;case"dragenter":return xn=Ja(xn,e,n,a,o,p),!0;case"mouseover":return Cn=Ja(Cn,e,n,a,o,p),!0;case"pointerover":var m=p.pointerId;return Wa.set(m,Ja(Wa.get(m)||null,e,n,a,o,p)),!0;case"gotpointercapture":return m=p.pointerId,Za.set(m,Ja(Za.get(m)||null,e,n,a,o,p)),!0}return!1}function Pg(e){var n=cs(e.target);if(n!==null){var a=l(n);if(a!==null){if(n=a.tag,n===13){if(n=c(a),n!==null){e.blockedOn=n,Kh(e.priority,function(){Og(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,Kh(e.priority,function(){Og(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Bu(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Po=o,a.target.dispatchEvent(o),Po=null}else return n=us(a),n!==null&&Lg(n),e.blockedOn=a,!1;n.shift()}return!0}function zg(e,n,a){Hl(e)&&a.delete(n)}function Yb(){zu=!1,_n!==null&&Hl(_n)&&(_n=null),xn!==null&&Hl(xn)&&(xn=null),Cn!==null&&Hl(Cn)&&(Cn=null),Wa.forEach(zg),Za.forEach(zg)}function Il(e,n){e.blockedOn===n&&(e.blockedOn=null,zu||(zu=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,Yb)))}var jl=null;function Fg(e){jl!==e&&(jl=e,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){jl===e&&(jl=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],p=e[n+2];if(typeof o!="function"){if(Pu(o||a)===null)continue;break}var m=us(a);m!==null&&(e.splice(n,3),n-=3,Bc(m,{pending:!0,data:p,method:a.method,action:o},o,p))}}))}function Vs(e){function n(M){return Il(M,e)}_n!==null&&Il(_n,e),xn!==null&&Il(xn,e),Cn!==null&&Il(Cn,e),Wa.forEach(n),Za.forEach(n);for(var a=0;a<Tn.length;a++){var o=Tn[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Tn.length&&(a=Tn[0],a.blockedOn===null);)Pg(a),a.blockedOn===null&&Tn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var p=a[o],m=a[o+1],v=p[Ne]||null;if(typeof m=="function")v||Fg(a);else if(v){var _=null;if(m&&m.hasAttribute("formAction")){if(p=m,v=m[Ne]||null)_=v.formAction;else if(Pu(p)!==null)continue}else _=v.action;typeof _=="function"?a[o+1]=_:(a.splice(o,3),o-=3),Fg(a)}}}function Ug(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return p=v})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function Fu(e){this._internalRoot=e}Gl.prototype.render=Fu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=Qe();Dg(a,o,e,n,null,null)},Gl.prototype.unmount=Fu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Dg(e.current,2,null,e,null,null),El(),n[os]=null}};function Gl(e){this._internalRoot=e}Gl.prototype.unstable_scheduleHydration=function(e){if(e){var n=$h();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Tn.length&&n!==0&&n<Tn[a].priority;a++);Tn.splice(a,0,e),a===0&&Pg(e)}};var Hg=t.version;if(Hg!=="19.2.0")throw Error(s(527,Hg,"19.2.0"));V.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var $b={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{oa=ql.inject($b),je=ql}catch{}}return er.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,o="",p=Yf,m=$f,v=Kf;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Mg(e,1,!1,null,null,a,o,null,p,m,v,Ug),e[os]=n.current,vu(e),new Fu(n)},er.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var o=!1,p="",m=Yf,v=$f,_=Kf,M=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),n=Mg(e,1,!0,n,a??null,o,p,M,m,v,_,Ug),n.context=Rg(null),a=n.current,o=Qe(),o=Mo(o),p=dn(o),p.callback=null,fn(a,p,o),a=o,n.current.lanes=a,ua(n,a),Ai(n),e[os]=n.current,vu(e),new Gl(n)},er.version="19.2.0",er}var Zg;function sv(){if(Zg)return ju.exports;Zg=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),ju.exports=nv(),ju.exports}var av=sv();/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Jg="popstate";function rv(d={}){function t(s,r){let{pathname:l,search:c,hash:u}=s.location;return nh("",{pathname:l,search:c,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(s,r){return typeof r=="string"?r:dr(r)}return ov(t,i,null,d)}function Qt(d,t){if(d===!1||d===null||typeof d>"u")throw new Error(t)}function Ti(d,t){if(!d){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lv(){return Math.random().toString(36).substring(2,10)}function tm(d,t){return{usr:d.state,key:d.key,idx:t}}function nh(d,t,i=null,s){return{pathname:typeof d=="string"?d:d.pathname,search:"",hash:"",...typeof t=="string"?aa(t):t,state:i,key:t&&t.key||s||lv()}}function dr({pathname:d="/",search:t="",hash:i=""}){return t&&t!=="?"&&(d+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(d+=i.charAt(0)==="#"?i:"#"+i),d}function aa(d){let t={};if(d){let i=d.indexOf("#");i>=0&&(t.hash=d.substring(i),d=d.substring(0,i));let s=d.indexOf("?");s>=0&&(t.search=d.substring(s),d=d.substring(0,s)),d&&(t.pathname=d)}return t}function ov(d,t,i,s={}){let{window:r=document.defaultView,v5Compat:l=!1}=s,c=r.history,u="POP",h=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let x=g(),E=x==null?null:x-f;f=x,h&&h({action:u,location:S.location,delta:E})}function b(x,E){u="PUSH";let T=nh(S.location,x,E);f=g()+1;let C=tm(T,f),L=S.createHref(T);try{c.pushState(C,"",L)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(L)}l&&h&&h({action:u,location:S.location,delta:1})}function A(x,E){u="REPLACE";let T=nh(S.location,x,E);f=g();let C=tm(T,f),L=S.createHref(T);c.replaceState(C,"",L),l&&h&&h({action:u,location:S.location,delta:0})}function w(x){return cv(x)}let S={get action(){return u},get location(){return d(r,c)},listen(x){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(Jg,y),h=x,()=>{r.removeEventListener(Jg,y),h=null}},createHref(x){return t(r,x)},createURL:w,encodeLocation(x){let E=w(x);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:A,go(x){return c.go(x)}};return S}function cv(d,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Qt(i,"No window.location.(origin|href) available to create URL");let s=typeof d=="string"?d:dr(d);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Dm(d,t,i="/"){return uv(d,t,i,!1)}function uv(d,t,i,s){let r=typeof t=="string"?aa(t):t,l=tn(r.pathname||"/",i);if(l==null)return null;let c=Nm(d);hv(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=wv(l);u=Av(c[h],f,s)}return u}function Nm(d,t=[],i=[],s="",r=!1){let l=(c,u,h=r,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(s)&&h)return;Qt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length)}let y=Ji([s,g.relativePath]),b=i.concat(g);c.children&&c.children.length>0&&(Qt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Nm(c.children,t,b,y,h)),!(c.path==null&&!c.index)&&t.push({path:y,score:bv(y,c.index),routesMeta:b})};return d.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))l(c,u);else for(let h of Lm(c.path))l(c,u,!0,h)}),t}function Lm(d){let t=d.split("/");if(t.length===0)return[];let[i,...s]=t,r=i.endsWith("?"),l=i.replace(/\?$/,"");if(s.length===0)return r?[l,""]:[l];let c=Lm(s.join("/")),u=[];return u.push(...c.map(h=>h===""?l:[l,h].join("/"))),r&&u.push(...c),u.map(h=>d.startsWith("/")&&h===""?"/":h)}function hv(d){d.sort((t,i)=>t.score!==i.score?i.score-t.score:vv(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var dv=/^:[\w-]+$/,fv=3,pv=2,gv=1,mv=10,yv=-2,em=d=>d==="*";function bv(d,t){let i=d.split("/"),s=i.length;return i.some(em)&&(s+=yv),t&&(s+=pv),i.filter(r=>!em(r)).reduce((r,l)=>r+(dv.test(l)?fv:l===""?gv:mv),s)}function vv(d,t){return d.length===t.length&&d.slice(0,-1).every((s,r)=>s===t[r])?d[d.length-1]-t[t.length-1]:0}function Av(d,t,i=!1){let{routesMeta:s}=d,r={},l="/",c=[];for(let u=0;u<s.length;++u){let h=s[u],f=u===s.length-1,g=l==="/"?t:t.slice(l.length)||"/",y=lo({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),b=h.route;if(!y&&f&&i&&!s[s.length-1].route.index&&(y=lo({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(r,y.params),c.push({params:r,pathname:Ji([l,y.pathname]),pathnameBase:Cv(Ji([l,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(l=Ji([l,y.pathnameBase]))}return c}function lo(d,t){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[i,s]=Sv(d.path,d.caseSensitive,d.end),r=t.match(i);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((f,{paramName:g,isOptional:y},b)=>{if(g==="*"){let w=u[b]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const A=u[b];return y&&!A?f[g]=void 0:f[g]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:d}}function Sv(d,t=!1,i=!0){Ti(d==="*"||!d.endsWith("*")||d.endsWith("/*"),`Route path "${d}" will be treated as if it were "${d.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${d.replace(/\*$/,"/*")}".`);let s=[],r="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return d.endsWith("*")?(s.push({paramName:"*"}),r+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":d!==""&&d!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function wv(d){try{return d.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ti(!1,`The URL path "${d}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),d}}function tn(d,t){if(t==="/")return d;if(!d.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=d.charAt(i);return s&&s!=="/"?null:d.slice(i)||"/"}function Ev(d,t="/"){let{pathname:i,search:s="",hash:r=""}=typeof d=="string"?aa(d):d;return{pathname:i?i.startsWith("/")?i:_v(i,t):t,search:Tv(s),hash:Mv(r)}}function _v(d,t){let i=t.replace(/\/+$/,"").split("/");return d.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function Xu(d,t,i,s){return`Cannot include a '${d}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xv(d){return d.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Om(d){let t=xv(d);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function km(d,t,i,s=!1){let r;typeof d=="string"?r=aa(d):(r={...d},Qt(!r.pathname||!r.pathname.includes("?"),Xu("?","pathname","search",r)),Qt(!r.pathname||!r.pathname.includes("#"),Xu("#","pathname","hash",r)),Qt(!r.search||!r.search.includes("#"),Xu("#","search","hash",r)));let l=d===""||r.pathname==="",c=l?"/":r.pathname,u;if(c==null)u=i;else{let y=t.length-1;if(!s&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;r.pathname=b.join("/")}u=y>=0?t[y]:"/"}let h=Ev(r,u),f=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var Ji=d=>d.join("/").replace(/\/\/+/g,"/"),Cv=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),Tv=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,Mv=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function Rv(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Bm=["POST","PUT","PATCH","DELETE"];new Set(Bm);var Dv=["GET",...Bm];new Set(Dv);var ra=j.createContext(null);ra.displayName="DataRouter";var fo=j.createContext(null);fo.displayName="DataRouterState";j.createContext(!1);var Pm=j.createContext({isTransitioning:!1});Pm.displayName="ViewTransition";var Nv=j.createContext(new Map);Nv.displayName="Fetchers";var Lv=j.createContext(null);Lv.displayName="Await";var Ri=j.createContext(null);Ri.displayName="Navigation";var br=j.createContext(null);br.displayName="Location";var en=j.createContext({outlet:null,matches:[],isDataRoute:!1});en.displayName="Route";var Ah=j.createContext(null);Ah.displayName="RouteError";function Ov(d,{relative:t}={}){Qt(vr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=j.useContext(Ri),{hash:r,pathname:l,search:c}=Ar(d,{relative:t}),u=l;return i!=="/"&&(u=l==="/"?i:Ji([i,l])),s.createHref({pathname:u,search:c,hash:r})}function vr(){return j.useContext(br)!=null}function On(){return Qt(vr(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(br).location}var zm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fm(d){j.useContext(Ri).static||j.useLayoutEffect(d)}function kv(){let{isDataRoute:d}=j.useContext(en);return d?Yv():Bv()}function Bv(){Qt(vr(),"useNavigate() may be used only in the context of a <Router> component.");let d=j.useContext(ra),{basename:t,navigator:i}=j.useContext(Ri),{matches:s}=j.useContext(en),{pathname:r}=On(),l=JSON.stringify(Om(s)),c=j.useRef(!1);return Fm(()=>{c.current=!0}),j.useCallback((h,f={})=>{if(Ti(c.current,zm),!c.current)return;if(typeof h=="number"){i.go(h);return}let g=km(h,JSON.parse(l),r,f.relative==="path");d==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Ji([t,g.pathname])),(f.replace?i.replace:i.push)(g,f.state,f)},[t,i,l,r,d])}j.createContext(null);function Ar(d,{relative:t}={}){let{matches:i}=j.useContext(en),{pathname:s}=On(),r=JSON.stringify(Om(i));return j.useMemo(()=>km(d,JSON.parse(r),s,t==="path"),[d,r,s,t])}function Pv(d,t){return Um(d,t)}function Um(d,t,i,s,r){Qt(vr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(Ri),{matches:c}=j.useContext(en),u=c[c.length-1],h=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",y=u&&u.route;{let T=y&&y.path||"";Hm(f,!y||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let b=On(),A;if(t){let T=typeof t=="string"?aa(t):t;Qt(g==="/"||T.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),A=T}else A=b;let w=A.pathname||"/",S=w;if(g!=="/"){let T=g.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=Dm(d,{pathname:S});Ti(y||x!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Ti(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Iv(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:Ji([g,l.encodeLocation?l.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:Ji([g,l.encodeLocation?l.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),c,i,s,r);return t&&E?j.createElement(br.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},E):E}function zv(){let d=Xv(),t=Rv(d)?`${d.status} ${d.statusText}`:d instanceof Error?d.message:JSON.stringify(d),i=d instanceof Error?d.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",d),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),i?j.createElement("pre",{style:r},i):null,c)}var Fv=j.createElement(zv,null),Uv=class extends j.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,t){return t.location!==d.location||t.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:t.error,location:t.location,revalidation:d.revalidation||t.revalidation}}componentDidCatch(d,t){this.props.unstable_onError?this.props.unstable_onError(d,t):console.error("React Router caught the following error during render",d)}render(){return this.state.error!==void 0?j.createElement(en.Provider,{value:this.props.routeContext},j.createElement(Ah.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hv({routeContext:d,match:t,children:i}){let s=j.useContext(ra);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(en.Provider,{value:d},i)}function Iv(d,t=[],i=null,s=null,r=null){if(d==null){if(!i)return null;if(i.errors)d=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)d=i.matches;else return null}let l=d,c=i?.errors;if(c!=null){let f=l.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);Qt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,h=-1;if(i)for(let f=0;f<l.length;f++){let g=l[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:y,errors:b}=i,A=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||A){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((f,g,y)=>{let b,A=!1,w=null,S=null;i&&(b=c&&g.route.id?c[g.route.id]:void 0,w=g.route.errorElement||Fv,u&&(h<0&&y===0?(Hm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,S=null):h===y&&(A=!0,S=g.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,y+1)),E=()=>{let T;return b?T=w:A?T=S:g.route.Component?T=j.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=f,j.createElement(Hv,{match:g,routeContext:{outlet:f,matches:x,isDataRoute:i!=null},children:T})};return i&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?j.createElement(Uv,{location:i.location,revalidation:i.revalidation,component:w,error:b,children:E(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:s}):E()},null)}function Sh(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jv(d){let t=j.useContext(ra);return Qt(t,Sh(d)),t}function Gv(d){let t=j.useContext(fo);return Qt(t,Sh(d)),t}function qv(d){let t=j.useContext(en);return Qt(t,Sh(d)),t}function wh(d){let t=qv(d),i=t.matches[t.matches.length-1];return Qt(i.route.id,`${d} can only be used on routes that contain a unique "id"`),i.route.id}function Vv(){return wh("useRouteId")}function Xv(){let d=j.useContext(Ah),t=Gv("useRouteError"),i=wh("useRouteError");return d!==void 0?d:t.errors?.[i]}function Yv(){let{router:d}=jv("useNavigate"),t=wh("useNavigate"),i=j.useRef(!1);return Fm(()=>{i.current=!0}),j.useCallback(async(r,l={})=>{Ti(i.current,zm),i.current&&(typeof r=="number"?d.navigate(r):await d.navigate(r,{fromRouteId:t,...l}))},[d,t])}var im={};function Hm(d,t,i){!t&&!im[d]&&(im[d]=!0,Ti(!1,i))}j.memo($v);function $v({routes:d,future:t,state:i,unstable_onError:s}){return Um(d,void 0,i,s,t)}function eo(d){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Kv({basename:d="/",children:t=null,location:i,navigationType:s="POP",navigator:r,static:l=!1}){Qt(!vr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=d.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof i=="string"&&(i=aa(i));let{pathname:h="/",search:f="",hash:g="",state:y=null,key:b="default"}=i,A=j.useMemo(()=>{let w=tn(h,c);return w==null?null:{location:{pathname:w,search:f,hash:g,state:y,key:b},navigationType:s}},[c,h,f,g,y,b,s]);return Ti(A!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:j.createElement(Ri.Provider,{value:u},j.createElement(br.Provider,{children:t,value:A}))}function Qv({children:d,location:t}){return Pv(sh(d),t)}function sh(d,t=[]){let i=[];return j.Children.forEach(d,(s,r)=>{if(!j.isValidElement(s))return;let l=[...t,r];if(s.type===j.Fragment){i.push.apply(i,sh(s.props.children,l));return}Qt(s.type===eo,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=sh(s.props.children,l)),i.push(c)}),i}var io="get",no="application/x-www-form-urlencoded";function po(d){return d!=null&&typeof d.tagName=="string"}function Wv(d){return po(d)&&d.tagName.toLowerCase()==="button"}function Zv(d){return po(d)&&d.tagName.toLowerCase()==="form"}function Jv(d){return po(d)&&d.tagName.toLowerCase()==="input"}function tA(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}function eA(d,t){return d.button===0&&(!t||t==="_self")&&!tA(d)}var Vl=null;function iA(){if(Vl===null)try{new FormData(document.createElement("form"),0),Vl=!1}catch{Vl=!0}return Vl}var nA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yu(d){return d!=null&&!nA.has(d)?(Ti(!1,`"${d}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${no}"`),null):d}function sA(d,t){let i,s,r,l,c;if(Zv(d)){let u=d.getAttribute("action");s=u?tn(u,t):null,i=d.getAttribute("method")||io,r=Yu(d.getAttribute("enctype"))||no,l=new FormData(d)}else if(Wv(d)||Jv(d)&&(d.type==="submit"||d.type==="image")){let u=d.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=d.getAttribute("formaction")||u.getAttribute("action");if(s=h?tn(h,t):null,i=d.getAttribute("formmethod")||u.getAttribute("method")||io,r=Yu(d.getAttribute("formenctype"))||Yu(u.getAttribute("enctype"))||no,l=new FormData(u,d),!iA()){let{name:f,type:g,value:y}=d;if(g==="image"){let b=f?`${f}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else f&&l.append(f,y)}}else{if(po(d))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=io,s=null,r=no,c=d}return l&&r==="text/plain"&&(c=l,l=void 0),{action:s,method:i.toLowerCase(),encType:r,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Eh(d,t){if(d===!1||d===null||typeof d>"u")throw new Error(t)}function aA(d,t,i){let s=typeof d=="string"?new URL(d,typeof window>"u"?"server://singlefetch/":window.location.origin):d;return s.pathname==="/"?s.pathname=`_root.${i}`:t&&tn(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function rA(d,t){if(d.id in t)return t[d.id];try{let i=await import(d.module);return t[d.id]=i,i}catch(i){return console.error(`Error loading route module \`${d.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lA(d){return d==null?!1:d.href==null?d.rel==="preload"&&typeof d.imageSrcSet=="string"&&typeof d.imageSizes=="string":typeof d.rel=="string"&&typeof d.href=="string"}async function oA(d,t,i){let s=await Promise.all(d.map(async r=>{let l=t.routes[r.route.id];if(l){let c=await rA(l,i);return c.links?c.links():[]}return[]}));return dA(s.flat(1).filter(lA).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function nm(d,t,i,s,r,l){let c=(h,f)=>i[f]?h.route.id!==i[f].route.id:!0,u=(h,f)=>i[f].pathname!==h.pathname||i[f].route.path?.endsWith("*")&&i[f].params["*"]!==h.params["*"];return l==="assets"?t.filter((h,f)=>c(h,f)||u(h,f)):l==="data"?t.filter((h,f)=>{let g=s.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(d,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function cA(d,t,{includeHydrateFallback:i}={}){return uA(d.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function uA(d){return[...new Set(d)]}function hA(d){let t={},i=Object.keys(d).sort();for(let s of i)t[s]=d[s];return t}function dA(d,t){let i=new Set;return new Set(t),d.reduce((s,r)=>{let l=JSON.stringify(hA(r));return i.has(l)||(i.add(l),s.push({key:l,link:r})),s},[])}function Im(){let d=j.useContext(ra);return Eh(d,"You must render this element inside a <DataRouterContext.Provider> element"),d}function fA(){let d=j.useContext(fo);return Eh(d,"You must render this element inside a <DataRouterStateContext.Provider> element"),d}var _h=j.createContext(void 0);_h.displayName="FrameworkContext";function jm(){let d=j.useContext(_h);return Eh(d,"You must render this element inside a <HydratedRouter> element"),d}function pA(d,t){let i=j.useContext(_h),[s,r]=j.useState(!1),[l,c]=j.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,b=j.useRef(null);j.useEffect(()=>{if(d==="render"&&c(!0),d==="viewport"){let S=E=>{E.forEach(T=>{c(T.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return b.current&&x.observe(b.current),()=>{x.disconnect()}}},[d]),j.useEffect(()=>{if(s){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[s]);let A=()=>{r(!0)},w=()=>{r(!1),c(!1)};return i?d!=="intent"?[l,b,{}]:[l,b,{onFocus:ir(u,A),onBlur:ir(h,w),onMouseEnter:ir(f,A),onMouseLeave:ir(g,w),onTouchStart:ir(y,A)}]:[!1,b,{}]}function ir(d,t){return i=>{d&&d(i),i.defaultPrevented||t(i)}}function gA({page:d,...t}){let{router:i}=Im(),s=j.useMemo(()=>Dm(i.routes,d,i.basename),[i.routes,d,i.basename]);return s?j.createElement(yA,{page:d,matches:s,...t}):null}function mA(d){let{manifest:t,routeModules:i}=jm(),[s,r]=j.useState([]);return j.useEffect(()=>{let l=!1;return oA(d,t,i).then(c=>{l||r(c)}),()=>{l=!0}},[d,t,i]),s}function yA({page:d,matches:t,...i}){let s=On(),{manifest:r,routeModules:l}=jm(),{basename:c}=Im(),{loaderData:u,matches:h}=fA(),f=j.useMemo(()=>nm(d,t,h,r,s,"data"),[d,t,h,r,s]),g=j.useMemo(()=>nm(d,t,h,r,s,"assets"),[d,t,h,r,s]),y=j.useMemo(()=>{if(d===s.pathname+s.search+s.hash)return[];let w=new Set,S=!1;if(t.forEach(E=>{let T=r.routes[E.route.id];!T||!T.hasLoader||(!f.some(C=>C.route.id===E.route.id)&&E.route.id in u&&l[E.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:w.add(E.route.id))}),w.size===0)return[];let x=aA(d,c,"data");return S&&w.size>0&&x.searchParams.set("_routes",t.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[x.pathname+x.search]},[c,u,s,r,f,t,d,l]),b=j.useMemo(()=>cA(g,r),[g,r]),A=mA(g);return j.createElement(j.Fragment,null,y.map(w=>j.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...i})),b.map(w=>j.createElement("link",{key:w,rel:"modulepreload",href:w,...i})),A.map(({key:w,link:S})=>j.createElement("link",{key:w,nonce:i.nonce,...S})))}function bA(...d){return t=>{d.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var Gm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gm&&(window.__reactRouterVersion="7.9.5")}catch{}function vA({basename:d,children:t,window:i}){let s=j.useRef();s.current==null&&(s.current=rv({window:i,v5Compat:!0}));let r=s.current,[l,c]=j.useState({action:r.action,location:r.location}),u=j.useCallback(h=>{j.startTransition(()=>c(h))},[c]);return j.useLayoutEffect(()=>r.listen(u),[r,u]),j.createElement(Kv,{basename:d,children:t,location:l.location,navigationType:l.action,navigator:r})}var qm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zi=j.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:r,reloadDocument:l,replace:c,state:u,target:h,to:f,preventScrollReset:g,viewTransition:y,...b},A){let{basename:w}=j.useContext(Ri),S=typeof f=="string"&&qm.test(f),x,E=!1;if(typeof f=="string"&&S&&(x=f,Gm))try{let K=new URL(window.location.href),J=f.startsWith("//")?new URL(K.protocol+f):new URL(f),Z=tn(J.pathname,w);J.origin===K.origin&&Z!=null?f=Z+J.search+J.hash:E=!0}catch{Ti(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=Ov(f,{relative:r}),[C,L,N]=pA(s,b),O=EA(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:r,viewTransition:y});function P(K){t&&t(K),K.defaultPrevented||O(K)}let X=j.createElement("a",{...b,...N,href:x||T,onClick:E||l?t:P,ref:bA(A,L),target:h,"data-discover":!S&&i==="render"?"true":void 0});return C&&!S?j.createElement(j.Fragment,null,X,j.createElement(gA,{page:T})):X});Zi.displayName="Link";var AA=j.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:r=!1,style:l,to:c,viewTransition:u,children:h,...f},g){let y=Ar(c,{relative:f.relative}),b=On(),A=j.useContext(fo),{navigator:w,basename:S}=j.useContext(Ri),x=A!=null&&MA(y)&&u===!0,E=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,T=b.pathname,C=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(T=T.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&S&&(C=tn(C,S)||C);const L=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let N=T===E||!r&&T.startsWith(E)&&T.charAt(L)==="/",O=C!=null&&(C===E||!r&&C.startsWith(E)&&C.charAt(E.length)==="/"),P={isActive:N,isPending:O,isTransitioning:x},X=N?t:void 0,K;typeof s=="function"?K=s(P):K=[s,N?"active":null,O?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let J=typeof l=="function"?l(P):l;return j.createElement(Zi,{...f,"aria-current":X,className:K,ref:g,style:J,to:c,viewTransition:u},typeof h=="function"?h(P):h)});AA.displayName="NavLink";var SA=j.forwardRef(({discover:d="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:r,state:l,method:c=io,action:u,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:y,...b},A)=>{let w=CA(),S=TA(u,{relative:f}),x=c.toLowerCase()==="get"?"get":"post",E=typeof u=="string"&&qm.test(u),T=C=>{if(h&&h(C),C.defaultPrevented)return;C.preventDefault();let L=C.nativeEvent.submitter,N=L?.getAttribute("formmethod")||c;w(L||C.currentTarget,{fetcherKey:t,method:N,navigate:i,replace:r,state:l,relative:f,preventScrollReset:g,viewTransition:y})};return j.createElement("form",{ref:A,method:x,action:S,onSubmit:s?h:T,...b,"data-discover":!E&&d==="render"?"true":void 0})});SA.displayName="Form";function wA(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vm(d){let t=j.useContext(ra);return Qt(t,wA(d)),t}function EA(d,{target:t,replace:i,state:s,preventScrollReset:r,relative:l,viewTransition:c}={}){let u=kv(),h=On(),f=Ar(d,{relative:l});return j.useCallback(g=>{if(eA(g,t)){g.preventDefault();let y=i!==void 0?i:dr(h)===dr(f);u(d,{replace:y,state:s,preventScrollReset:r,relative:l,viewTransition:c})}},[h,u,f,i,s,t,d,r,l,c])}var _A=0,xA=()=>`__${String(++_A)}__`;function CA(){let{router:d}=Vm("useSubmit"),{basename:t}=j.useContext(Ri),i=Vv();return j.useCallback(async(s,r={})=>{let{action:l,method:c,encType:u,formData:h,body:f}=sA(s,t);if(r.navigate===!1){let g=r.fetcherKey||xA();await d.fetch(g,i,r.action||l,{preventScrollReset:r.preventScrollReset,formData:h,body:f,formMethod:r.method||c,formEncType:r.encType||u,flushSync:r.flushSync})}else await d.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:h,body:f,formMethod:r.method||c,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[d,t,i])}function TA(d,{relative:t}={}){let{basename:i}=j.useContext(Ri),s=j.useContext(en);Qt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),l={...Ar(d||".",{relative:t})},c=On();if(d==null){l.search=c.search;let u=new URLSearchParams(l.search),h=u.getAll("index");if(h.some(g=>g==="")){u.delete("index"),h.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();l.search=g?`?${g}`:""}}return(!d||d===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:Ji([i,l.pathname])),dr(l)}function MA(d,{relative:t}={}){let i=j.useContext(Pm);Qt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Vm("useViewTransitionState"),r=Ar(d,{relative:t});if(!i.isTransitioning)return!1;let l=tn(i.currentLocation.pathname,s)||i.currentLocation.pathname,c=tn(i.nextLocation.pathname,s)||i.nextLocation.pathname;return lo(r.pathname,c)!=null||lo(r.pathname,l)!=null}function RA(){const d=On();return U.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:U.jsx("div",{className:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:U.jsxs("div",{className:"flex items-center justify-between",children:[U.jsx(Zi,{to:"/",className:"text-2xl sm:text-3xl font-bold text-gray-900 hover:text-gray-700 transition-colors",children:"RedactGuide"}),U.jsxs("nav",{className:"hidden sm:flex items-center gap-8",children:[U.jsx(Zi,{to:"/",className:`text-sm font-medium transition-colors ${d.pathname==="/"?"text-blue-600":"text-gray-700 hover:text-gray-900"}`,children:"Home"}),U.jsx("a",{href:"#features",className:"text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors",children:"Features"}),U.jsx(Zi,{to:"/upload",className:`rounded-lg px-4 py-2 text-sm font-semibold transition-all ${d.pathname==="/upload"?"bg-blue-700 text-white":"bg-blue-600 text-white hover:bg-blue-500"}`,children:"Get Started"})]}),U.jsx(Zi,{to:"/upload",className:"sm:hidden rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-500 transition-colors",children:"Start"})]})})})}function DA(){return U.jsx("footer",{className:"bg-white border-t border-gray-200 mt-auto",children:U.jsx("div",{className:"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8",children:U.jsxs("div",{className:"text-center",children:[U.jsx("p",{className:"text-base text-gray-600",children:"Built with privacy in mind. No tracking. No analytics. No data collection."}),U.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"RedactGuide - Local-Only Document Redaction"})]})})})}function NA(){return U.jsx("div",{className:"flex-1 bg-gradient-to-b from-gray-50 to-white",children:U.jsxs("main",{children:[U.jsx("div",{className:"mx-auto max-w-7xl px-4 py-16 sm:py-24 sm:px-6 lg:px-8",children:U.jsxs("div",{className:"text-center",children:[U.jsxs("div",{className:"inline-flex items-center rounded-full bg-blue-50 px-4 py-1.5 text-sm font-medium text-blue-700 mb-8",children:[U.jsx("svg",{className:"mr-2 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:U.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"100% Privacy-First Technology"]}),U.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-gray-900 sm:text-6xl lg:text-7xl",children:["Redact Sensitive Information",U.jsx("span",{className:"block text-blue-600 mt-2",children:"Without Leaving Your Browser"})]}),U.jsx("p",{className:"mt-8 text-xl leading-8 text-gray-600 max-w-3xl mx-auto",children:"Automatically find and redact SSNs, phone numbers, emails, credit cards, and more. Your documents never leave your device. Zero cloud processing. HIPAA-friendly by design."}),U.jsxs("div",{className:"mt-12 flex justify-center gap-4 flex-wrap",children:[U.jsx(Zi,{to:"/upload",className:"rounded-lg bg-blue-600 px-8 py-4 text-lg font-semibold text-white shadow-lg hover:bg-blue-500 hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:"Start Redacting Now"}),U.jsx("a",{href:"#features",className:"rounded-lg bg-white px-8 py-4 text-lg font-semibold text-gray-900 shadow-md ring-1 ring-inset ring-gray-300 hover:bg-gray-50 hover:shadow-lg transition-all duration-200",children:"Learn How It Works"})]}),U.jsx("p",{className:"mt-6 text-sm text-gray-500",children:"No account required  No installation needed  Free forever"})]})}),U.jsx("div",{id:"features",className:"bg-white py-24 sm:py-32",children:U.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[U.jsxs("div",{className:"text-center mb-16",children:[U.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:"Why RedactGuide?"}),U.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"The only document redaction tool that puts your privacy first"})]}),U.jsxs("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:[U.jsxs("div",{className:"relative rounded-2xl border border-gray-200 bg-white p-8 shadow-sm hover:shadow-lg transition-shadow",children:[U.jsx("div",{className:"inline-flex rounded-lg bg-blue-50 p-3 mb-4",children:U.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),U.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"100% Local Processing"}),U.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Your documents never leave your device. All processing happens entirely in your browser using WebAssembly and JavaScript."})]}),U.jsxs("div",{className:"relative rounded-2xl border border-gray-200 bg-white p-8 shadow-sm hover:shadow-lg transition-shadow",children:[U.jsx("div",{className:"inline-flex rounded-lg bg-green-50 p-3 mb-4",children:U.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),U.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Automatic Detection"}),U.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Smart pattern matching finds SSNs, phone numbers, emails, credit cards, dates of birth, and more with high accuracy."})]}),U.jsxs("div",{className:"relative rounded-2xl border border-gray-200 bg-white p-8 shadow-sm hover:shadow-lg transition-shadow",children:[U.jsx("div",{className:"inline-flex rounded-lg bg-red-50 p-3 mb-4",children:U.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),U.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"HIPAA Compliant"}),U.jsx("p",{className:"text-gray-600 leading-relaxed",children:"No data transmission means built-in compliance with HIPAA, GDPR, and other privacy regulations."})]}),U.jsxs("div",{className:"relative rounded-2xl border border-gray-200 bg-white p-8 shadow-sm hover:shadow-lg transition-shadow",children:[U.jsx("div",{className:"inline-flex rounded-lg bg-yellow-50 p-3 mb-4",children:U.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),U.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Lightning Fast"}),U.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Process documents in seconds with optimized algorithms. No waiting for uploads or server processing."})]}),U.jsxs("div",{className:"relative rounded-2xl border border-gray-200 bg-white p-8 shadow-sm hover:shadow-lg transition-shadow",children:[U.jsx("div",{className:"inline-flex rounded-lg bg-slate-50 p-3 mb-4",children:U.jsx("svg",{className:"h-6 w-6 text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),U.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Works Offline"}),U.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Progressive Web App technology means you can install and use RedactGuide completely offline."})]}),U.jsxs("div",{className:"relative rounded-2xl border border-gray-200 bg-white p-8 shadow-sm hover:shadow-lg transition-shadow",children:[U.jsx("div",{className:"inline-flex rounded-lg bg-cyan-50 p-3 mb-4",children:U.jsx("svg",{className:"h-6 w-6 text-cyan-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),U.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Free Forever"}),U.jsx("p",{className:"text-gray-600 leading-relaxed",children:"No subscriptions, no credits, no hidden costs. RedactGuide is completely free and open source."})]})]})]})}),U.jsx("div",{className:"bg-gray-50 py-24 sm:py-32",children:U.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[U.jsxs("div",{className:"text-center mb-16",children:[U.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:"How It Works"}),U.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Three simple steps to redact your documents"})]}),U.jsxs("div",{className:"grid grid-cols-1 gap-12 lg:grid-cols-3",children:[U.jsxs("div",{className:"text-center",children:[U.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-blue-600 text-2xl font-bold text-white",children:"1"}),U.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"Upload Your PDF"}),U.jsx("p",{className:"mt-3 text-gray-600",children:"Drag and drop or select a PDF file. It stays on your device - nothing is uploaded."})]}),U.jsxs("div",{className:"text-center",children:[U.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-blue-600 text-2xl font-bold text-white",children:"2"}),U.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"Review Detections"}),U.jsx("p",{className:"mt-3 text-gray-600",children:"See what sensitive information was found. Add or remove items as needed."})]}),U.jsxs("div",{className:"text-center",children:[U.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-blue-600 text-2xl font-bold text-white",children:"3"}),U.jsx("h3",{className:"mt-6 text-xl font-semibold text-gray-900",children:"Download Redacted PDF"}),U.jsx("p",{className:"mt-3 text-gray-600",children:"Get your redacted document with all sensitive information permanently removed."})]})]})]})}),U.jsx("div",{className:"bg-blue-600 py-16 sm:py-24",children:U.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:U.jsxs("div",{className:"text-center",children:[U.jsx("h2",{className:"text-3xl font-bold tracking-tight text-white sm:text-4xl",children:"Your Privacy is Our Priority"}),U.jsx("p",{className:"mt-6 text-xl text-blue-100 max-w-3xl mx-auto",children:"Unlike other redaction tools that require uploading your documents to the cloud, RedactGuide processes everything locally in your browser. Your sensitive documents never touch our servers because we don't have any servers."}),U.jsx("div",{className:"mt-10 flex justify-center gap-4",children:U.jsx(Zi,{to:"/upload",className:"rounded-lg bg-white px-8 py-4 text-lg font-semibold text-blue-600 shadow-lg hover:bg-gray-50 transition-all",children:"Try It Now"})})]})})})]})})}const Me=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ah=[.001,0,0,.001,0,0],$u=1.35,We={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Rn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},fr="pdfjs_internal_editor_",gt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},LA={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},rh={TRIANGLES:1,LATTICE:2},Se={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},so={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ue={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ys={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},go={ERRORS:0,WARNINGS:1,INFOS:5},pr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},nr={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},OA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let mo=go.WARNINGS;function kA(d){Number.isInteger(d)&&(mo=d)}function BA(){return mo}function yo(d){mo>=go.INFOS&&console.info(`Info: ${d}`)}function pt(d){mo>=go.WARNINGS&&console.warn(`Warning: ${d}`)}function Gt(d){throw new Error(d)}function Rt(d,t){d||Gt(t)}function PA(d){switch(d?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Xm(d,t=null,i=null){if(!d)return null;if(i&&typeof d=="string"&&(i.addDefaultProtocol&&d.startsWith("www.")&&d.match(/\./g)?.length>=2&&(d=`http://${d}`),i.tryConvertEncoding))try{d=IA(d)}catch{}const s=t?URL.parse(d,t):URL.parse(d);return PA(s)?s:null}function Ym(d,t,i=!1){const s=URL.parse(d);return s?(s.hash=t,s.href):i&&Xm(d,"http://example.com")?d.split("#",1)[0]+`${t?`#${t}`:""}`:""}function yt(d,t,i,s=!1){return Object.defineProperty(d,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const rs=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class sm extends rs{constructor(t,i){super(t,"PasswordException"),this.code=i}}class Ku extends rs{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class lh extends rs{constructor(t){super(t,"InvalidPDFException")}}class oo extends rs{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class zA extends rs{constructor(t){super(t,"FormatError")}}class Nn extends rs{constructor(t){super(t,"AbortException")}}function $m(d){(typeof d!="object"||d?.length===void 0)&&Gt("Invalid argument for bytesToString");const t=d.length,i=8192;if(t<i)return String.fromCharCode.apply(null,d);const s=[];for(let r=0;r<t;r+=i){const l=Math.min(r+i,t),c=d.subarray(r,l);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Sr(d){typeof d!="string"&&Gt("Invalid argument for stringToBytes");const t=d.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=d.charCodeAt(s)&255;return i}function FA(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function UA(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function HA(){try{return new Function(""),!0}catch{return!1}}class _e{static get isLittleEndian(){return yt(this,"isLittleEndian",UA())}static get isEvalSupported(){return yt(this,"isEvalSupported",HA())}static get isOffscreenCanvasSupported(){return yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return yt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return yt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return yt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return yt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return yt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Qu=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));class nt{static makeHexColor(t,i,s){return`#${Qu[t]}${Qu[i]}${Qu[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],l=t[s+1];t[s]=r*i[0]+l*i[2]+i[4],t[s+1]=r*i[1]+l*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],l=i[1],c=i[2],u=i[3],h=i[4],f=i[5];for(let g=0;g<6;g+=2){const y=t[s+g],b=t[s+g+1];t[s+g]=y*r+b*c+h,t[s+g+1]=y*l+b*u+f}}static applyInverseTransform(t,i){const s=t[0],r=t[1],l=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/l,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/l}static axialAlignedBoundingBox(t,i,s){const r=i[0],l=i[1],c=i[2],u=i[3],h=i[4],f=i[5],g=t[0],y=t[1],b=t[2],A=t[3];let w=r*g+h,S=w,x=r*b+h,E=x,T=u*y+f,C=T,L=u*A+f,N=L;if(l!==0||c!==0){const O=l*g,P=l*b,X=c*y,K=c*A;w+=X,E+=X,x+=K,S+=K,T+=O,N+=O,L+=P,C+=P}s[0]=Math.min(s[0],w,x,S,E),s[1]=Math.min(s[1],T,L,C,N),s[2]=Math.max(s[2],w,x,S,E),s[3]=Math.max(s[3],T,L,C,N)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],l=t[2],c=t[3],u=s**2+r**2,h=s*l+r*c,f=l**2+c**2,g=(u+f)/2,y=Math.sqrt(g**2-(u*f-h**2));i[0]=Math.sqrt(g+y||1),i[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return l>c?null:[s,l,r,c]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,l){l[0]=Math.min(l[0],t,s),l[1]=Math.min(l[1],i,r),l[2]=Math.max(l[2],t,s),l[3]=Math.max(l[3],i,r)}static#t(t,i,s,r,l,c,u,h,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,A=b*f,w=y*(y*(y*t+3*f*i)+3*b*s)+A*r,S=y*(y*(y*l+3*f*c)+3*b*u)+A*h;g[0]=Math.min(g[0],w),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],w),g[3]=Math.max(g[3],S)}static#e(t,i,s,r,l,c,u,h,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,i,s,r,l,c,u,h,-y/g,b);return}const A=g**2-4*y*f;if(A<0)return;const w=Math.sqrt(A),S=2*f;this.#t(t,i,s,r,l,c,u,h,(-g+w)/S,b),this.#t(t,i,s,r,l,c,u,h,(-g-w)/S,b)}static bezierBoundingBox(t,i,s,r,l,c,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,h),this.#e(t,s,l,u,i,r,c,h,3*(-t+3*(s-l)+u),6*(t-2*s+l),3*(s-t),f),this.#e(t,s,l,u,i,r,c,h,3*(-i+3*(r-c)+h),6*(i-2*r+c),3*(r-i),f)}}function IA(d){return decodeURIComponent(escape(d))}let Wu=null,am=null;function jA(d){return Wu||(Wu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,am=new Map([["","t"]])),d.replaceAll(Wu,(t,i,s)=>i?i.normalize("NFKC"):am.get(s))}function Km(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const d=new Uint8Array(32);return crypto.getRandomValues(d),$m(d)}const Qs="pdfjs_internal_id_";function GA(d,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...l]=i;if(!d(s)&&!Number.isInteger(s)||!t(r))return!1;const c=l.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of l)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Re(d,t,i){return Math.min(Math.max(d,t),i)}function Qm(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa($m(d))}function qA(d){return Uint8Array.fromBase64?Uint8Array.fromBase64(d):Sr(atob(d))}typeof Promise.try!="function"&&(Promise.try=function(d,...t){return new Promise(i=>{i(d(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(d){return d.reduce((t,i)=>t+i,0)});class gr{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(l){if(!l)return;let c=null;const u=l.name;if(u==="#text")c=l.value;else if(gr.shouldBuildText(u))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&i.push({str:c}),!!l.children)for(const h of l.children)r(h)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Wm{static setupStorage(t,i,s,r,l){const c=r.getValue(i,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:l}){const{attributes:c}=i,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[h,f]of Object.entries(c))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&l.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,l=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:l,linkService:s});const u=l!=="richText",h=t.div;if(h.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=y}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),u&&gr.shouldBuildText(r.name)&&f.push(y)}return{textDivs:f}}const g=[[r,-1,c]];for(;g.length>0;){const[y,b,A]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const w=y.children[++g.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const E=document.createTextNode(w.value);f.push(E),A.append(E);continue}const x=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(A.append(x),w.attributes&&this.setAttributes({html:x,element:w,storage:i,intent:l,linkService:s}),w.children?.length>0)g.push([w,-1,x]);else if(w.value){const E=document.createTextNode(w.value);u&&gr.shouldBuildText(S)&&f.push(E),x.append(E)}}for(const y of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const Ki="http://www.w3.org/2000/svg";class sa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function wr(d,t="text"){if(or(d,document.baseURI)){const i=await fetch(d);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Er{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:l=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=l,this.offsetY=c,s*=i;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let w,S,x,E;g===0?(w=Math.abs(f-t[1])*s+l,S=Math.abs(h-t[0])*s+c,x=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(w=Math.abs(h-t[0])*s+l,S=Math.abs(f-t[1])*s+c,x=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[g*s,y*s,b*s,A*s,w-g*s*h-b*s*f,S-y*s*h-A*s*f],this.width=x,this.height=E}get rawDims(){const t=this.viewBox;return yt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Er({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:l})}convertToViewportPoint(t,i){const s=[t,i];return nt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];nt.applyTransform(i,this.transform);const s=[t[2],t[3]];return nt.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return nt.applyInverseTransform(s,this.transform),s}}class xh extends rs{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function bo(d){const t=d.length;let i=0;for(;i<t&&d[i].trim()==="";)i++;return d.substring(i,i+5).toLowerCase()==="data:"}function Ch(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function VA(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function XA(d,t="document.pdf"){if(typeof d!="string")return t;if(bo(d))return pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(d);if(!s)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},l=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(l.test(c))return r(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(l.test(f))return r(f);const h=Array.from(s.searchParams.keys()).reverse();for(const f of h)if(l.test(f))return r(f)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return r(h[0])}return t}class rm{started=Object.create(null);times=[];time(t){t in this.started&&pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:l}of this.times)t.push(`${s.padEnd(i)} ${l-r}ms
`);return t.join("")}}function or(d,t){const i=t?URL.parse(d,t):URL.parse(d);return i?.protocol==="http:"||i?.protocol==="https:"}function di(d){d.preventDefault()}function te(d){d.preventDefault(),d.stopPropagation()}function YA(d){console.log("Deprecated API usage: "+d)}class oh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(i[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(i[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(i[6],10);h=h>=0&&h<=59?h:0;const f=i[7]||"Z";let g=parseInt(i[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,u+=y):f==="+"&&(c-=g,u-=y),new Date(Date.UTC(s,r,l,c,u,h))}}function $A(d,{scale:t=1,rotation:i=0}){const{width:s,height:r}=d.attributes.style,l=[0,0,parseInt(s),parseInt(r)];return new Er({viewBox:l,userUnit:1,scale:t,rotation:i})}function _r(d){if(d.startsWith("#")){const t=parseInt(d.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(t=>parseInt(t)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(pt(`Not a valid color format: "${d}"`),[0,0,0])}function KA(d){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of d.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;d.set(i,_r(s))}t.remove()}function Kt(d){const{a:t,b:i,c:s,d:r,e:l,f:c}=d.getTransform();return[t,i,s,r,l,c]}function Ei(d){const{a:t,b:i,c:s,d:r,e:l,f:c}=d.getTransform().invertSelf();return[t,i,s,r,l,c]}function ss(d,t,i=!1,s=!0){if(t instanceof Er){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:c}=d,u=_e.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${l}px`,g=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}s&&d.setAttribute("data-main-rotation",t.rotation)}class Mi{constructor(){const{pixelRatio:t}=Mi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,l=-1){let c=1/0,u=1/0,h=1/0;s=Mi.capPixels(s,l),s>0&&(c=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,h=r/i);const f=Math.min(c,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const ch=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class QA{static get isDarkMode(){return yt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class WA{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),yt(this,"commentForegroundColor",_r(s))}}function ZA(d,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return d=Math.round(d*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[d,t,i]}function lm(d,t){const i=d[0]/255,s=d[1]/255,r=d[2]/255,l=Math.max(i,s,r),c=Math.min(i,s,r),u=(l+c)/2;if(l===c)t[0]=t[1]=0;else{const h=l-c;switch(t[1]=u<.5?h/(l+c):h/(2-l-c),l){case i:t[0]=((s-r)/h+(s<r?6:0))*60;break;case s:t[0]=((r-i)/h+2)*60;break;case r:t[0]=((i-s)/h+4)*60;break}}t[2]=u}function uh(d,t){const i=d[0],s=d[1],r=d[2],l=(1-Math.abs(2*r-1))*s,c=l*(1-Math.abs(i/60%2-1)),u=r-l/2;switch(Math.floor(i/60)){case 0:t[0]=l+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=l+u,t[2]=u;break;case 2:t[0]=u,t[1]=l+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=l+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=l+u;break;case 5:case 6:t[0]=l+u,t[1]=u,t[2]=c+u;break}}function om(d){return d<=.03928?d/12.92:((d+.055)/1.055)**2.4}function cm(d,t,i){uh(d,i),i.map(om);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];uh(t,i),i.map(om);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const um=new Map;function JA(d,t){const i=d[0]+d[1]*256+d[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=um.get(i);if(s)return s;const r=new Float32Array(9),l=r.subarray(0,3),c=r.subarray(3,6);lm(d,c);const u=r.subarray(6,9);lm(t,u);const h=u[2]<.5,f=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),cm(c,u,l)<f){let g,y;h?(g=c[2],y=1):(g=0,y=c[2]);const b=.005;for(;y-g>b;){const A=c[2]=(g+y)/2;h===cm(c,u,l)<f?g=A:y=A}c[2]=h?y:g}return uh(c,l),s=nt.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),um.set(i,s),s}function Zm({html:d,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof d=="string"){const l=document.createElement("p");l.dir=t||"auto";const c=d.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const f=c[u];l.append(document.createTextNode(f)),u<h-1&&l.append(document.createElement("br"))}r.append(l)}else Wm.render({xfaHtml:d,div:r,intent:"richText"});r.firstChild.classList.add("richText",i),s.append(r)}function Jm(d){const t=new Path2D;if(!d)return t;for(let i=0,s=d.length;i<s;)switch(d[i++]){case nr.moveTo:t.moveTo(d[i++],d[i++]);break;case nr.lineTo:t.lineTo(d[i++],d[i++]);break;case nr.curveTo:t.bezierCurveTo(d[i++],d[i++],d[i++],d[i++],d[i++],d[i++]);break;case nr.quadraticCurveTo:t.quadraticCurveTo(d[i++],d[i++],d[i++],d[i++]);break;case nr.closePath:t.closePath();break;default:pt(`Unrecognized drawing path operator: ${d[i-1]}`);break}return t}class hr{#t=null;#e=null;#n;#i=null;#r=null;#a=null;#s=null;#l=null;static#c=null;constructor(t){this.#n=t,hr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",di,{signal:i}),t.addEventListener("pointerdown",hr.#o,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:l}=t,c=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#o(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,te(t)}#h(t){this.#n._focusEventsAllowed=!0,te(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",di,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",hr.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#r=t}addComment(t,i=null){if(this.#a)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#s=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#l=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){switch(t){case"comment":this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null;break}}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#l&&(this.#l.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class tS{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",di,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,i){let s=0,r=0;for(const l of t){const c=l.y+l.height;if(c<s)continue;const u=l.x+(i?l.width:0);if(c>s){r=u,s=c;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,l]=this.#r(i,s),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,i,s,r){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",i);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(l.addEventListener("contextmenu",di,{signal:u}),l.addEventListener("click",r,{signal:u})),this.#t.append(l)}}function t0(d,t,i){for(const s of i)t.addEventListener(s,d[s].bind(d))}class kt{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(kt.#e||=new Set).add(t)}static setPointer(t,i){kt.#t||=i,kt.#i??=t}static setTimeStamp(t){kt.#n=t}static isSamePointerId(t){return kt.#t===t}static isSamePointerIdOrRemove(t){return kt.#t===t?!0:(kt.#e?.delete(t),!1)}static isSamePointerType(t){return kt.#i===t}static isInitializedAndDifferentPointerType(t){return kt.#i!==null&&!kt.isSamePointerType(t)}static isSameTimeStamp(t){return kt.#n===t}static isUsingMultiplePointers(){return kt.#e?.size>=1}static clearPointerType(){kt.#i=null}static clearPointerIds(){kt.#t=NaN,kt.#e=null}static clearTimeStamp(){kt.#n=NaN}}class eS{#t=0;get id(){return`${fr}${this.#t++}`}}class Th{#t=Km();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return yt(this,"_isSVGFittingCanvas",l)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await wr(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const l=Th._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((f,g)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},c.onload=async()=>{const y=s.svgUrl=c.result;u.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=g});c.readAsDataURL(r),await h}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){pt(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:l}=t;return this.#i(`${i}_${s}_${r}_${l}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class iS{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:i,post:s,type:l};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(c&&this.#t[this.#i].type===l){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class xr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=_e.platform;for(const[s,r,l={}]of t)for(const c of s){const u=c.startsWith("mac+");i&&u?(this.callbacks.set(c.slice(4),{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1))):!i&&!u&&(this.callbacks.set(c,{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:l=!1,args:c=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...c,i)(),l||te(i))}}class Mh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return KA(t),yt(this,"_colors",t)}convert(t){const i=_r(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((l,c)=>l===i[c]))return Mh._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?nt.makeHexColor(...i):t}}class Ln{#t=new AbortController;#e=null;#n=null;#i=new Map;#r=new Map;#a=null;#s=null;#l=null;#c=new iS;#o=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#x=null;#E=null;#S=null;#T=null;#A=!1;#_=null;#D=new eS;#M=!1;#R=!1;#z=!1;#L=null;#k=null;#F=null;#B=null;#q=null;#C=gt.NONE;#w=new Set;#O=null;#U=null;#I=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#P=null;#V=null;#Z=null;#J=null;#H=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ln.prototype,i=c=>c.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return yt(this,"_keyboardManager",new xr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:i}]]))}constructor(t,i,s,r,l,c,u,h,f,g,y,b,A,w,S,x){const E=this._signal=this.#t.signal;this.#V=t,this.#Z=i,this.#J=s,this.#a=r,this.#o=l,this.#U=c,this.#X=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#R=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#R=!1},{capture:!0,signal:E}),this.#rt(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#x=h.filterFactory,this.#I=f,this.#T=g||null,this.#y=y,this.#v=b,this.#b=A,this.#q=w||null,this.viewParameters={realScale:sa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=x!==!1,l?.setSidebarUiManager(this)}destroy(){this.#H?.resolve(),this.#H=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#i.clear(),this.#p.clear(),this.#B?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#a?.destroy(),this.#o?.destroy(),this.#U?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#E&&(clearTimeout(this.#E),this.#E=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return yt(this,"hcmFilter",this.#I?this.#x.addHCMFilter(this.#I.foreground,this.#I.background):"none")}get direction(){return yt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return yt(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return yt(this,"highlightColors",null);const i=new Map,s=!!this.#I;for(const[r,l]of t){const c=r.endsWith("_HCM");if(s&&c){i.set(r.replace("_HCM",""),l);continue}!s&&!c&&i.set(r,l)}return yt(this,"highlightColors",i)}get highlightColorNames(){return yt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}hasCommentManager(){return!!this.#o}editComment(t,i,s,r){this.#o?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#r.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#o?.updateComment(t.getData())}updatePopupColor(t){this.#o?.updatePopupColor(t)}removeComment(t){this.#o?.removeComments([t.uid])}toggleComment(t,i,s=void 0){this.#o?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#o?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#o?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=i;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,i){for(const s of this.#r.values()){const{x:r,y:l,width:c,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+c&&i>=l&&i<=l+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*sa.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:l,focusNode:c,focusOffset:u}=s,h=s.toString(),g=this.#W(s).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;s.empty();const b=this.#tt(g),A=this.#C===gt.NONE,w=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:l,focusNode:c,focusOffset:u,text:h});A&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(A){this.switchToMode(gt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#W(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#_||=new tS(this),this.#_.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${fr}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#_?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#O)return;const r=this.#W(t).closest(".textLayer");if(!r){this.#O&&(this.#_?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#O=i,this.#N({hasSelectedText:!0}),!(this.#C!==gt.HIGHLIGHT&&this.#C!==gt.NONE)&&(this.#C===gt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#C===gt.HIGHLIGHT?this.#tt(r):null;if(l?.toggleDrawing(),this.#R){const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else l?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#C===gt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#lt(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ot(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#w)if(i.div.contains(t)){this.#k=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,i]=this.#k;this.#k=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#L)return;this.#L=new AbortController;const t=this.combinedSignal(this.#L);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#L?.abort(),this.#L=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#w){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const l of i.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){pt(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const h of s){const f=await r.deserialize(h);if(!f)return;l.push(f)}const c=()=>{for(const h of l)this.#it(h);this.#nt(l)},u=()=>{for(const h of l)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(l){pt(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==gt.NONE&&!this.isEditorHandlingKeyboard&&Ln._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(t){Object.entries(t).some(([s,r])=>this.#$[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#C===gt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Mt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#lt(),this.#ut(),this.#N({isEditing:this.#C!==gt.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ot(),this.#ht(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,l=!1){if(this.#C!==t&&!(this.#H&&(await this.#H.promise,!this.#H))){if(this.#H=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===gt.POPUP&&this.#o?.hideSidebar(),this.#o?.destroyPopup(),this.#C=t,t===gt.NONE){this.setEditingState(!1),this.#pt();for(const c of this.#i.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#H.resolve();return}for(const c of this.#i.values())c.addStandaloneCommentButton();t===gt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const c of this.#r.values())c.updateMode(t);if(t===gt.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const c=new Set,u=[];for(const h of this.#i.values()){const{annotationElementId:f,hasComment:g,deleted:y}=h;f&&c.add(f),g&&!y&&u.push(h.getData())}for(const h of this.#n){const{id:f,popupRef:g,contentsObj:y}=h;g&&y?.str&&!c.has(f)&&!this.#m.has(f)&&u.push(h)}this.#o?.showSidebar(u)}if(!i){s&&this.addNewEditorFromKeyboard(),this.#H.resolve();return}for(const c of this.#i.values())c.uid===i?(this.setSelected(c),l?c.editComment():r?c.enterInEditMode():c.focus()):c.unselect();this.#H.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(i);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const l of this.#i.values())l.editorType===t&&l.show(i);(this.#Y?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[Mt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const i of this.#r.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#r.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#r.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#E&&clearTimeout(this.#E),this.#E=setTimeout(()=>{this.focusMainContainer(),this.#E=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#r.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#w)i!==t&&i.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#N({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(t){this.#c.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(t){this.#c.cleanType(t)}#Q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#w],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const l of i)l.remove()},r=()=>{for(const l of i)this.#it(l)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#w)i.unselect();this.#w.clear();for(const i of t)i.isEmpty()||(this.#w.add(i),i.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==gt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=i;const[r,l]=this.#j,c=[...this.#w],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(r,l),h.translationDone())},undo:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(-r,-l),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(t,i),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#w)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let i=!1;for(const[{x:r,y:l,pageIndex:c},u]of t)u.newX=r,u.newY=l,u.newPageIndex=c,i||=r!==u.savedX||l!==u.savedY||c!==u.savedPageIndex;if(!i)return!1;const s=(r,l,c,u)=>{if(this.#i.has(r.id)){const h=this.#r.get(u);h?r._setParentAndPosition(h,l,c):(r.pageIndex=u,r.x=l,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:c,newPageIndex:u}]of t)s(r,l,c,u)},undo:()=>{for(const[r,{savedX:l,savedY:c,savedPageIndex:u}]of t)s(r,l,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#g)for(const s of this.#g.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==gt.NONE}get imageManager(){return yt(this,"imageManager",new Th)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,g=i.rangeCount;f<g;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:r,width:l,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,g,y,b)=>({x:(g-r)/c,y:1-(f+y-s)/l,width:b/c,height:y/l});break;case"180":u=(f,g,y,b)=>({x:1-(f+y-s)/l,y:1-(g+b-r)/c,width:y/l,height:b/c});break;case"270":u=(f,g,y,b)=>({x:1-(g+b-r)/c,y:(f-s)/l,width:b/c,height:y/l});break;default:u=(f,g,y,b)=>({x:(f-s)/l,y:(g-r)/c,width:y/l,height:b/c});break}const h=[];for(let f=0,g=i.rangeCount;f<g;f++){const y=i.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:A,width:w,height:S}of y.getClientRects())w===0||S===0||h.push(u(b,A,w,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#l||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const i=this.#l?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#C===gt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#B?.get(t);r&&(r.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Ci{#t=null;#e=!1;#n=null;#i=null;#r=null;#a=null;#s=!1;#l=null;#c=null;#o=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Ci.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ci._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ci.#f.missing),i.setAttribute("data-l10n-id",Ci.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",di,{signal:s}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#s=!0,r(l))},{signal:s}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}async setGuessedText(t){this.#t===null&&(this.#o=t,this.#d=await Ci._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#l?.remove(),this.#l=null;return}if(!this.#l){const i=this.#l=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#l.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#o===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#o,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:l=!1}){s&&(this.#o=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(l||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#l?.remove(),this.#l=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ci.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Ci.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#r;if(!i){this.#r=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:l})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class Xl{#t=null;#e=null;#n=!1;#i=null;#r=null;#a=null;#s=null;#l=null;#c=!1;#o=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#o)return this.#o;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:l,width:c,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/c,(i+s-l)/u]}set commentPopupPositionInLayer(t){this.#o=t}hasDefaultPopupPosition(){return this.#o===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",di,{signal:s}),i&&(t.addEventListener("focusin",l=>{this.#i._focusEventsAllowed=!1,te(l)},{capture:!0,signal:s}),t.addEventListener("focusout",l=>{this.#i._focusEventsAllowed=!0,te(l)},{capture:!0,signal:s})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#n=!0,r(l))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:g,height:y,x:b,y:A}=this.#i;s=b+s*g,r=A+r*y}const l=this.#i.parent.boundingClientRect,{x:c,y:u,width:h,height:f}=l;this.#i._uiManager.editComment(this.#i,c+s*h,u+r*f,{...t,parentDimensions:l})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#l,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#l=new Date,this.#c=!1}setInitialText(t,i=null){this.#r=t,this.data=t,this.#l=null,this.#a=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#l=null,this.#i=null,this.#n=!1,this.#c=!1}}class vo{#t;#e=!1;#n=null;#i;#r;#a;#s;#l=null;#c;#o=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#r=r,this.#a=l,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Mi.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#l)return;const r=this.#l=new AbortController,l=AbortSignal.any([this.#c,r.signal]),c=this.#t,u={capture:!0,signal:l,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#l?.abort(),this.#l=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(te(f),h(f))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),l=this.#t,c={signal:r,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#g.bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",te,c),l.addEventListener("pointermove",te,c),l.addEventListener("pointercancel",te,c),l.addEventListener("pointerup",te,c),this.#r?.()}if(te(t),t.touches.length!==2||this.#n?.()){this.#o=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#o={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#o||t.touches.length!==2)return;te(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:l}=i,{screenX:c,screenY:u}=s,h=this.#o,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:b}=h,A=y-f,w=b-g,S=c-r,x=u-l,E=Math.hypot(S,x)||1,T=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(T-E)<=vo.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=l,h.touch1X=c,h.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(r+c)/2,(l+u)/2];this.#a?.(C,T,E)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#o&&(te(t),this.#o=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#l?.abort(),this.#l=null}}class rt{#t=null;#e=null;#n=null;#i=null;#r=null;#a=!1;#s=null;#l="";#c=null;#o=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#x=0;#E=0;#S=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#_=rt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Mh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=rt.prototype._resizeWithKeyboard,i=Ln.TRANSLATE_SMALL,s=Ln.TRANSLATE_BIG;return yt(this,"_resizerKeyboardManager",new xr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],rt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[l,c];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return yt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new nS({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(rt._l10n??=t,rt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),rt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);rt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){Gt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[l,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/l,this.y=(i+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#D([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#D(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=i/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,f]=this.getBaseTranslation();c+=h,u+=f;const{style:g}=s;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=rt,r=s/t,l=s/i;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:l,y:c,width:u,height:h}=this;if(u*=s,h*=r,l*=s,c*=r,this._mustFixPosition)switch(t){case 0:l=Re(l,0,s-u),c=Re(c,0,r-h);break;case 90:l=Re(l,0,s-h),c=Re(c,u,r);break;case 180:l=Re(l,u,s),c=Re(c,h,r);break;case 270:l=Re(l,h,s),c=Re(c,0,r-u);break}this.x=l/=s,this.y=c/=r;const[f,g]=this.getBaseTranslation();l+=f,c+=g,i.left=`${(100*l).toFixed(2)}%`,i.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return rt.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return rt.#M(t,i,360-this.parentRotation)}#R(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#L.bind(this,s),{signal:i}),r.addEventListener("contextmenu",di,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#L(t,i){i.preventDefault();const{isMac:s}=_e.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#o=[i.screenX,i.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",te,{passive:!1,signal:c}),window.addEventListener("contextmenu",di,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#k(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const l=this.x,c=this.y,u=this.width,h=this.height;l===t&&c===i&&u===s&&h===r||this.addCommands({cmd:this.#k.bind(this,l,c,u,h),undo:this.#k.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,r]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,f=rt.MIN_SIZE/s,g=rt.MIN_SIZE/r,y=this.#R(this.rotation),b=(B,V)=>[y[0]*B+y[2]*V,y[1]*B+y[3]*V],A=this.#R(360-this.rotation),w=(B,V)=>[A[0]*B+A[2]*V,A[1]*B+A[3]*V];let S,x,E=!1,T=!1;switch(t){case"topLeft":E=!0,S=(B,V)=>[0,0],x=(B,V)=>[B,V];break;case"topMiddle":S=(B,V)=>[B/2,0],x=(B,V)=>[B/2,V];break;case"topRight":E=!0,S=(B,V)=>[B,0],x=(B,V)=>[0,V];break;case"middleRight":T=!0,S=(B,V)=>[B,V/2],x=(B,V)=>[0,V/2];break;case"bottomRight":E=!0,S=(B,V)=>[B,V],x=(B,V)=>[0,0];break;case"bottomMiddle":S=(B,V)=>[B/2,V],x=(B,V)=>[B/2,0];break;case"bottomLeft":E=!0,S=(B,V)=>[0,V],x=(B,V)=>[B,0];break;case"middleLeft":T=!0,S=(B,V)=>[0,V/2],x=(B,V)=>[B,V/2];break}const C=S(u,h),L=x(u,h);let N=b(...L);const O=rt._round(l+N[0]),P=rt._round(c+N[1]);let X=1,K=1,J,Z;if(i.fromKeyboard)({deltaX:J,deltaY:Z}=i);else{const{screenX:B,screenY:V}=i,[W,dt]=this.#o;[J,Z]=this.screenToPageTranslation(B-W,V-dt),this.#o[0]=B,this.#o[1]=V}if([J,Z]=w(J/s,Z/r),E){const B=Math.hypot(u,h);X=K=Math.max(Math.min(Math.hypot(L[0]-C[0]-J,L[1]-C[1]-Z)/B,1/u,1/h),f/u,g/h)}else T?X=Re(Math.abs(L[0]-C[0]-J),f,1)/u:K=Re(Math.abs(L[1]-C[1]-Z),g,1)/h;const ht=rt._round(u*X),At=rt._round(h*K);N=b(...x(ht,At));const vt=O-N[0],St=P-N[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ht,this.height=At,this.x=vt,this.y=St,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new hr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Ci.initialize(rt._l10n),this.#n=new Ci(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Xl(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#i.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Xl(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new Xl(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Xl(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,u=c+l+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#I();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),t0(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new vo({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,i,s){let l=.7*(s/i)+1-.7;if(l===1)return;const c=this.#R(this.rotation),u=(O,P)=>[c[0]*O+c[2]*P,c[1]*O+c[3]*P],[h,f]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,w=rt.MIN_SIZE/h,S=rt.MIN_SIZE/f;l=Math.max(Math.min(l,1/b,1/A),w/b,S/A);const x=rt._round(b*l),E=rt._round(A*l);if(x===b&&E===A)return;this.#u||=[g,y,b,A];const T=u(b/2,A/2),C=rt._round(g+T[0]),L=rt._round(y+T[1]),N=u(x/2,E/2);this.x=C-N[0],this.y=L-N[1],this.width=x,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:i}=_e.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#U(t);return}this.#O(t)}#O(t){const{isMac:i}=_e.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:l},u=f=>{r.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#O(f),s&&this._onStopDragging()};i&&(this.#x=t.clientX,this.#E=t.clientY,this.#s=t.pointerId,this.#l=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=f;if(b!==this.#s){te(f);return}const[A,w]=this.screenToPageTranslation(g-this.#x,y-this.#E);this.#x=g,this.#E=y,this._uiManager.dragSelectedEditors(A,w)},c),window.addEventListener("touchmove",te,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#l&&(this.#T||f.isPrimary)&&u(f),te(f)},c));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}te(f)};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[l,c]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,g=i/r,y=this.x*l,b=this.y*c,A=this.width*l,w=this.height*c;switch(s){case 0:return[y+f+u,c-b-g-w+h,y+f+A+u,c-b-g+h];case 90:return[y+g+u,c-b+f+h,y+g+w+u,c-b+f+A+h];case 180:return[y-f-A+u,c-b+g+h,y-f+u,c-b+g+w+h];case 270:return[y-g-w+u,c-b-f-A+h,y-g+u,c-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,l,c]=t,u=l-s,h=c-r;switch(this.rotation){case 0:return[s,i-c,u,h];case 90:return[s,i-r,h,u];case 180:return[l,i-r,u,h];case 270:return[l,i-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:l,richText:c},uid:u,pageIndex:h,creationDate:f,modificationDate:g}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!l,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return i<c&&r>0&&t<l&&s>0}#I(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#I()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[l,c]=r.pageDimensions,[u,h,f,g]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/l,r.y=h/c,r.width=f/l,r.height=g/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#T?.destroy(),this.#T=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,l,c]=this.getPDFRect();return[rt._round(s+(l-s)*t),rt._round(r+(c-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const c=this.#Y.bind(this),u=this.#X.bind(this),h=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#$.bind(this,g),{signal:h}),f.setAttribute("data-l10n-id",rt._l10nResizer[g])}}const s=this.#e[0];let r=0;for(const c of i){if(c===s)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==r){if(l<r)for(let u=0;u<r-l;u++)this.#c.append(this.#c.firstChild);else if(l>r)for(let u=0;u<l-r;u++)this.#c.firstChild.before(this.#c.lastChild);let c=0;for(const u of i){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",rt._l10nResizer[f])}}this.#j(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){rt._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#m=this.#v?t:""}#j(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#P(){this.#v=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},rt._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class nS extends rt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const hm=3285377520,ci=4294901760,_i=65535;class e0{constructor(t){this.h1=t?t&4294967295:hm,this.h2=t?t&4294967295:hm}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,x=t.length;S<x;S++){const E=t.charCodeAt(S);E<=255?i[s++]=E:(i[s++]=E>>>8,i[s++]=E&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,l=s-r*4,c=new Uint32Array(i.buffer,0,r);let u=0,h=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&_i,w=b&_i;for(let S=0;S<r;S++)S&1?(u=c[S],u=u*y&ci|u*A&_i,u=u<<15|u>>>17,u=u*b&ci|u*w&_i,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=c[S],h=h*y&ci|h*A&_i,h=h<<15|h>>>17,h=h*b&ci|h*w&_i,g^=h,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,l){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*y&ci|u*A&_i,u=u<<15|u>>>17,u=u*b&ci|u*w&_i,r&1?f^=u:g^=u}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&ci|t*36045&_i,i=i*4283543511&ci|((i<<16|t>>>16)*2950163797&ci)>>>16,t^=i>>>1,t=t*444984403&ci|t*60499&_i,i=i*3301882366&ci|((i<<16|t>>>16)*3120437893&ci)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const hh=Object.freeze({map:null,hash:"",transfer:void 0});class Rh{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof rt&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof rt)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[l,c]of Object.entries(i))s[l]!==c&&(r=!0,s[l]=c);else r=!0,this.#i.set(t,i);r&&this.#r(),i instanceof rt&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new i0(this)}get serializable(){if(this.#i.size===0)return hh;const t=new Map,i=new e0,s=[],r=Object.create(null);let l=!1;for(const[c,u]of this.#i){const h=u instanceof rt?u.serialize(!1,r):u;h&&(t.set(c,h),i.update(`${c}:${JSON.stringify(h)}`),l||=!!h.bitmap)}if(l)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:hh}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const l of this.#i.values()){if(!(l instanceof rt)){l.popup&&(l.popup.deleted?r+=1:s+=1);continue}l.isCommentDeleted?r+=1:l.hasEditedComment&&(s+=1);const c=l.telemetryFinalData;if(!c)continue;const{type:u}=c;i.has(u)||i.set(u,Object.getPrototypeOf(l).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,g]of Object.entries(c)){if(f==="type")continue;let y=h.get(f);y||(y=new Map,h.set(f,y));const b=y.get(g)??0;y.set(g,b+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[l,c]of i)t[l]=c.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class i0 extends Rh{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,l=structuredClone(i,r?{transfer:r}:null);this.#t={map:l,hash:s,transfer:r}}get print(){Gt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return yt(this,"modifiedIds",{ids:new Set,hash:""})}}class sS{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Rt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:c}=t,u=new FontFace(r,l,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Gt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw pt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return yt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return yt(this,"isSyncFontLoadingSupported",Me||_e.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Rt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return yt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(L,N){return L.charCodeAt(N)<<24|L.charCodeAt(N+1)<<16|L.charCodeAt(N+2)<<8|L.charCodeAt(N+3)&255}function r(L,N,O,P){const X=L.substring(0,N),K=L.substring(N+O);return X+P+K}let l,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function g(L,N){if(++f>30){pt("Load test font never loaded."),N();return}if(h.font="30px "+L,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(g.bind(null,L,N))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const w=16,S=1482184792;let x=s(b,w);for(l=0,c=y.length-3;l<c;l+=4)x=x-S+s(y,l)|0;l<y.length&&(x=x-S+s(y+"XXX",l)|0),b=r(b,w,4,FA(x));const E=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${y}";src:${E}}`;this.insertRule(T);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const L of[t.loadedName,y]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=L,C.append(N)}this._document.body.append(C),g(y,()=>{C.remove(),i.complete()})}}class aS{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Qm(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(c){pt(`getPathGenerator - ignoring character: "${c}".`)}const l=Jm(r);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=l}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class Js{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const f of Js.strings){const g=i.encode(t[f]);s[f]=g,r+=4+g.length}const l=new ArrayBuffer(r),c=new Uint8Array(l),u=new DataView(l);let h=0;for(const f of Js.strings){const g=s[f],y=g.length;u.setUint32(h,y),c.set(g,h+4),h+=4+y}return Rt(h===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Rt(t<Js.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class ta{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const b of ta.strings){const A=i.encode(t[b]);s[b]=A,r+=4+A.length}r+=4;let l,c,u=1+r;t.style&&(l=i.encode(t.style.style),c=i.encode(t.style.weight),u+=4+l.length+4+c.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),g=new DataView(h);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,r=0;for(const b of ta.strings){const A=s[b],w=A.length;r+=4+w,g.setUint32(y,w),f.set(A,y+4),y+=4+w}return g.setUint32(y-r-4,r),t.style&&(g.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length,g.setUint32(y,c.length),f.set(c,y+4),y+=4+c.length),Rt(y<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Rt(t<ta.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),l=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:l}}}class Ht{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#r=this.#i+1+6;#a;#s;#l;constructor({data:t,extra:i}){this.#a=t,this.#s=new TextDecoder,this.#l=new DataView(this.#a),i&&Object.assign(this,i)}#c(t){Rt(t<Ht.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#l.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#o(t){return Rt(t<Ht.numbers.length,"Invalid number index"),this.#l.getFloat64(Ht.#t+t*8)}get ascent(){return this.#o(0)}get defaultWidth(){return this.#o(1)}get descent(){return this.#o(2)}get bbox(){let t=Ht.#e;if(this.#l.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#l.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Ht.#n;if(this.#l.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#l.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Ht.#i;if(this.#l.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#l.getInt16(t,!0)),t+=2;return s}#d(t){Rt(t<Ht.strings.length,"Invalid string index");let i=Ht.#r+4;for(let l=0;l<t;l++)i+=this.#l.getUint32(i)+4;const s=this.#l.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,i+4,s)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Ht.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);t+=4+s;const r=this.#l.getUint32(t);t+=4+r;const l=this.#l.getUint32(t);if(l!==0)return new Uint8Array(this.#a,t+4,l)}clearData(){let t=Ht.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);t+=4+s;const r=this.#l.getUint32(t);t+=4+r;const l=this.#l.getUint32(t);new Uint8Array(this.#a,t+4,l).fill(0),this.#l.setUint32(t,0)}get cssFontInfo(){let t=Ht.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);t+=4+s;const r=this.#l.getUint32(t);if(r===0)return null;const l=new Uint8Array(r);return l.set(new Uint8Array(this.#a,t+4,r)),new Js(l.buffer)}get systemFontInfo(){let t=Ht.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#a,t+4,s)),new ta(r.buffer)}static write(t){const i=t.systemFontInfo?ta.write(t.systemFontInfo):null,s=t.cssFontInfo?Js.write(t.cssFontInfo):null,r=new TextEncoder,l={};let c=0;for(const S of Ht.strings)l[S]=r.encode(t[S]),c+=4+l[S].length;const u=Ht.#r+4+c+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),g=new DataView(h);let y=0;const b=Ht.bools.length;let A=0,w=0;for(let S=0;S<b;S++){const x=t[Ht.bools[S]];A|=(x===void 0?0:x?2:1)<<w,w+=2,(w===8||S===b-1)&&(g.setUint8(y++,A),A=0,w=0)}Rt(y===Ht.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Ht.numbers)g.setFloat64(y,t[S]),y+=8;if(Rt(y===Ht.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Rt(y===Ht.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Rt(y===Ht.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Rt(y===Ht.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Ht.#r,0),y+=4;for(const S of Ht.strings){const x=l[S],E=x.length;g.setUint32(y,E),f.set(x,y+4),y+=4+E}if(g.setUint32(Ht.#r,y-Ht.#r-4),!i)g.setUint32(y,0),y+=4;else{const S=i.byteLength;g.setUint32(y,S),Rt(y+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}if(!s)g.setUint32(y,0),y+=4;else{const S=s.byteLength;g.setUint32(y,S),Rt(y+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Rt(y<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(y)}}class pe{static#t=0;static#e=1;static#n=2;static#i=3;static#r=4;static#a=8;static#s=12;static#l=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,r=[],l=[],c=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],c=t[3],i===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,h=t[1],r=t[2],l=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(r.length/2),y=Math.floor(l.length/3),b=c.length,A=u.length;let w=0;for(const N of u)w+=1,w=Math.ceil(w/4)*4,w+=4+N.coords.length*4,w+=4+N.colors.length*4,N.verticesPerRow!==void 0&&(w+=4);const S=20+g*8+y*3+b*8+(s?16:0)+(f?3:0)+w,x=new ArrayBuffer(S),E=new DataView(x),T=new Uint8Array(x);E.setUint8(pe.#t,i),E.setUint8(pe.#e,s?1:0),E.setUint8(pe.#n,f?1:0),E.setUint8(pe.#i,h),E.setUint32(pe.#r,g,!0),E.setUint32(pe.#a,y,!0),E.setUint32(pe.#s,b,!0),E.setUint32(pe.#l,A,!0);let C=20;new Float32Array(x,C,g*2).set(r),C+=g*8,T.set(l,C),C+=y*3;for(const[N,O]of c)E.setFloat32(C,N,!0),C+=4,E.setUint32(C,parseInt(O.slice(1),16),!0),C+=4;if(s)for(const N of s)E.setFloat32(C,N,!0),C+=4;f&&(T.set(f,C),C+=3);for(let N=0;N<u.length;N++){const O=u[N];E.setUint8(C,O.type),C+=1,C=Math.ceil(C/4)*4,E.setUint32(C,O.coords.length,!0),C+=4,new Int32Array(x,C,O.coords.length).set(O.coords),C+=O.coords.length*4,E.setUint32(C,O.colors.length,!0),C+=4,new Int32Array(x,C,O.colors.length).set(O.colors),C+=O.colors.length*4,O.verticesPerRow!==void 0&&(E.setUint32(C,O.verticesPerRow,!0),C+=4)}return x}getIR(){const t=this.view,i=this.data[pe.#t],s=!!this.data[pe.#e],r=!!this.data[pe.#n],l=t.getUint32(pe.#r,!0),c=t.getUint32(pe.#a,!0),u=t.getUint32(pe.#s,!0),h=t.getUint32(pe.#l,!0);let f=20;const g=new Float32Array(this.buffer,f,l*2);f+=l*8;const y=new Uint8Array(this.buffer,f,c*3);f+=c*3;const b=[];for(let x=0;x<u;++x){const E=t.getFloat32(f,!0);f+=4;const T=t.getUint32(f,!0);f+=4,b.push([E,`#${T.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let x=0;x<4;++x)A.push(t.getFloat32(f,!0)),f+=4}let w=null;r&&(w=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let x=0;x<h;++x){const E=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const T=t.getUint32(f,!0);f+=4;const C=new Int32Array(this.buffer,f,T);f+=T*4;const L=t.getUint32(f,!0);f+=4;const N=new Int32Array(this.buffer,f,L);f+=L*4;const O={type:E,coords:C,colors:N};E===rh.LATTICE&&(O.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(O)}if(i===1)return["RadialAxial","axial",A,b,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",A,b,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(i===3){const x=this.data[pe.#i];let E=null;if(g.length>0){let T=g[0],C=g[0],L=g[1],N=g[1];for(let O=0;O<g.length;O+=2){const P=g[O],X=g[O+1];T=T>P?P:T,L=L>X?X:L,C=C<P?P:C,N=N<X?X:N}E=[T,L,C,N]}return["Mesh",x,g,y,S,E,A,w]}throw new Error(`Unsupported pattern kind: ${i}`)}}function rS(d){if(d instanceof URL)return d.href;if(typeof d=="string"){if(Me)return d;const t=URL.parse(d,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function lS(d){if(Me&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return Sr(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d?.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Yl(d){if(typeof d!="string")return null;if(d.endsWith("/"))return d;throw new Error(`Invalid factory url: "${d}" must include trailing slash.`)}const dh=d=>typeof d=="object"&&Number.isInteger(d?.num)&&d.num>=0&&Number.isInteger(d?.gen)&&d.gen>=0,oS=d=>typeof d=="object"&&typeof d?.name=="string",cS=GA.bind(null,dh,oS);class uS{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:l}=s;if(l.aborted){pt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,i);r=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const $l={DATA:1,ERROR:2},ce={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function dm(){}function Ue(d){if(d instanceof Nn||d instanceof lh||d instanceof sm||d instanceof oo||d instanceof Ku)return d;switch(d instanceof Error||typeof d=="object"&&d!==null||Gt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new Nn(d.message);case"InvalidPDFException":return new lh(d.message);case"PasswordException":return new sm(d.message,d.code);case"ResponseException":return new oo(d.message,d.status,d.missing);case"UnknownErrorException":return new Ku(d.message,d.details)}return new Ku(d.message,d.toString())}class cr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===$l.DATA)r.resolve(t.data);else if(t.callback===$l.ERROR)r.reject(Ue(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(i,t.data).then(function(c){l.postMessage({sourceName:s,targetName:r,callback:$l.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:s,targetName:r,callback:$l.ERROR,callbackId:t.callbackId,reason:Ue(c)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,i,s,r){const l=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[l]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:t,streamId:l,data:i,desiredSize:f.desiredSize},r),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[l].pullCall=g,h.postMessage({sourceName:c,targetName:u,stream:ce.PULL,streamId:l,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Rt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[l].cancelCall=g,this.streamControllers[l].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:ce.CANCEL,streamId:l,reason:Ue(f)}),g.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,c=this,u=this.actionHandler[t.action],h={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:r,stream:ce.ENQUEUE,streamId:i,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:ce.CLOSE,streamId:i}),delete c.streamSinks[i])},error(f){Rt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:ce.ERROR,streamId:i,reason:Ue(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[i]=h,Promise.try(u,t.data,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ce.START_COMPLETE,streamId:i,success:!0})},function(f){l.postMessage({sourceName:s,targetName:r,stream:ce.START_COMPLETE,streamId:i,reason:Ue(f)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,c=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ce.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Ue(t.reason));break;case ce.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Ue(t.reason));break;case ce.PULL:if(!u){l.postMessage({sourceName:s,targetName:r,stream:ce.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||dm).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ce.PULL_COMPLETE,streamId:i,success:!0})},function(f){l.postMessage({sourceName:s,targetName:r,stream:ce.PULL_COMPLETE,streamId:i,reason:Ue(f)})});break;case ce.ENQUEUE:if(Rt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ce.CLOSE:if(Rt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,i);break;case ce.ERROR:Rt(c,"error should have stream controller"),c.controller.error(Ue(t.reason)),this.#r(c,i);break;case ce.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Ue(t.reason)),this.#r(c,i);break;case ce.CANCEL:if(!u)break;const h=Ue(t.reason);Promise.try(u.onCancel||dm,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ce.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){l.postMessage({sourceName:s,targetName:r,stream:ce.CANCEL_COMPLETE,streamId:i,reason:Ue(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#r(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class n0{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){Gt("Abstract method `_createCanvas` called.")}}class hS extends n0{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class s0{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class fm extends s0{async _fetch(t){const i=await wr(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Sr(i)}}class a0{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,l){return"none"}destroy(t=!1){}}class dS extends a0{#t;#e;#n;#i;#r;#a;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#r=i}get#l(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#o(){if(!this.#n){const t=this.#r.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#r.createElementNS(Ki,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(Ki,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=h[y]/255;const g=f.join(",");return[g,g,g]}const[i,s,r]=t,l=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)l[h]=i[h]/255,c[h]=s[h]/255,u[h]=r[h]/255;return[l.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#r.URL;i!==this.#r.baseURI&&(bo(i)?pt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Ym(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#l.get(t);if(i)return i;const[s,r,l]=this.#d(t),c=t.length===1?s:`${s}${r}${l}`;if(i=this.#l.get(c),i)return this.#l.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,h=this.#h(u);this.#l.set(t,h),this.#l.set(c,h);const f=this.#g(u);return this.#p(s,r,l,f),h}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let l=this.#c.get(r);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#c.set(r,l)),!t||!i))return l.url;const c=this.#v(t);t=nt.makeHexColor(...c);const u=this.#v(i);if(i=nt.makeHexColor(...u),this.#o.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return l.url;const h=new Array(256);for(let A=0;A<=255;A++){const w=A/255;h[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=h.join(","),g=`g_${this.#i}_hcm_filter`,y=l.filter=this.#g(g);this.#p(f,f,f,y),this.#m(y);const b=(A,w)=>{const S=c[A]/255,x=u[A]/255,E=new Array(w+1);for(let T=0;T<=w;T++)E[T]=S+T/w*(x-S);return E.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),y),l.url=this.#h(g),l.url}addAlphaFilter(t){let i=this.#l.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#l.get(r),i)return this.#l.set(t,i),i;const l=`g_${this.#i}_alpha_map_${this.#s++}`,c=this.#h(l);this.#l.set(t,c),this.#l.set(r,c);const u=this.#g(l);return this.#y(s,u),c}addLuminosityFilter(t){let i=this.#l.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#l.get(r),i)return this.#l.set(t,i),i;const l=`g_${this.#i}_luminosity_map_${this.#s++}`,c=this.#h(l);this.#l.set(t,c),this.#l.set(r,c);const u=this.#g(l);return this.#f(u),t&&this.#y(s,u),c}addHighlightHCMFilter(t,i,s,r,l){const c=`${i}-${s}-${r}-${l}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[h,f]=[i,s].map(this.#v.bind(this));let g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,A]=[r,l].map(this.#v.bind(this));y<g&&([g,y,b,A]=[y,g,A,b]),this.#o.style.color="";const w=(E,T,C)=>{const L=new Array(256),N=(y-g)/C,O=E/255,P=(T-E)/(255*C);let X=0;for(let K=0;K<=C;K++){const J=Math.round(g+K*N),Z=O+K*P;for(let ht=X;ht<=J;ht++)L[ht]=Z;X=J+1}for(let K=X;K<256;K++)L[K]=L[X-1];return L.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,x=u.filter=this.#g(S);return this.#m(x),this.#p(w(b[0],A[0],5),w(b[1],A[1],5),w(b[2],A[2],5),x),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const i=this.#r.createElementNS(Ki,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#r.createElementNS(Ki,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#r.createElementNS(Ki,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#o.append(i),i}#u(t,i,s){const r=this.#r.createElementNS(Ki,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#p(t,i,s,r){const l=this.#r.createElementNS(Ki,"feComponentTransfer");r.append(l),this.#u(l,"feFuncR",t),this.#u(l,"feFuncG",i),this.#u(l,"feFuncB",s)}#y(t,i){const s=this.#r.createElementNS(Ki,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#o.style.color=t,_r(getComputedStyle(this.#o).getPropertyValue("color"))}}class r0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class pm extends r0{async _fetch(t){const i=await wr(t,"arraybuffer");return new Uint8Array(i)}}class l0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class gm extends l0{async _fetch(t){const i=await wr(t,"arraybuffer");return new Uint8Array(i)}}Me&&pt("Please use the `legacy` build in Node.js environments.");async function Dh(d){const i=await process.getBuiltinModule("fs").promises.readFile(d);return new Uint8Array(i)}class fS extends a0{}class pS extends n0{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class gS extends s0{async _fetch(t){return Dh(t)}}class mS extends r0{async _fetch(t){return Dh(t)}}class yS extends l0{async _fetch(t){return Dh(t)}}const Xs="__forcedDependency",{floor:mm,ceil:ym}=Math;function Kl(d,t,i,s,r,l){d[t*4+0]=Math.min(d[t*4+0],i),d[t*4+1]=Math.min(d[t*4+1],s),d[t*4+2]=Math.max(d[t*4+2],r),d[t*4+3]=Math.max(d[t*4+3],l)}const fh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class bS{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===fh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Ql=(d,t)=>{if(!d)return;let i=d.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},d.set(t,i)),i};class vS{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Xs]:[]};#n=new Map;#i=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#l=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#o=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#y(i),s&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,i){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(fh,i.length)):this.#u.fill(fh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Xs]:{__proto__:this.#e[Xs]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(Ql(this.#p,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(Ql(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const i=this.#r.pop();return i!==void 0&&(Ql(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#a.push(nt.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData(Xs,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#o)this.recordFutureForcedDependency(Xs,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#l[0]=1/0,this.#l[1]=1/0,this.#l[2]=-1/0,this.#l[3]=-1/0),this}recordClipBox(t,i,s,r,l,c){const u=nt.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform()),h=[1/0,1/0,-1/0,-1/0];nt.axialAlignedBoundingBox([s,l,r,c],u,h);const f=nt.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,r,l,c){const u=this.#s;if(u[0]===1/0)return this;const h=nt.multiplyByDOMMatrix(this.#a.at(-1),i.getTransform());if(u[0]===-1/0)return nt.axialAlignedBoundingBox([s,l,r,c],h,this.#l),this;const f=[1/0,1/0,-1/0,-1/0];return nt.axialAlignedBoundingBox([s,l,r,c],h,f),this.#l[0]=Math.min(this.#l[0],Math.max(f[0],u[0])),this.#l[1]=Math.min(this.#l[1],Math.max(f[1],u[1])),this.#l[2]=Math.max(this.#l[2],Math.min(f[2],u[2])),this.#l[3]=Math.max(this.#l[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,l=0,c=0,u){const h=s.bbox;let f,g;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],nt.axialAlignedBoundingBox(h,s.fontMatrix,g),(r!==1||l!==0||c!==0)&&nt.scaleMinMax([r,0,0,-r,l,c],g),f)))return this.recordBBox(t,i,g[0],g[2],g[1],g[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return h&&g&&f===void 0&&(f=g[0]<=l-y.actualBoundingBoxLeft&&g[2]>=l+y.actualBoundingBoxRight&&g[1]<=c-y.actualBoundingBoxAscent&&g[3]>=c+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,g[0],g[2],g[1],g[3]):this.recordBBox(t,i,l-y.actualBoundingBoxLeft,l+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#l[0]=Math.max(0,this.#s[0]),this.#l[1]=Math.max(0,this.#s[1]),this.#l[2]=Math.min(this.#f,this.#s[2]),this.#l[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#o,r=this.#t,l=this.#e;for(const c of i)c in this.#t?s.add(r[c]):c in l&&l[c].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#o.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[Xs]),this.#p){const s=Ql(this.#p,t),{dependencies:r}=s;this.#o.forEach(r.add,r),this.#i.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=mm(this.#l[0]*256/this.#f),r=mm(this.#l[1]*256/this.#m),l=ym(this.#l[2]*256/this.#f),c=ym(this.#l[3]*256/this.#m);Kl(this.#g,t,s,r,l,c);for(const u of this.#o)u!==t&&Kl(this.#g,u,s,r,l,c);for(const u of this.#i)u!==t&&Kl(this.#g,u,s,r,l,c);for(const u of this.#r)u!==t&&Kl(this.#g,u,s,r,l,c);i||(this.#o.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#o);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#l[0]),this.#s[1]=Math.max(this.#s[1],this.#l[1]),this.#s[2]=Math.min(this.#s[2],this.#l[2]),this.#s[3]=Math.min(this.#s[3],this.#l[3]),i||this.#o.clear()),this}_takePendingDependencies(){const t=this.#o;return this.#o=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#o.add(i)}take(){return this.#h.clear(),new bS(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class co{#t;#e;#n;#i=0;#r=0;constructor(t,i,s){if(t instanceof co&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,l,c){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,l,c),this}recordBBox(t,i,s,r,l,c){return this.#n||this.#t.recordBBox(this.#e,i,s,r,l,c),this}recordCharacterBBox(t,i,s,r,l,c,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,l,c,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const ui={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ee={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ph(d,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),d.clip(r)}class Nh{isModifyingCurrentTransform(){return!1}getPattern(){Gt("Abstract method `getPattern` called.")}}class AS extends Nh{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)i.addColorStop(s[0],s[1]);return i}getPattern(t,i,s,r){let l;if(r===Ee.STROKE||r===Ee.FILL){const c=i.current.getClippedPathBoundingBox(r,Kt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,h),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),s=nt.transform(s,[1,0,0,1,c[0],c[1]]),g.transform(...i.baseTransform),this.matrix&&g.transform(...this.matrix),ph(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),l=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);l.setTransform(y)}else ph(t,this._bbox),l=this._createGradient(t);return l}}function Zu(d,t,i,s,r,l,c,u){const h=t.coords,f=t.colors,g=d.data,y=d.width*4;let b;h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=l,l=c,c=b),h[s+1]>h[r+1]&&(b=s,s=r,r=b,b=c,c=u,u=b),h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=l,l=c,c=b);const A=(h[i]+t.offsetX)*t.scaleX,w=(h[i+1]+t.offsetY)*t.scaleY,S=(h[s]+t.offsetX)*t.scaleX,x=(h[s+1]+t.offsetY)*t.scaleY,E=(h[r]+t.offsetX)*t.scaleX,T=(h[r+1]+t.offsetY)*t.scaleY;if(w>=T)return;const C=f[l],L=f[l+1],N=f[l+2],O=f[c],P=f[c+1],X=f[c+2],K=f[u],J=f[u+1],Z=f[u+2],ht=Math.round(w),At=Math.round(T);let vt,St,B,V,W,dt,wt,R;for(let G=ht;G<=At;G++){if(G<x){const ot=G<w?0:(w-G)/(w-x);vt=A-(A-S)*ot,St=C-(C-O)*ot,B=L-(L-P)*ot,V=N-(N-X)*ot}else{let ot;G>T?ot=1:x===T?ot=0:ot=(x-G)/(x-T),vt=S-(S-E)*ot,St=O-(O-K)*ot,B=P-(P-J)*ot,V=X-(X-Z)*ot}let Q;G<w?Q=0:G>T?Q=1:Q=(w-G)/(w-T),W=A-(A-E)*Q,dt=C-(C-K)*Q,wt=L-(L-J)*Q,R=N-(N-Z)*Q;const tt=Math.round(Math.min(vt,W)),lt=Math.round(Math.max(vt,W));let ut=y*G+tt*4;for(let ot=tt;ot<=lt;ot++)Q=(vt-ot)/(vt-W),Q<0?Q=0:Q>1&&(Q=1),g[ut++]=St-(St-dt)*Q|0,g[ut++]=B-(B-wt)*Q|0,g[ut++]=V-(V-R)*Q|0,g[ut++]=255}}function SS(d,t,i){const s=t.coords,r=t.colors;let l,c;switch(t.type){case rh.LATTICE:const u=t.verticesPerRow,h=Math.floor(s.length/u)-1,f=u-1;for(l=0;l<h;l++){let g=l*u;for(let y=0;y<f;y++,g++)Zu(d,i,s[g],s[g+1],s[g+u],r[g],r[g+1],r[g+u]),Zu(d,i,s[g+u+1],s[g+1],s[g+u],r[g+u+1],r[g+1],r[g+u])}break;case rh.TRIANGLES:for(l=0,c=s.length;l<c;l+=3)Zu(d,i,s[l],s[l+1],s[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class wS extends Nh{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/y,w=g/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/A,scaleY:1/w},x=y+4,E=b+4,T=s.getCanvas("mesh",x,E),C=T.context,L=C.createImageData(y,b);if(i){const O=L.data;for(let P=0,X=O.length;P<X;P+=4)O[P]=i[0],O[P+1]=i[1],O[P+2]=i[2],O[P+3]=255}for(const O of this._figures)SS(L,O,S);return C.putImageData(L,2,2),{canvas:T.canvas,offsetX:u-2*A,offsetY:h-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){ph(t,this._bbox);const l=new Float32Array(2);if(r===Ee.SHADING)nt.singularValueDecompose2dScale(Kt(t),l);else if(this.matrix){nt.singularValueDecompose2dScale(this.matrix,l);const[u,h]=l;nt.singularValueDecompose2dScale(i.baseTransform,l),l[0]*=u,l[1]*=h}else nt.singularValueDecompose2dScale(i.baseTransform,l);const c=this._createMeshCanvas(l,r===Ee.SHADING?null:this._background,i.cachedCanvases);return r!==Ee.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class ES extends Nh{getPattern(){return"hotpink"}}function _S(d){switch(d[0]){case"RadialAxial":return new AS(d);case"Mesh":return new wS(d);case"Dummy":return new ES}throw new Error(`Unknown IR type: ${d[0]}`)}const bm={COLORED:1,UNCOLORED:2};class Lh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:l,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),yo("TilingType: "+c);const y=s[0],b=s[1],A=s[2],w=s[3],S=A-y,x=w-b,E=new Float32Array(2);nt.singularValueDecompose2dScale(this.matrix,E);const[T,C]=E;nt.singularValueDecompose2dScale(this.baseTransform,E);const L=T*E[0],N=C*E[1];let O=S,P=x,X=!1,K=!1;const J=Math.ceil(f*L),Z=Math.ceil(g*N),ht=Math.ceil(S*L),At=Math.ceil(x*N);J>=ht?O=f:X=!0,Z>=At?P=g:K=!0;const vt=this.getSizeAndScale(O,this.ctx.canvas.width,L),St=this.getSizeAndScale(P,this.ctx.canvas.height,N),B=t.cachedCanvases.getCanvas("pattern",vt.size,St.size),V=B.context,W=h.createCanvasGraphics(V,i);if(W.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(W,l,u),V.translate(-vt.scale*y,-St.scale*b),W.transform(0,vt.scale,0,0,St.scale,0,0),V.save(),W.dependencyTracker?.save(),this.clipBbox(W,y,b,A,w),W.baseTransform=Kt(W.ctx),W.executeOperatorList(r),W.endDrawing(),W.dependencyTracker?.restore(),V.restore(),X||K){const dt=B.canvas;X&&(O=f),K&&(P=g);const wt=this.getSizeAndScale(O,this.ctx.canvas.width,L),R=this.getSizeAndScale(P,this.ctx.canvas.height,N),G=wt.size,Q=R.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",G,Q),lt=tt.context,ut=X?Math.floor(S/f):0,ot=K?Math.floor(x/g):0;for(let ee=0;ee<=ut;ee++)for(let It=0;It<=ot;It++)lt.drawImage(dt,G*ee,Q*It,G,Q,0,0,G,Q);return{canvas:tt.canvas,scaleX:wt.scale,scaleY:R.scale,offsetX:y,offsetY:b}}return{canvas:B.canvas,scaleX:vt.scale,scaleY:St.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,i,s){const r=Math.max(Lh.MAX_PATTERN_SIZE,i);let l=Math.ceil(t*s);return l>=r?l=r:s=l/t,{scale:s,size:l}}clipBbox(t,i,s,r,l){const c=r-i,u=l-s;t.ctx.rect(i,s,c,u),nt.axialAlignedBoundingBox([i,s,r,l],Kt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,l=t.current;switch(i){case bm.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=l.fillColor=c,r.strokeStyle=l.strokeColor=u;break;case bm.UNCOLORED:r.fillStyle=r.strokeStyle=s,l.fillColor=l.strokeColor=s;break;default:throw new zA(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,l){let c=s;r!==Ee.SHADING&&(c=nt.transform(c,i.baseTransform),this.matrix&&(c=nt.transform(c,this.matrix)));const u=this.createPatternCanvas(i,l);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function xS({src:d,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const u=_e.isLittleEndian?4278190080:255,[h,f]=c?[l,u]:[u,l],g=s>>3,y=s&7,b=d.length;i=new Uint32Array(i.buffer);let A=0;for(let w=0;w<r;w++){for(const x=t+g;t<x;t++){const E=t<b?d[t]:255;i[A++]=E&128?f:h,i[A++]=E&64?f:h,i[A++]=E&32?f:h,i[A++]=E&16?f:h,i[A++]=E&8?f:h,i[A++]=E&4?f:h,i[A++]=E&2?f:h,i[A++]=E&1?f:h}if(y===0)continue;const S=t<b?d[t++]:255;for(let x=0;x<y;x++)i[A++]=S&1<<7-x?f:h}return{srcPos:t,destPos:A}}const vm=16,Am=100,CS=15,Sm=10,He=16,Ju=new DOMMatrix,Ze=new Float32Array(2),Ws=new Float32Array([1/0,1/0,-1/0,-1/0]);function TS(d,t){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){t.save(),this.__originalSave()},d.restore=function(){t.restore(),this.__originalRestore()},d.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},d.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},d.transform=function(i,s,r,l,c,u){t.transform(i,s,r,l,c,u),this.__originalTransform(i,s,r,l,c,u)},d.setTransform=function(i,s,r,l,c,u){t.setTransform(i,s,r,l,c,u),this.__originalSetTransform(i,s,r,l,c,u)},d.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},d.rotate=function(i){t.rotate(i),this.__originalRotate(i)},d.clip=function(i){t.clip(i),this.__originalClip(i)},d.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},d.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},d.bezierCurveTo=function(i,s,r,l,c,u){t.bezierCurveTo(i,s,r,l,c,u),this.__originalBezierCurveTo(i,s,r,l,c,u)},d.rect=function(i,s,r,l){t.rect(i,s,r,l),this.__originalRect(i,s,r,l)},d.closePath=function(){t.closePath(),this.__originalClosePath()},d.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class MS{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Wl(d,t,i,s,r,l,c,u,h,f){const[g,y,b,A,w,S]=Kt(d);if(y===0&&b===0){const T=c*g+w,C=Math.round(T),L=u*A+S,N=Math.round(L),O=(c+h)*g+w,P=Math.abs(Math.round(O)-C)||1,X=(u+f)*A+S,K=Math.abs(Math.round(X)-N)||1;return d.setTransform(Math.sign(g),0,0,Math.sign(A),C,N),d.drawImage(t,i,s,r,l,0,0,P,K),d.setTransform(g,y,b,A,w,S),[P,K]}if(g===0&&A===0){const T=u*b+w,C=Math.round(T),L=c*y+S,N=Math.round(L),O=(u+f)*b+w,P=Math.abs(Math.round(O)-C)||1,X=(c+h)*y+S,K=Math.abs(Math.round(X)-N)||1;return d.setTransform(0,Math.sign(y),Math.sign(b),0,C,N),d.drawImage(t,i,s,r,l,0,0,K,P),d.setTransform(g,y,b,A,w,S),[K,P]}d.drawImage(t,i,s,r,l,c,u,h,f);const x=Math.hypot(g,y),E=Math.hypot(b,A);return[x*h,E*f]}class wm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=ah;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Se.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=Ws.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ee.FILL,i=null){const s=this.minMax.slice();if(t===Ee.STROKE){i||Gt("Stroke bounding box must include transform."),nt.singularValueDecompose2dScale(i,Ze);const r=Ze[0]*this.lineWidth/2,l=Ze[1]*this.lineWidth/2;s[0]-=r,s[1]-=l,s[2]+=r,s[3]+=l}return s}updateClipFromPath(){const t=nt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ws,0)}getClippedPathBoundingBox(t=Ee.FILL,i=null){return nt.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function Em(d,t){if(t instanceof ImageData){d.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%He,l=(i-r)/He,c=r===0?l:l+1,u=d.createImageData(s,He);let h=0,f;const g=t.data,y=u.data;let b,A,w,S;if(t.kind===so.GRAYSCALE_1BPP){const x=g.byteLength,E=new Uint32Array(y.buffer,0,y.byteLength>>2),T=E.length,C=s+7>>3,L=4294967295,N=_e.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(w=b<l?He:r,f=0,A=0;A<w;A++){const O=x-h;let P=0;const X=O>C?s:O*8-7,K=X&-8;let J=0,Z=0;for(;P<K;P+=8)Z=g[h++],E[f++]=Z&128?L:N,E[f++]=Z&64?L:N,E[f++]=Z&32?L:N,E[f++]=Z&16?L:N,E[f++]=Z&8?L:N,E[f++]=Z&4?L:N,E[f++]=Z&2?L:N,E[f++]=Z&1?L:N;for(;P<X;P++)J===0&&(Z=g[h++],J=128),E[f++]=Z&J?L:N,J>>=1}for(;f<T;)E[f++]=0;d.putImageData(u,0,b*He)}}else if(t.kind===so.RGBA_32BPP){for(A=0,S=s*He*4,b=0;b<l;b++)y.set(g.subarray(h,h+S)),h+=S,d.putImageData(u,0,A),A+=He;b<c&&(S=s*r*4,y.set(g.subarray(h,h+S)),d.putImageData(u,0,A))}else if(t.kind===so.RGB_24BPP)for(w=He,S=s*w,b=0;b<c;b++){for(b>=l&&(w=r,S=s*w),f=0,A=S;A--;)y[f++]=g[h++],y[f++]=g[h++],y[f++]=g[h++],y[f++]=255;d.putImageData(u,0,b*He)}else throw new Error(`bad image kind: ${t.kind}`)}function _m(d,t){if(t.bitmap){d.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%He,l=(i-r)/He,c=r===0?l:l+1,u=d.createImageData(s,He);let h=0;const f=t.data,g=u.data;for(let y=0;y<c;y++){const b=y<l?He:r;({srcPos:h}=xS({src:f,srcPos:h,dest:g,width:s,height:b,nonBlackColor:0})),d.putImageData(u,0,y*He)}}function sr(d,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)d[s]!==void 0&&(t[s]=d[s]);d.setLineDash!==void 0&&(t.setLineDash(d.getLineDash()),t.lineDashOffset=d.lineDashOffset)}function Zl(d){d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0);const{filter:t}=d;t!=="none"&&t!==""&&(d.filter="none")}function xm(d,t){if(t)return!0;nt.singularValueDecompose2dScale(d,Ze);const i=Math.fround(Mi.pixelRatio*sa.PDF_TO_CSS_UNITS);return Ze[0]<=i&&Ze[1]<=i}const RS=["butt","round","square"],DS=["miter","round","bevel"],NS={},Cm={};class ea{constructor(t,i,s,r,l,{optionalContentConfig:c,markedContentStack:u=null},h,f,g){this.ctx=t,this.current=new wm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new MS(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Kt(this.compositeCtx))}this.ctx.save(),Zl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Kt(this.ctx)}executeOperatorList(t,i,s,r,l){const c=t.argsArray,u=t.fnArray;let h=i||0;const f=c.length;if(f===h)return h;const g=f-h>Sm&&typeof s=="function",y=g?Date.now()+CS:0;let b=0;const A=this.commonObjs,w=this.objs;let S,x;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(!l||l(h))if(S=u[h],x=c[h]??null,S!==pr.dependency)x===null?this[S](h):this[S](h,...x);else for(const E of x){this.dependencyTracker?.recordNamedData(E,h);const T=E.startsWith("g_")?A:w;if(!T.has(E))return T.get(E,s),h}if(h++,h===f)return h;if(g&&++b>Sm){if(Date.now()>y)return s(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(i[0],i[1]),1),c=Math.max(Math.hypot(i[2],i[3]),1),u=s,h=r,f="prescale1",g,y;for(;l>2&&u>1||c>2&&h>1;){let b=u,A=h;l>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/b),c>2&&h>1&&(A=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/A),g=this.cachedCanvases.getCanvas(f,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,h,0,0,b,A),t=g.canvas,u=b,h=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:l}=i,c=this.current.fillColor,u=this.current.patternFill,h=Kt(s);let f,g,y,b;if((i.bitmap||i.data)&&i.count>1){const J=i.bitmap||i.data.buffer;g=JSON.stringify(u?h:[h.slice(0,4),c]),f=this._cachedBitmapsMap.get(J),f||(f=new Map,this._cachedBitmapsMap.set(J,f));const Z=f.get(g);if(Z&&!u){const ht=Math.round(Math.min(h[0],h[2])+h[4]),At=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,ui.transformAndFill),{canvas:Z,offsetX:ht,offsetY:At}}y=Z}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,l),_m(b.context,i));let A=nt.transform(h,[1/r,0,0,-1/l,0,0]);A=nt.transform(A,[1,0,0,1,0,-l]);const w=Ws.slice();nt.axialAlignedBoundingBox([0,0,r,l],A,w);const[S,x,E,T]=w,C=Math.round(E-S)||1,L=Math.round(T-x)||1,N=this.cachedCanvases.getCanvas("fillCanvas",C,L),O=N.context,P=S,X=x;O.translate(-P,-X),O.transform(...A),y||(y=this._scaleImage(b.canvas,Ei(O)),y=y.img,f&&u&&f.set(g,y)),O.imageSmoothingEnabled=xm(Kt(O),i.interpolate),Wl(O,y,0,0,y.width,y.height,0,0,r,l),O.globalCompositeOperation="source-in";const K=nt.transform(Ei(O),[1,0,0,1,-P,-X]);return O.fillStyle=u?c.getPattern(s,this,K,Ee.FILL,t):c,O.fillRect(0,0,r,l),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,N.canvas)),this.dependencyTracker?.recordDependencies(t,ui.transformAndFill),{canvas:N.canvas,offsetX:Math.round(P),offsetY:Math.round(X)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=RS[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=DS[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),sr(this.suspendedCtx,c),TS(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),sr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const l=r[0],c=r[1],u=r[2]-l,h=r[3]-c;u===0||h===0||(this.genericComposeSMask(i.context,s,u,h,i.subtype,i.backdrop,i.transferMap,l,c,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,l,c,u,h,f,g,y){let b=t.canvas,A=h-g,w=f-y;if(c)if(A<0||w<0||A+s>b.width||w+r>b.height){const x=this.cachedCanvases.getCanvas("maskExtension",s,r),E=x.context;E.drawImage(b,-A,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=c,E.fillRect(0,0,s,r),E.globalCompositeOperation="source-over",b=x.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(A,w,s,r),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,w,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),l==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):l==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,f,s,r),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(b,A,w,s,r,h,f,s,r),i.restore()}save(t){this.inSMaskMode&&sr(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&sr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,l,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,l,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[l]=s;if(!r){l||=s[0]=new Path2D,this[i](t,l);return}if(this.dependencyTracker!==null){const c=i===pr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-c,r[2]+c,r[1]-c,r[3]+c).recordDependencies(t,["transform"])}l instanceof Path2D||(l=s[0]=Jm(l)),nt.axialAlignedBoundingBox(r,Kt(this.ctx),this.current.minMax),this[i](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,l=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const c=l.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=l.getPattern(r,this,Ei(r),Ee.STROKE,t),c){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(c)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,ui.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(Ee.STROKE,Kt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=l.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=l.getPattern(r,this,Ei(r),Ee.FILL,t),f){const g=new Path2D;g.addPath(i,r.getTransform().invertSelf().multiplySelf(f)),i=g}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,ui.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,h)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,ui.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=NS}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Cm}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,l=s.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:f,path:g}of i)g&&r.addPath(g,new DOMMatrix(c).preMultiplySelf(l).translate(u,h).scale(f,-f));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),l=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(l.fontMatrix=r.fontMatrix||ah,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&pt("Invalid font matrix for font "+i),s<0?(s=-s,l.fontDirection=-1):l.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const c=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${c}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let g=s;s<vm?g=vm:s>Am&&(g=Am),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${h} ${g}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,l,c){const u=this.ctx,h=this.current,f=h.font,g=h.textRenderingMode,y=h.fontSize/h.fontSizeScale,b=g&Se.FILL_STROKE_MASK,A=!!(g&Se.ADD_TO_PATH_FLAG),w=h.patternFill&&!f.missingFile,S=h.patternStroke&&!f.missingFile;let x;if((f.disableFontFace||A||w||S)&&!f.missingFile&&(x=f.getPathGenerator(this.commonObjs,i)),x&&(f.disableFontFace||w||S)){u.save(),u.translate(s,r),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let E;if(b===Se.FILL||b===Se.FILL_STROKE)if(l){E=u.getTransform(),u.setTransform(...l);const T=this.#n(x,E,l);u.fill(T)}else u.fill(x);if(b===Se.STROKE||b===Se.FILL_STROKE)if(c){E||=u.getTransform(),u.setTransform(...c);const{a:T,b:C,c:L,d:N}=E,O=nt.inverseTransform(c),P=nt.transform([T,C,L,N,0,0],O);nt.singularValueDecompose2dScale(P,Ze),u.lineWidth*=Math.max(Ze[0],Ze[1])/y,u.stroke(this.#n(x,E,c))}else u.lineWidth/=y,u.stroke(x);u.restore()}else(b===Se.FILL||b===Se.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i))),(b===Se.STROKE||b===Se.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i)).recordDependencies(t,ui.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:Kt(u),x:s,y:r,fontSize:y,path:x}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return yt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,ui.showText).resetBBox(t),this.current.textRenderingMode&Se.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const l=s.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=s.fontSizeScale,h=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,y=s.textHScale*g,b=i.length,A=r.vertical,w=A?1:-1,S=r.defaultVMetrics,x=l*s.fontMatrix[0],E=s.textRenderingMode===Se.FILL&&!r.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),g>0?c.scale(y,-1):c.scale(y,1);let T,C;if(s.patternFill){c.save();const X=s.fillColor.getPattern(c,this,Ei(c),Ee.FILL,t);T=Kt(c),c.restore(),c.fillStyle=X}if(s.patternStroke){c.save();const X=s.strokeColor.getPattern(c,this,Ei(c),Ee.STROKE,t);C=Kt(c),c.restore(),c.strokeStyle=X}let L=s.lineWidth;const N=s.textMatrixScale;if(N===0||L===0){const X=s.textRenderingMode&Se.FILL_STROKE_MASK;(X===Se.STROKE||X===Se.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=N;if(u!==1&&(c.scale(u,u),L/=u),c.lineWidth=L,r.isInvalidPDFjsFont){const X=[];let K=0;for(const Z of i)X.push(Z.unicode),K+=Z.width;const J=X.join("");if(c.fillText(J,0,0),this.dependencyTracker!==null){const Z=c.measureText(J);this.dependencyTracker.recordBBox(t,this.ctx,-Z.actualBoundingBoxLeft,Z.actualBoundingBoxRight,-Z.actualBoundingBoxAscent,Z.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=K*x*y,c.restore(),this.compose();return}let O=0,P;for(P=0;P<b;++P){const X=i[P];if(typeof X=="number"){O+=w*X*l/1e3;continue}let K=!1;const J=(X.isSpace?f:0)+h,Z=X.fontChar,ht=X.accent;let At,vt,St=X.width;if(A){const W=X.vmetric||S,dt=-(X.vmetric?W[1]:St*.5)*x,wt=W[2]*x;St=W?-W[0]:St,At=dt/u,vt=(O+wt)/u}else At=O/u,vt=0;let B;if(r.remeasure&&St>0){B=c.measureText(Z);const W=B.width*1e3/l*u;if(St<W&&this.isFontSubpixelAAEnabled){const dt=St/W;K=!0,c.save(),c.scale(dt,1),At/=dt}else St!==W&&(At+=(St-W)/2e3*l/u)}if(this.contentVisible&&(X.isInFont||r.missingFile)){if(E&&!ht)c.fillText(Z,At,vt),this.dependencyTracker?.recordCharacterBBox(t,c,B?{bbox:null}:r,l/u,At,vt,()=>B??c.measureText(Z));else if(this.paintChar(t,Z,At,vt,T,C),ht){const W=At+l*ht.offset.x/u,dt=vt-l*ht.offset.y/u;this.paintChar(t,ht.fontChar,W,dt,T,C)}}const V=A?St*x-J*g:St*x+J*g;O+=V,K&&c.restore()}A?s.y-=O:s.x+=O*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,l=r.font,c=r.fontSize,u=r.fontDirection,h=l.vertical?1:-1,f=r.charSpacing,g=r.wordSpacing,y=r.textHScale*u,b=r.fontMatrix||ah,A=i.length,w=r.textRenderingMode===Se.INVISIBLE;let S,x,E,T;if(w||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(y,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new co(C,t):null,S=0;S<A;++S){if(x=i[S],typeof x=="number"){T=h*x*c/1e3,this.ctx.translate(T,0),r.x+=T*y;continue}const L=(x.isSpace?g:0)+f,N=l.charProcOperatorList[x.operatorListId];N?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...b),this.executeOperatorList(N),this.restore()):pt(`Type3 character "${x.operatorListId}" is not available.`);const O=[x.width,0];nt.applyTransform(O,b),E=O[0]*c+L,s.translate(E,0),r.x+=E*y}s.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,l,c,u){const h=new Path2D;h.rect(r,l,c-r,u-l),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,c,l,u).recordClipBox(t,this.ctx,r,c,l,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||Kt(this.ctx),l={createCanvasGraphics:(c,u)=>new ea(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new co(this.dependencyTracker,u,!0):null)};s=new Lh(i,this.ctx,l,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=_S(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,Ei(s),Ee.SHADING,t);const l=Ei(s);if(l){const{width:c,height:u}=s.canvas,h=Ws.slice();nt.axialAlignedBoundingBox([0,0,c,u],l,h);const[f,g,y,b]=h;this.ctx.fillRect(f,g,y-f,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,ui.transform).recordDependencies(t,ui.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Gt("Should not call beginInlineImage")}beginImageData(){Gt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=Kt(this.ctx),s)){nt.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,l,c,u]=s,h=new Path2D;h.rect(r,l,c-r,u-l),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,c,l,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||yo("TODO: Support non-isolated groups."),i.knockout&&pt("Knockout groups not supported.");const r=Kt(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let l=Ws.slice();nt.axialAlignedBoundingBox(i.bbox,Kt(s),l);const c=[0,0,s.canvas.width,s.canvas.height];l=nt.intersect(l,c)||[0,0,0,0];const u=Math.floor(l[0]),h=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-u,1),g=Math.max(Math.ceil(l[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;i.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,g),A=b.context;A.translate(-u,-h),A.transform(...r);let w=new Path2D;const[S,x,E,T]=i.bbox;if(w.rect(S,x,E-S,T-x),i.matrix){const C=new Path2D;C.addPath(w,new DOMMatrix(i.matrix)),w=C}A.clip(w),i.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:h,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),sr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=Kt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const c=Ws.slice();nt.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],l,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,i,s,r,l,c){if(this.#t(),Zl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(c&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,nt.singularValueDecompose2dScale(Kt(this.ctx),Ze);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(Ze[0],0,0,-Ze[1],0,h*Ze[1]),Zl(this.ctx)}else{Zl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,h),this.ctx.clip(f)}}this.current=new wm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,l=this._createMaskCanvas(t,i),c=l.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(c,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,l=0,c,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const h=this.ctx;h.save();const f=Kt(h);h.transform(s,r,l,c,0,0);const g=this._createMaskCanvas(t,i);h.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=nt.transform(f,[s,r,l,c,u[y],u[y+1]]);h.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,ui.transformAndFill);for(const c of i){const{data:u,width:h,height:f,transform:g}=c,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=y.context;b.save();const A=this.getObject(t,u,c);_m(b,A),b.globalCompositeOperation="source-in",b.fillStyle=l?r.getPattern(b,this,Ei(s),Ee.FILL,t):r,b.fillRect(0,0,h,f),b.restore(),s.save(),s.transform(...g),s.scale(1,-1),Wl(s,y.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,h,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,l){if(!this.contentVisible)return;const c=this.getObject(t,i);if(!c){pt("Dependent image isn't ready yet");return}const u=c.width,h=c.height,f=[];for(let g=0,y=l.length;g<y;g+=2)f.push({transform:[s,0,0,r,l[g],l[g+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",s,r),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(i,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,r).context;Em(g,i),u=this.applyTransferMapsToCanvas(g)}const h=this._scaleImage(u,Ei(l));l.imageSmoothingEnabled=xm(Kt(l),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,s,-r,0).recordDependencies(t,ui.imageXObject).recordOperation(t),Wl(l,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let l;if(i.bitmap)l=i.bitmap;else{const c=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;Em(f,i),l=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of s)r.save(),r.transform(...c.transform),r.scale(1,-1),Wl(r,l,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,ui.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const l=this.ctx;this.pendingClip?(r||(this.pendingClip===Cm?l.clip(i,"evenodd"):l.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Kt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:l}=this.ctx.getTransform();let c,u;if(s===0&&r===0){const h=Math.abs(i),f=Math.abs(l);if(h===f)if(t===0)c=u=1/h;else{const g=h*t;c=u=g<1?1/g:1}else if(t===0)c=1/h,u=1/f;else{const g=h*t,y=f*t;c=g<1?1/g:1,u=y<1?1/y:1}}else{const h=Math.abs(i*l-s*r),f=Math.hypot(i,s),g=Math.hypot(r,l);if(t===0)c=g/h,u=f/h;else{const y=t*h;c=g>y?g/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[l,c]=this.getScaleForStroking();if(l===c){s.lineWidth=(r||1)*l,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(l,c),Ju.a=1/l,Ju.d=1/c;const h=new Path2D;if(h.addPath(t,Ju),u.length>0){const f=Math.max(l,c);s.setLineDash(u.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=r||1,s.stroke(h),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const d in pr)ea.prototype[d]!==void 0&&(ea.prototype[pr[d]]=ea.prototype[d]);class ia{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class LS{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const $s=Symbol("INTERNAL");class OS{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:l}){this.#t=!!(t&We.DISPLAY),this.#e=!!(t&We.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=l}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==$s&&Gt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class kS{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=We.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new OS(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible($s,!1);for(const s of t.on)this.#e.get(s)._setVisible($s,!0);for(const s of t.off)this.#e.get(s)._setVisible($s,!1);this.#n=this.getHash()}}#r(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const l=t[r];let c;if(Array.isArray(l))c=this.#r(l);else if(this.#e.has(l))c=this.#e.get(l).visible;else return pt(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return yo("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return pt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return pt(`Unknown optional content policy ${t.policy}.`),!0}return pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){pt(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const l of r.rbGroups)for(const c of l)c!==t&&this.#e.get(c)?._setVisible($s,!1,!0);r._setVisible($s,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const l=this.#e.get(r);if(l)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!l.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new e0;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class BS{constructor(t,{disableRange:i=!1,disableStream:s=!1}){Rt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,l?.length>0){const h=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(s),!0)});Rt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Rt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new PS(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new zS(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class PS{constructor(t,i,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=Ch(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class zS{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function FS(d){let t=!0,i=s("filename\\*","i").exec(d);if(i){i=i[1];let g=u(i);return g=unescape(g),g=h(g),g=f(g),l(g)}if(i=c(d),i){const g=f(i);return l(g)}if(i=s("filename","i").exec(d),i){i=i[1];let g=u(i);return g=f(g),l(g)}function s(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=Sr(y);y=b.decode(A),t=!1}catch{}}return y}function l(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function c(g){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,S,x,E]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[x,E]}const w=[];for(let S=0;S<y.length&&S in y;++S){let[x,E]=y[S];E=u(E),x&&(E=unescape(E),S===0&&(E=h(E))),w.push(E)}return w.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function h(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),w=g.slice(y+1).replace(/^[^']*'/,"");return r(b,w)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,x){return String.fromCharCode(parseInt(x,16))}),r(b,w);try{w=atob(w)}catch{}return r(b,w)})}return""}function o0(d,t){const i=new Headers;if(!d||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function Ao(d){return URL.parse(d)?.origin??null}function c0({responseHeaders:d,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(d.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*i)||s||!t||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function u0(d){const t=d.get("Content-Disposition");if(t){let i=FS(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Ch(i))return i}return null}function Cr(d,t){return new oo(`Unexpected server response (${d}) while retrieving PDF "${t}".`,d,d===404||d===0&&t.startsWith("file:"))}function h0(d){return d===200||d===206}function d0(d,t,i){return{method:"GET",headers:d,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function f0(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(pt(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class US{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=o0(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Rt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new HS(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new IS(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class HS{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),r=i.url;fetch(r,d0(s,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=Ao(l.url),!h0(l.status))throw Cr(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:u,suggestedLength:h}=c0({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=u0(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Nn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:f0(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class IS{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${i}-${s-1}`);const c=r.url;fetch(c,d0(l,this._withCredentials,this._abortController)).then(u=>{const h=Ao(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!h0(u.status))throw Cr(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:f0(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const th=200,eh=206;function jS(d){const t=d.response;return typeof t!="string"?t:Sr(t).buffer}class GS{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=o0(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[l,c]of this.headers)i.setRequestHeader(l,c);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=eh):r.expectedStatus=th,i.responseType="arraybuffer",Rt(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){const s=this.pendingRequests[t];s&&s.onProgress?.(i)}onStateChange(t,i){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const l=r.status||th;if(!(l===th&&s.expectedStatus===eh)&&l!==s.expectedStatus){s.onError(r.status);return}const u=jS(r);if(l===eh){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(pt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class qS{constructor(t){this._source=t,this._manager=new GS(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Rt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new VS(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new XS(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class VS{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=Ao(i.responseURL);const s=i.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=c0({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=u0(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Cr(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class XS{constructor(t,i,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Ao(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Cr(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const YS=/^[a-z][a-z0-9\-+.]+:/i;function $S(d){if(YS.test(d))return new URL(d);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(d))}class KS{constructor(t){this.source=t,this.url=$S(t.url),Rt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Rt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new QS(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new WS(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class QS{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Cr(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Nn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class WS{constructor(t,i,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:i,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ar=Symbol("INITIAL_DATA");class p0{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:ar}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===ar)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==ar}delete(t){const i=this.#t[t];return!i||i.data===ar?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==ar&&(yield[t,i])}}}const ZS=1e5,Tm=30;class Te{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#l=0;#c=null;#o=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#x=new WeakMap;static#E=null;static#S=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#o=i,this.#h=s.scale*Mi.pixelRatio,this.#d=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:l,pageX:c,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-c,u+l],this.#l=r,this.#s=l,Te.#R(),ss(i,s),this.#t.promise.finally(()=>{Te.#S.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=_e.platform;return yt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#r??=i.lang,Object.assign(this.#f,i.styles),this.#T(i.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),Te.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Mi.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,ss(this.#o,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const l={div:null,properties:null,ctx:Te.#D(this.#r)};for(const c of this.#u)l.properties=this.#p.get(c),l.div=c,this.#_(l)}}cancel(){const t=new Nn("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#T(t){if(this.#n)return;this.#a.ctx??=Te.#D(this.#r);const i=this.#u,s=this.#m;for(const r of t){if(i.length>ZS){pt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),l.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#A(r)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=nt.transform(this.#y,t.transform);let l=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(l+=Math.PI/2);let u=this.#i&&c.fontSubstitution||c.fontFamily;u=Te.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*Te.#z(u,c,this.#r);let g,y;l===0?(g=r[4],y=r[5]-f):(g=r[4]+f*Math.sin(l),y=r[5]-f*Math.cos(l));const b="calc(var(--total-scale-factor) *",A=i.style;this.#e===this.#o?(A.left=`${(100*g/this.#l).toFixed(2)}%`,A.top=`${(100*y/this.#s).toFixed(2)}%`):(A.left=`${b}${g.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${(Te.#E*h).toFixed(2)}px)`,A.fontFamily=u,s.fontSize=h,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(s.angle=l*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);S!==x&&Math.max(S,x)/Math.min(S,x)>1.5&&(w=!0)}if(w&&(s.canvasWidth=c.vertical?t.height:t.width),this.#p.set(i,s),this.#a.div=i,this.#a.properties=s,this.#_(this.#a),s.hasText&&this.#e.append(i),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#_(t){const{div:i,properties:s,ctx:r}=t,{style:l}=i;let c="";if(Te.#E>1&&(c=`scale(${1/Te.#E})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=l,{canvasWidth:h,fontSize:f}=s;Te.#M(r,f*this.#h,u);const{width:g}=r.measureText(i.textContent);g>0&&(c=`scaleX(${h*this.#h/g}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(l.transform=c)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#D(t=null){let i=this.#b.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,i),this.#x.set(i,{size:0,family:""})}return i}static#M(t,i,s){const r=this.#x.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#R(){if(this.#E!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#E=t.getBoundingClientRect().height,t.remove()}static#z(t,i,s){const r=this.#v.get(t);if(r)return r;const l=this.#D(s);l.canvas.width=l.canvas.height=Tm,this.#M(l,Tm,t);const c=l.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let f=.8;return u?f=u/(u+h):(_e.platform.isFirefox&&pt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#v.set(t,f),f}}const JS=100;function g0(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const t=new Oh,{docId:i}=t,s=d.url?rS(d.url):null,r=d.data?lS(d.data):null,l=d.httpHeaders||null,c=d.withCredentials===!0,u=d.password??null,h=d.range instanceof m0?d.range:null,f=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:2**16;let g=d.worker instanceof mr?d.worker:null;const y=d.verbosity,b=typeof d.docBaseUrl=="string"&&!bo(d.docBaseUrl)?d.docBaseUrl:null,A=Yl(d.cMapUrl),w=d.cMapPacked!==!1,S=d.CMapReaderFactory||(Me?gS:fm),x=Yl(d.iccUrl),E=Yl(d.standardFontDataUrl),T=d.StandardFontDataFactory||(Me?mS:pm),C=Yl(d.wasmUrl),L=d.WasmFactory||(Me?yS:gm),N=d.stopAtErrors!==!0,O=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,P=d.isEvalSupported!==!1,X=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!Me,K=typeof d.isImageDecoderSupported=="boolean"?d.isImageDecoderSupported:!Me&&(_e.platform.isFirefox||!globalThis.chrome),J=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,Z=typeof d.disableFontFace=="boolean"?d.disableFontFace:Me,ht=d.fontExtraProperties===!0,At=d.enableXfa===!0,vt=d.ownerDocument||globalThis.document,St=d.disableRange===!0,B=d.disableStream===!0,V=d.disableAutoFetch===!0,W=d.pdfBug===!0,dt=d.CanvasFactory||(Me?pS:hS),wt=d.FilterFactory||(Me?fS:dS),R=d.enableHWA===!0,G=d.useWasm!==!1,Q=h?h.length:d.length??NaN,tt=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!Me&&!Z,lt=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:!!(S===fm&&T===pm&&L===gm&&A&&E&&C&&or(A,document.baseURI)&&or(E,document.baseURI)&&or(C,document.baseURI)),ut=null;kA(y);const ot={canvasFactory:new dt({ownerDocument:vt,enableHWA:R}),filterFactory:new wt({docId:i,ownerDocument:vt}),cMapReaderFactory:lt?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:lt?null:new T({baseUrl:E}),wasmFactory:lt?null:new L({baseUrl:C})};g||(g=mr.create({verbosity:y,port:ia.workerPort}),t._worker=g);const ee={docId:i,apiVersion:"5.4.394",data:r,password:u,disableAutoFetch:V,rangeChunkSize:f,length:Q,docBaseUrl:b,enableXfa:At,evaluatorOptions:{maxImageSize:O,disableFontFace:Z,ignoreErrors:N,isEvalSupported:P,isOffscreenCanvasSupported:X,isImageDecoderSupported:K,canvasMaxAreaInBytes:J,fontExtraProperties:ht,useSystemFonts:tt,useWasm:G,useWorkerFetch:lt,cMapUrl:A,iccUrl:x,standardFontDataUrl:E,wasmUrl:C}},It={ownerDocument:vt,pdfBug:W,styleElement:ut,loadingParams:{disableAutoFetch:V,enableXfa:At}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const kn=g.messageHandler.sendWithPromise("GetDocRequest",ee,r?[r.buffer]:null);let nn;if(h)nn=new BS(h,{disableRange:St,disableStream:B});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Bn=or(s)?US:Me?KS:qS;nn=new Bn({url:s,length:Q,httpHeaders:l,withCredentials:c,rangeChunkSize:f,disableRange:St,disableStream:B})}return kn.then(Bn=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const la=new cr(i,Bn,g.port),Di=new i1(la,t,nn,It,ot,R);t._transport=Di,la.send("Ready",null)})}).catch(t._capability.reject),t}class Oh{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Oh.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class m0{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#r)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){Gt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class t1{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class e1{#t=!1;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new rm:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new p0,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:l=!1}={}){return new Er({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:l=Rn.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,l,y,b),{renderingIntent:x,cacheKey:E}=S;this.#t=!1,h||=this._transport.getOptionalContentConfig(x);let T=this._intentStates.get(E);T||(T=Object.create(null),this._intentStates.set(E,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const C=!!(x&We.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const L=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(A||L),O=K=>{if(T.renderTasks.delete(P),N){const J=P.gfx?.dependencyTracker.take();J&&(P.stepper&&P.stepper.setOperatorBBoxes(J,P.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=J))}C&&(this.#t=!0),this.#e(),K?(P.capability.reject(K),this._abortOperatorList({intentState:T,reason:K instanceof Error?K:new Error(K)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new Zs({callback:O,params:{canvas:i,canvasContext:t,dependencyTracker:N?new vS(i,T.operatorList.length,L):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:w});(T.renderTasks||=new Set).add(P);const X=P.task;return Promise.all([T.displayReadyCapability.promise,h]).then(([K,J])=>{if(this.destroyed){O();return}if(this._stats?.time("Rendering"),!(J.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:K,optionalContentConfig:J}),P.operatorListChanged()}).catch(O),X}getOperatorList({intent:t="display",annotationMode:i=Rn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function l(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=l,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>gr.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function l(){c.read().then(function({value:h,done:f}){if(f){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),l()},r)}const c=i.getReader(),u={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new rm),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:l,transfer:c}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:l,modifiedIds:r},c).getReader(),f=this._intentStates.get(i);f.streamReader=h;const g=()=>{h.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof xh){let r=JS;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new Nn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Dn,mi,Wi,es,ho,is,ns,De,ao,y0,b0,ur,na,ro;const $t=class $t{constructor({name:t=null,port:i=null,verbosity:s=BA()}={}){Si(this,De);Si(this,Dn,Promise.withResolvers());Si(this,mi,null);Si(this,Wi,null);Si(this,es,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(Yt($t,ns).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Yt($t,ns).set(i,this),wi(this,De,y0).call(this,i)}else wi(this,De,b0).call(this)}get promise(){return Yt(this,Dn).promise}get port(){return Yt(this,Wi)}get messageHandler(){return Yt(this,mi)}destroy(){this.destroyed=!0,Yt(this,es)?.terminate(),Fe(this,es,null),Yt($t,ns).delete(Yt(this,Wi)),Fe(this,Wi,null),Yt(this,mi)?.destroy(),Fe(this,mi,null)}static create(t){const i=Yt(this,ns).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new $t(t)}static get workerSrc(){if(ia.workerSrc)return ia.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return yt(this,"_setupFakeWorkerGlobal",(async()=>Yt(this,na,ro)?Yt(this,na,ro):(await import(this.workerSrc)).WorkerMessageHandler)())}};Dn=new WeakMap,mi=new WeakMap,Wi=new WeakMap,es=new WeakMap,ho=new WeakMap,is=new WeakMap,ns=new WeakMap,De=new WeakSet,ao=function(){Yt(this,Dn).resolve(),Yt(this,mi).send("configure",{verbosity:this.verbosity})},y0=function(t){Fe(this,Wi,t),Fe(this,mi,new cr("main","worker",t)),Yt(this,mi).on("ready",()=>{}),wi(this,De,ao).call(this)},b0=function(){if(Yt($t,is)||Yt($t,na,ro)){wi(this,De,ur).call(this);return}let{workerSrc:t}=$t;try{$t._isSameOrigin(window.location,t)||(t=$t._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new cr("main","worker",i),r=()=>{l.abort(),s.destroy(),i.terminate(),this.destroyed?Yt(this,Dn).reject(new Error("Worker was destroyed")):wi(this,De,ur).call(this)},l=new AbortController;i.addEventListener("error",()=>{Yt(this,es)||r()},{signal:l.signal}),s.on("test",u=>{if(l.abort(),this.destroyed||!u){r();return}Fe(this,mi,s),Fe(this,Wi,i),Fe(this,es,i),wi(this,De,ao).call(this)}),s.on("ready",u=>{if(l.abort(),this.destroyed){r();return}try{c()}catch{wi(this,De,ur).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{yo("The worker has been disabled.")}wi(this,De,ur).call(this)},ur=function(){Yt($t,is)||(pt("Setting up fake worker."),Fe($t,is,!0)),$t._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Yt(this,Dn).reject(new Error("Worker was destroyed"));return}const i=new uS;Fe(this,Wi,i);const s=`fake${jg($t,ho)._++}`,r=new cr(s+"_worker",s,i);t.setup(r,i),Fe(this,mi,new cr(s,s+"_worker",i)),wi(this,De,ao).call(this)}).catch(t=>{Yt(this,Dn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},na=new WeakSet,ro=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Si($t,na),Si($t,ho,0),Si($t,is,!1),Si($t,ns,new WeakMap),Me&&(Fe($t,is,!0),ia.workerSrc||="./pdf.worker.mjs"),$t._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},$t._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},$t.fromPort=t=>{if(YA("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return $t.create(t)};let mr=$t;class i1{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,i,s,r,l,c){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new p0,this.fontLoader=new sS({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,i=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,r),r}get annotationStorage(){return yt(this,"annotationStorage",new Rh)}getRenderingIntent(t,i=Rn.ENABLE,s=null,r=!1,l=!1){let c=We.DISPLAY,u=hh;switch(t){case"any":c=We.ANY;break;case"display":break;case"print":c=We.PRINT;break;default:pt(`getRenderingIntent - invalid intent: ${t}`)}const h=c&We.PRINT&&s instanceof i0?s:this.annotationStorage;switch(i){case Rn.DISABLE:c+=We.ANNOTATIONS_DISABLE;break;case Rn.ENABLE:break;case Rn.ENABLE_FORMS:c+=We.ANNOTATIONS_FORMS;break;case Rn.ENABLE_STORAGE:c+=We.ANNOTATIONS_STORAGE,u=h.serializable;break;default:pt(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(c+=We.IS_EDITING),l&&(c+=We.OPLIST);const{ids:f,hash:g}=h.modifiedIds,y=[c,u.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Te.cleanup(),this._networkStream?.cancelAllRequests(new Nn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{Rt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){r.close();return}Rt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:c}=this._fullReader;return(!r||!l)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(s,r)=>{Rt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(s.begin,s.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:c,done:u}){if(u){r.close();return}Rt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{l.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new t1(s,this))}),t.on("DocException",s=>{i._capability.reject(Ue(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!i.onPassword)throw Ue(s);const r=l=>{l instanceof Error?this.#r.reject(l):this.#r.resolve({password:l})};i.onPassword(r,s.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",s=>{i.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,l])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in l){const y=l.error;pt(`Error during font loading: ${y}`),this.commonObjs.resolve(s,y);break}const c=new Ht(l),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,b)=>globalThis.FontInspector.fontAdded(y,b):null,h=new aS(c,u,l.extra,l.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:f}=l;Rt(f,"The imageRef must be defined.");for(const y of this.#e.values())for(const[,b]of y.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(s,l);break;case"Pattern":const g=new pe(l);this.commonObjs.resolve(s,g.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,l,c])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",s=>{this.destroyed||i.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#n.get(i);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#i.set(l.refStr,t);const c=new e1(i,l,this,this._params.pdfBug);return this.#e.set(i,c),c});return this.#n.set(i,r),r}getPageIndex(t){return dh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(i=>new kS(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new LS(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Te.cleanup()}}cachedPageNumber(t){if(!dh(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(i)??null}}class n1{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class Zs{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:l,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:w=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new n1(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(Zs.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Zs.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:l,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ea(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Zs.#e.delete(this._canvas),t||=new xh(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Zs.#e.delete(this._canvas),this.callback())))}}const v0="5.4.394",s1="2cc809ade";class hi{#t=null;#e=null;#n;#i=null;#r=!1;#a=!1;#s=null;#l;#c=null;#o=null;static#d=null;static get _keyboardManager(){return yt(this,"_keyboardManager",new xr([[["Escape","mac+Escape"],hi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],hi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],hi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],hi.prototype._moveToPrevious],[["Home","mac+Home"],hi.prototype._moveToBeginning],[["End","mac+End"],hi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#o=t?._uiManager||i,this.#l=this.#o._eventBus,this.#n=t?.color?.toUpperCase()||this.#o?.highlightColors.values().next().value||"#FFFF98",hi.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#o._signal;t.addEventListener("click",this.#g.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#o._signal;t.addEventListener("contextmenu",di,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,r]of this.#o.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=s,l.setAttribute("data-l10n-id",hi.#d[s]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=r,l.ariaSelected=r===this.#n,l.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(l)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastChild?.focus()}#m(t){hi._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#o.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#o.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class yr{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,yr.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",yr.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Mm(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function rr(d){return Math.max(0,Math.min(255,255*d))}class Rm{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=rr(t),[t,t,t]}static G_HTML([t]){const i=Mm(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(rr)}static RGB_HTML(t){return`#${t.map(Mm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[rr(1-Math.min(1,t+r)),rr(1-Math.min(1,s+r)),rr(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,l=1-i,c=1-s,u=Math.min(r,l,c);return["CMYK",r,l,c,u]}}class a1{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Gt("Abstract method `_createSVG` called.")}}class uo extends a1{_createSVG(t){return document.createElementNS(Ki,t)}}const r1=9,as=new WeakSet,l1=new Date().getTimezoneOffset()*60*1e3;class ih{static create(t){switch(t.data.annotationType){case ue.LINK:return new kh(t);case ue.TEXT:return new c1(t);case ue.WIDGET:switch(t.data.fieldType){case"Tx":return new u1(t);case"Btn":return t.data.radioButton?new A0(t):t.data.checkBox?new d1(t):new f1(t);case"Ch":return new p1(t);case"Sig":return new h1(t)}return new ls(t);case ue.POPUP:return new gh(t);case ue.FREETEXT:return new S0(t);case ue.LINE:return new m1(t);case ue.SQUARE:return new y1(t);case ue.CIRCLE:return new b1(t);case ue.POLYLINE:return new w0(t);case ue.CARET:return new A1(t);case ue.INK:return new Bh(t);case ue.POLYGON:return new v1(t);case ue.HIGHLIGHT:return new E0(t);case ue.UNDERLINE:return new S1(t);case ue.SQUIGGLY:return new w1(t);case ue.STRIKEOUT:return new E1(t);case ue.STAMP:return new _0(t);case ue.FILEATTACHMENT:return new _1(t);default:return new Wt(t)}}}class Wt{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Wt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let l=-1/0,c=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>c?(c=i[u+1],l=i[u+2]):i[u+1]===c&&(l=Math.max(l,i[u+2]));return[l,c]}if(s?.length>=1){for(const u of s)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>c?(c=u[h+1],l=u[h]):u[h+1]===c&&(l=Math.max(l,u[h]));if(l!==1/0)return[l,c]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:c}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-l)/s,t[1]=100*(t[1]-c)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${fr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${fr}${i.id}`,{id:i.id,annotationType:i.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/l}%`,i.top=`${100*(c-t[3]+h)/c}%`,r===0?(i.width=`${100*(t[2]-t[0])/l}%`,i.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",i.id),!(this instanceof ls)&&!(this instanceof kh)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(l.title=i.alternativeText),i.noRotate&&l.classList.add("norotate"),!i.rect||this instanceof gh){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,l),l}const{width:u,height:h}=this;if(!t&&i.borderStyle.width>0){c.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,x=i.borderStyle.verticalCornerRadius;if(S>0||x>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;c.borderRadius=T}else if(this instanceof A0){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=T}switch(i.borderStyle.style){case Ys.SOLID:c.borderStyle="solid";break;case Ys.DASHED:c.borderStyle="dashed";break;case Ys.BEVELED:pt("Unimplemented border style: beveled");break;case Ys.INSET:pt("Unimplemented border style: inset");break;case Ys.UNDERLINE:c.borderBottomStyle="solid";break}const E=i.borderColor||null;E?(this.#e=!0,c.borderColor=nt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const f=nt.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=r.rawDims;c.left=`${100*(f[0]-b)/g}%`,c.top=`${100*(f[1]-A)/y}%`;const{rotation:w}=i;return i.hasOwnCanvas||w===0?(c.width=`${100*u/g}%`,c.height=`${100*h/y}%`):this.setRotation(w,l),l}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),i.style.width=`${100*l/s}%`,i.style.height=`${100*c/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const l=r.detail[i],c=l[0],u=l.slice(1);r.target.style[s]=Rm[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Rm[`${c}_rgb`](u)})};return yt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,l]of Object.entries(i)){const c=s[r];if(c){const u={detail:{[r]:l},target:t};c(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,l]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,x,E,T]=t.subarray(2,6);if(r===S&&l===x&&i===E&&s===T)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:x}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const h=r-i,f=l-s,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,x=t.length;S<x;S+=8){const E=t[S],T=t[S+1],C=t[S+2],L=t[S+3],N=g.createElement("rect"),O=(C-i)/h,P=(l-T)/f,X=(E-C)/h,K=(T-L)/f;N.setAttribute("x",O),N.setAttribute("y",P),N.setAttribute("width",X),N.setAttribute("height",K),A.append(N),u?.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${P}" width="${X}" height="${K}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate),this.#n=new gh({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Gt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:c,exportValues:u}of r){if(l===-1||c===i)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!as.has(f)){pt(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:h,domElement:f})}return s}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,c=r.getAttribute("data-element-id");c!==i&&as.has(r)&&s.push({id:c,exportValue:l,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class o1 extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class kh extends Wt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const l=s.get(r);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:l,include:c}=i,u=[];if(r.length!==0||l.length!==0){const g=new Set(l);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:A}of b)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===c&&u.push(b)}else for(const g of Object.values(this._fieldObjects))u.push(...g);const h=this.annotationStorage,f=[];for(const g of u){const{id:y}=g;switch(f.push(y),g.type){case"text":{const A=g.defaultValue||"";h.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;h.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";h.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!as.has(b)){pt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class c1 extends Wt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class ls extends Wt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return _e.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,l){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!i.focused||!c.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c)}})})}_setEventListeners(t,i,s,r){for(const[l,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,l,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":nt.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||r1,l=t.style;let c;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(f/($u*r))||1,y=f/g;c=Math.min(r,h(y/$u))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,h(f/$u))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=nt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class u1 extends ls{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[i]=s),l.setValue(c.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let l=r.value||"";const c=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),as.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",w=>{t.setValue(i,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=h.userValue=S,h.formattedValue=null});let A=w=>{const{formattedValue:S}=h;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(h.focused)return;const{target:x}=S;if(b&&(x.type=g,y&&(x.step=y)),h.userValue){const E=h.userValue;if(b)if(g==="time"){const T=new Date(E),C=[T.getHours(),T.getMinutes(),T.getSeconds()];x.value=C.map(L=>L.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-l1).toISOString().split(g==="date"?"T":".",1)[0];else x.value=E}h.lastCommittedValue=x.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const x={value(E){h.userValue=E.detail.value??"",b||t.setValue(i,{value:h.userValue.toString()}),E.target.value=h.userValue},formattedValue(E){const{formattedValue:T}=E.detail;h.formattedValue=T,T!=null&&E.target!==document.activeElement&&(E.target.value=T);const C={formattedValue:T};b&&(C.value=T),t.setValue(i,C)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:T}=E.detail,{target:C}=E;if(T===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",T);let L=h.userValue;!L||L.length<=T||(L=L.slice(0,T),C.value=h.userValue=L,t.setValue(i,{value:L}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(x,S)}),s.addEventListener("keydown",S=>{h.commitKey=1;let x=-1;if(S.key==="Escape"?x=0:S.key==="Enter"&&!this.data.multiLine?x=2:S.key==="Tab"&&(h.commitKey=3),x===-1)return;const{value:E}=S.target;h.lastCommittedValue!==E&&(h.lastCommittedValue=E,h.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:x,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=A;A=null,s.addEventListener("blur",S=>{if(!h.focused||!S.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:x}=S;let{value:E}=x;if(b){if(E&&g==="time"){const T=E.split(":").map(C=>parseInt(C,10));E=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),x.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();x.type="text"}h.userValue=E,h.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:h.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{h.lastCommittedValue=null;const{data:x,target:E}=S,{value:T,selectionStart:C,selectionEnd:L}=E;let N=C,O=L;switch(S.inputType){case"deleteWordBackward":{const P=T.substring(0,C).match(/\w*[^\w]*$/);P&&(N-=P[0].length);break}case"deleteWordForward":{const P=T.substring(C).match(/^[^\w]*\w*/);P&&(O+=P[0].length);break}case"deleteContentBackward":C===L&&(N-=1);break;case"deleteContentForward":C===L&&(O+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:T,change:x||"",willCommit:!1,selStart:N,selEnd:O}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class h1 extends ls{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class d1 extends ls{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return as.add(l),l.setAttribute("data-element-id",s),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",i.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s)){const g=h&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=i.defaultFieldValue||"Off";c.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class A0 extends ls{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const c of this._getElementsByName(i.fieldName,s))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(as.add(l),l.setAttribute("data-element-id",s),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=i.defaultFieldValue;c.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const c=i.buttonValue;l.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class f1 extends kh{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class p1 extends ls{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");as.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,s.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),l=!1),r.append(y)}let c=null;if(l){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),c=()=>{g.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let h=u(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(b){c?.();const A=b.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of r.options)S.selected=w.has(S.value);t.setValue(i,{value:u(!0)}),h=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,w=b.detail.remove;A[w].selected=!1,r.remove(w),A.length>0&&Array.prototype.findIndex.call(A,x=>x.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),h=u(!1)},insert(b){const{index:A,displayValue:w,exportValue:S}=b.detail.insert,x=r.children[A],E=document.createElement("option");E.textContent=w,E.value=S,x?x.before(E):r.append(E),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const w of A){const{displayValue:S,exportValue:x}=w,E=document.createElement("option");E.textContent=S,E.value=x,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const w of b.target.options)w.selected=A.has(w.index);t.setValue(i,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{const y=u(!0),b=u(!1);t.setValue(i,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:h,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class gh extends Wt{constructor(t){const{data:i,elements:s,parent:r}=t,l=!!r._commentManager;if(super(t,{isRenderable:!l&&Wt._hasPopupData(i)}),this.elements=s,l&&Wt._hasPopupData(i)){const c=this.popup=this.#t();for(const u of s)u.popup=c}else this.popup=null}#t(){return new g1({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Qs}${r}`).join(",")),this.container}}class g1{#t=null;#e=this.#q.bind(this);#n=this.#U.bind(this);#i=this.#O.bind(this);#r=this.#w.bind(this);#a=null;#s=null;#l=null;#c=null;#o=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#v=null;#b=null;#x=null;#E=null;#S=null;#T=!1;#A=null;#_=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:l,contentsObj:c,richText:u,parent:h,rect:f,parentRect:g,open:y,commentManager:b=null}){this.#s=t,this.#E=r,this.#l=c,this.#x=u,this.#d=h,this.#a=i,this.#b=f,this.#h=g,this.#o=s,this.#t=b,this.#A=s[0],this.#c=oh.toDateObject(l),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b||(this.#D(),this.#s.hidden=!0,y&&this.#w())}#D(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const i of this.trigger)i.addEventListener("click",this.#r,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#o)i.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#o.find(i=>i.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#y||this.#M(),!this.#y)return;const{signal:t}=this.#g=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},l=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#p=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#A.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#R(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),u.after(c)}}#R(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[t,i]=this.#y,{style:s}=this.#p;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#z(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:l}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:l}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#A.commentText,this.#_}set comment(t){t!==this.comment&&(this.#A.commentText=this.#_=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=i)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#p.getBoundingClientRect(),{x:r,y:l,width:c,height:u}=this.#A.layer.getBoundingClientRect();return[(t-r)/c,(i+s-l)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:l,y:c,width:u,height:h}=r;this.#t.showDialog(null,this,l+i*u,c+s*h,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const s=t.style.outlineColor=nt.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#E?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#E}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}Zm({html:this.#L||this.#l.str,dir:this.#l?.dir,className:"popupContent"},t),this.#s.append(t)}get#L(){const t=this.#x,i=this.#l;return t?.str&&(!i?.str||i.str===t.str)&&this.#x.html||null}get#k(){return this.#L?.attributes?.style?.fontSize||0}get#F(){return this.#L?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))i.push({name:"span",value:l,attributes:r});return s}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#_=null):i&&(i.deleted?this.remove():(this.#z(),this.#_=i.text)),t&&(this.#y=null,this.#M(),this.#R());return}if(s||i?.deleted){this.remove();return}this.#D(),this.#S||={contentsObj:this.#l,richText:this.#x},t&&(this.#u=null),i&&i.text&&(this.#x=this.#B(i.text),this.#c=oh.toDateObject(i.date),this.#l=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#l,richText:this.#x}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:l}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#b;for(const w of this.#o)if(!u||nt.intersect(w.data.rect,u)!==null){u=w.data.rect,c=!0;break}const h=nt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),g=c?u[2]-u[0]+5:0,y=h[0]+g,b=h[1];this.#u=[100*(y-r)/i,100*(b-l)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#O(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#C(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#T&&(this.#m||this.#O(),this.#T=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class S0 extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=gt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class m1 extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class y1 extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",i-l),c.setAttribute("height",s-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class b1 extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",i/2),c.setAttribute("cy",s/2),c.setAttribute("rx",i/2-l/2),c.setAttribute("ry",s/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class w0 extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:l,height:c}=this;if(!i)return this.container;const u=this.svgFactory.create(l,c,!0);let h=[];for(let g=0,y=i.length;g<y;g+=2){const b=i[g]-t[0],A=t[3]-i[g+1];h.push(`${b},${A}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class v1 extends w0{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class A1 extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Bh extends Wt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?gt.HIGHLIGHT:gt.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:l}}=this,{transform:c,width:u,height:h}=this.#n(i,t),f=this.svgFactory.create(u,h,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),g.append(A)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,l=this.#t;if(i>=0&&l.setAttribute("stroke-width",i||1),s)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",s[c].join(","));if(r){const{transform:c,width:u,height:h}=this.#n(this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class E0 extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=gt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class S1 extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class w1 extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class E1 extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class _0 extends Wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=gt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class _1 extends Wt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=_e.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Ph{#t=null;#e=null;#n=null;#i=new Map;#r=null;#a=null;#s=[];#l=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:l,viewport:c,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:g}){this.div=t,this.#t=i,this.#e=s,this.#r=u||null,this.#a=f||null,this.#n=g||new Rh,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;ss(s,this.viewport);const r=new Map,l=[],c={data:null,layer:s,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new uo,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const h=u.annotationType===ue.POPUP;if(h){const y=r.get(u.id);if(!y)continue;if(!this._commentManager){l.push(u);continue}c.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=ih.create(c);if(!f.isRenderable)continue;if(!h&&(this.#s.push(f),u.popupRef)){const y=r.get(u.popupRef);y?y.push(f):r.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of l){const h=c.elements=r.get(u.id);c.data=u;const f=ih.create(c);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${Qs}${u.id}`,u.hidden&&(g.style.visibility="hidden"),h.at(-1).container.after(g)}this.#o()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#l){this.#l=!0;for(const{contentElement:s,data:{id:r}}of this.#s){const l=s.id=`${Qs}${r}`;t.push(this.#r?.getAriaAttributes(l).then(c=>{if(c)for(const[u,h]of c)s.setAttribute(u,h)}))}}this.#s.sort(({data:{rect:[s,r,l,c]}},{data:{rect:[u,h,f,g]}})=>{if(s===l&&r===c)return 1;if(u===f&&h===g)return-1;const y=c,b=r,A=(r+c)/2,w=g,S=h,x=(h+g)/2;if(A>=w&&x<=b)return-1;if(x>=y&&A<=S)return 1;const E=(s+l)/2,T=(u+f)/2;return E-T});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#a,svgFactory:new uo,parent:this};for(const s of t){s.borderStyle||=Ph._defaultBorderStyle,i.data=s;const r=ih.create(i);r.isRenderable&&(r.render(),r.contentElement.id=`${Qs}${s.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,ss(i,{rotation:t.rotation}),this.#o(),i.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):r.append(s);const c=this.#i.get(i);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,l=new o1({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#n});return l.render(),l.contentElement.id=`${Qs}${s}`,l.createOrUpdatePopup(),this.#s.push(l),l}removeAnnotation(t){const i=this.#s.findIndex(r=>r.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return yt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ys.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Jl=/\r\n?|\n/g;class ge extends rt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=ge.prototype,i=l=>l.isEmpty(),s=Ln.TRANSLATE_SMALL,r=Ln.TRANSLATE_BIG;return yt(this,"_keyboardManager",new xr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=gt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||ge._defaultColor||rt._defaultLineColor,this.#i=t.fontSize||ge._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){rt.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Mt.FREETEXT_SIZE:ge._defaultFontSize=i;break;case Mt.FREETEXT_COLOR:ge._defaultColor=i;break}}updateParams(t,i){switch(t){case Mt.FREETEXT_SIZE:this.#r(i);break;case Mt.FREETEXT_COLOR:this.#a(i);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,ge._defaultFontSize],[Mt.FREETEXT_COLOR,ge._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#i],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new yr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}#r(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#l()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-ge._internalPadding*t,-(ge._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(ge.#c(s)),i=s);return t.join(`
`)}#l(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,c=l.style.display,u=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#o(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ge._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,g]=this.pageDimensions,[y,b]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(c[0]-y)/f,w=i+this.height-(c[1]-b)/g;break;case 90:A=t+(c[0]-y)/f,w=i-(c[1]-b)/g,[u,h]=[h,-u];break;case 180:A=t-this.width+(c[0]-y)/f,w=i-(c[1]-b)/g,[u,h]=[-u,-h];break;case 270:A=t+(c[0]-y-this.height*g)/f,w=i+(c[1]-b-this.width*f)/g,[u,h]=[-h,u];break}this.setAt(A*r,w*l,u,h)}else this._moveAfterPaste(t,i);this.#o(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Jl,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=ge.#h(i.getData("text")||"").replaceAll(Jl,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:u,startOffset:h}=c,f=[],g=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(g.push(u.nodeValue.slice(h).replaceAll(Jl,"")),A!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===A){w=g;continue}w.push(ge.#c(S))}}f.push(u.nodeValue.slice(0,h).replaceAll(Jl,""))}else if(u===this.editorDiv){let A=f,w=0;for(const S of this.editorDiv.childNodes)w++===h&&(A=g),A.push(ge.#c(S))}this.#t=`${f.join(`
`)}${r}${g.join(`
`)}`,this.#o();const y=new Range;let b=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(b<=w){y.setStart(A,b),y.setEnd(A,b);break}b-=w}l.removeAllRanges(),l.addRange(y)}#o(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ge._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof S0){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:f,id:g,popupRef:y,richText:b,contentsObj:A,creationDate:w,modificationDate:S},textContent:x,textPosition:E,parent:{page:{pageNumber:T}}}=t;if(!x||x.length===0)return null;r=t={annotationType:gt.FREETEXT,color:Array.from(u),fontSize:c,value:x.join(`
`),position:E,pageIndex:T-1,rect:h.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:w,modificationDate:S}}const l=await super.deserialize(t,i,s);return l.#i=t.fontSize,l.color=nt.makeHexColor(...t.color),l.#t=ge.#h(t.value),l._initialData=r,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==l}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const l=document.createElement("div");l.append(r?document.createTextNode(r):document.createElement("br")),i.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class et{static PRECISION=1e-4;toSVGPath(){Gt("Abstract method `toSVGPath` must be implemented.")}get box(){Gt("Abstract getter `box` must be implemented.")}serialize(t,i){Gt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,l,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u]*r,c[u+1]=s+t[u+1]*l;return c}static _rescaleAndSwap(t,i,s,r,l,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u+1]*r,c[u+1]=s+t[u]*l;return c}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)r[l]=i+t[l],r[l+1]=s+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,l){switch(l){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,l,c){return[(t+5*s)/6,(i+5*r)/6,(5*s+l)/6,(5*r+c)/6,(s+l)/2,(r+c)/2]}}class ts{#t;#e=[];#n;#i;#r=[];#a=new Float32Array(18);#s;#l;#c;#o;#d;#h;#f=[];static#m=8;static#g=2;static#u=ts.#m+ts.#g;constructor({x:t,y:i},s,r,l,c,u=0){this.#t=s,this.#h=l*r,this.#i=c,this.#a.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#o=ts.#m*r,this.#c=ts.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[s,r,l,c]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/l,(this.#l+(t[1]-i[1])/2-r)/c,(this.#s+(i[0]-t[0])/2-s)/l,(this.#l+(i[1]-t[1])/2-r)/c]}add({x:t,y:i}){this.#s=t,this.#l=i;const[s,r,l,c]=this.#t;let[u,h,f,g]=this.#a.subarray(8,12);const y=t-f,b=i-g,A=Math.hypot(y,b);if(A<this.#c)return!1;const w=A-this.#o,S=w/A,x=S*y,E=S*b;let T=u,C=h;u=f,h=g,f+=x,g+=E,this.#f?.push(t,i);const L=-E/w,N=x/w,O=L*this.#h,P=N*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+O,g+P],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-O,g-P],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([u+O,h+P],2),this.#r.push(NaN,NaN,NaN,NaN,(u+O-s)/l,(h+P-r)/c),this.#a.set([u-O,h-P],14),this.#e.push(NaN,NaN,NaN,NaN,(u-O-s)/l,(h-P-r)/c)),this.#a.set([T,C,u,h,f,g],6),!this.isEmpty()):(this.#a.set([T,C,u,h,f,g],6),Math.abs(Math.atan2(C-h,T-u)-Math.atan2(E,x))<Math.PI/2?([u,h,f,g]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/l,((h+g)/2-r)/c),[u,h,T,C]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-s)/l,((C+h)/2-r)/c),!0):([T,C,u,h,f,g]=this.#a.subarray(0,6),this.#r.push(((T+5*u)/6-s)/l,((C+5*h)/6-r)/c,((5*u+f)/6-s)/l,((5*h+g)/6-r)/c,((u+f)/2-s)/l,((h+g)/2-r)/c),[f,g,u,h,T,C]=this.#a.subarray(12,18),this.#e.push(((T+5*u)/6-s)/l,((C+5*h)/6-r)/c,((5*u+f)/6-s)/l,((5*h+g)/6-r)/c,((u+f)/2-s)/l,((h+g)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,i=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,i,s,r]=this.#t,[l,c,u,h]=this.#p();return`M${(this.#a[2]-t)/s} ${(this.#a[3]-i)/r} L${(this.#a[4]-t)/s} ${(this.#a[5]-i)/r} L${l} ${c} L${u} ${h} L${(this.#a[16]-t)/s} ${(this.#a[17]-i)/r} L${(this.#a[14]-t)/s} ${(this.#a[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#b(t){const[i,s,r,l]=this.#t,c=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[h,f,g,y]=this.#p();t.push(`L${(c[0]-i)/r} ${(c[1]-s)/l} L${h} ${f} L${g} ${y} L${(u[0]-i)/r} ${(u[1]-s)/l}`)}newFreeDrawOutline(t,i,s,r,l,c){return new x0(t,i,s,r,l,c)}getOutlines(){const t=this.#r,i=this.#e,s=this.#a,[r,l,c,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=h.length-2;y<b;y+=2)h[y]=(this.#f[y]-r)/c,h[y+1]=(this.#f[y+1]-l)/u;if(h[h.length-2]=(this.#s-r)/c,h[h.length-1]=(this.#l-l)/u,isNaN(s[6])&&!this.isEmpty())return this.#x(h);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#S(f,g);for(let y=i.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(i[y+b])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=i[y+b],f[g+1]=i[y+b+1],g+=2}return this.#E(f,g),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#n,this.#i)}#x(t){const i=this.#a,[s,r,l,c]=this.#t,[u,h,f,g]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/l,(i[3]-r)/c,NaN,NaN,NaN,NaN,(i[4]-s)/l,(i[5]-r)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[16]-s)/l,(i[17]-r)/c,NaN,NaN,NaN,NaN,(i[14]-s)/l,(i[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#E(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#S(t,i){const s=this.#a.subarray(4,6),r=this.#a.subarray(16,18),[l,c,u,h]=this.#t,[f,g,y,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(s[0]-l)/u,(s[1]-c)/h,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-l)/u,(r[1]-c)/h],i),i+=24}}class x0 extends et{#t;#e=new Float32Array(4);#n;#i;#r;#a;#s;constructor(t,i,s,r,l,c){super(),this.#s=t,this.#r=i,this.#t=s,this.#a=r,this.#n=l,this.#i=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#l(c);const[u,h,f,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-h)/g;for(let y=0,b=i.length;y<b;y+=2)i[y]=(i[y]-u)/f,i[y+1]=(i[y+1]-h)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],l){const c=s-t,u=r-i;let h,f;switch(l){case 0:h=et._rescale(this.#s,t,r,c,-u),f=et._rescale(this.#r,t,r,c,-u);break;case 90:h=et._rescaleAndSwap(this.#s,t,i,c,u),f=et._rescaleAndSwap(this.#r,t,i,c,u);break;case 180:h=et._rescale(this.#s,s,i,-c,u),f=et._rescale(this.#r,s,i,-c,u);break;case 270:h=et._rescaleAndSwap(this.#s,s,r,-c,-u),f=et._rescaleAndSwap(this.#r,s,r,-c,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#l(t){const i=this.#s;let s=i[4],r=i[5];const l=[s,r,s,r];let c=s,u=r,h=s,f=r;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,w=i.length;A<w;A+=6){const S=i[A+4],x=i[A+5];isNaN(i[A])?(nt.pointBoundingBox(S,x,l),u>x?(c=S,u=x):u===x&&(c=g(c,S)),f<x?(h=S,f=x):f===x&&(h=g(h,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,nt.bezierBoundingBox(s,r,...i.slice(A,A+6),y),nt.rectBoundingBox(y[0],y[1],y[2],y[3],l),u>y[1]?(c=y[0],u=y[1]):u===y[1]&&(c=g(c,y[0])),f<y[3]?(h=y[2],f=y[3]):f===y[3]&&(h=g(h,y[2]))),s=S,r=x}const b=this.#e;b[0]=l[0]-this.#n,b[1]=l[1]-this.#n,b[2]=l[2]-l[0]+2*this.#n,b[3]=l[3]-l[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,i,s,r,l,c=0){return new ts(t,i,s,r,l,c)}getNewOutline(t,i){const[s,r,l,c]=this.#e,[u,h,f,g]=this.#t,y=l*f,b=c*g,A=s*f+u,w=r*g+h,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+w},this.#t,this.#a,t,this.#i,i??this.#n);for(let x=2;x<this.#r.length;x+=2)S.add({x:this.#r[x]*y+A,y:this.#r[x+1]*b+w});return S.getOutlines()}}class mh{#t;#e;#n;#i=[];#r=[];constructor(t,i=0,s=0,r=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:S,y:x,width:E,height:T}of t){const C=Math.floor((S-i)/c)*c,L=Math.ceil((S+E+i)/c)*c,N=Math.floor((x-i)/c)*c,O=Math.ceil((x+T+i)/c)*c,P=[C,N,O,!0],X=[L,N,O,!1];this.#i.push(P,X),nt.rectBoundingBox(C,N,L,O,l)}const u=l[2]-l[0]+2*s,h=l[3]-l[1]+2*s,f=l[0]-s,g=l[1]-s;let y=r?-1/0:1/0,b=1/0;const A=this.#i.at(r?-1:-2),w=[A[0],A[2]];for(const S of this.#i){const[x,E,T,C]=S;!C&&r?E<b?(b=E,y=x):E===b&&(y=Math.max(y,x)):C&&!r&&(E<b?(b=E,y=x):E===b&&(y=Math.min(y,x))),S[0]=(x-f)/u,S[1]=(E-g)/h,S[2]=(T-g)/h}this.#t=new Float32Array([f,g,u,h]),this.#e=[y,b],this.#n=w}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#o(i)),this.#l(i)):(this.#c(i),t.push(...this.#o(i)));return this.#a(t)}#a(t){const i=[],s=new Set;for(const c of t){const[u,h,f]=c;i.push([u,h,c],[u,f,c])}i.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=i.length;c<u;c+=2){const h=i[c][2],f=i[c+1][2];h.push(f),f.push(h),s.add(h),s.add(f)}const r=[];let l;for(;s.size>0;){const c=s.values().next().value;let[u,h,f,g,y]=c;s.delete(c);let b=u,A=h;for(l=[u,f],r.push(l);;){let w;if(s.has(g))w=g;else if(s.has(y))w=y;else break;s.delete(w),[u,h,f,g,y]=w,b!==u&&(l.push(b,A,u,A===h?h:f),b=u),A=A===h?f:h}l.push(b,A)}return new x1(r,this.#t,this.#e,this.#n)}#s(t){const i=this.#r;let s=0,r=i.length-1;for(;s<=r;){const l=s+r>>1,c=i[l][0];if(c===t)return l;c<t?s=l+1:r=l-1}return r+1}#l([,t,i]){const s=this.#s(t);this.#r.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let r=s;r<this.#r.length;r++){const[l,c]=this.#r[r];if(l!==t)break;if(l===t&&c===i){this.#r.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[l,c]=this.#r[r];if(l!==t)break;if(l===t&&c===i){this.#r.splice(r,1);return}}}#o(t){const[i,s,r]=t,l=[[i,s,r]],c=this.#s(r);for(let u=0;u<c;u++){const[h,f]=this.#r[u];for(let g=0,y=l.length;g<y;g++){const[,b,A]=l[g];if(!(f<=b||A<=h)){if(b>=h){if(A>f)l[g][1]=f;else{if(y===1)return[];l.splice(g,1),g--,y--}continue}l[g][2]=h,A>f&&l.push([i,f,A])}}}return l}}class x1 extends et{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let l=2;l<i.length;l+=2){const c=i[l],u=i[l+1];c===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],l){const c=[],u=s-t,h=r-i;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*u,g[y+1]=r-f[y+1]*h;c.push(g)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class yh extends ts{newFreeDrawOutline(t,i,s,r,l,c){return new C1(t,i,s,r,l,c)}}class C1 extends x0{newOutliner(t,i,s,r,l,c=0){return new yh(t,i,s,r,l,c)}}class se extends rt{#t=null;#e=0;#n;#i=null;#r=null;#a=null;#s=null;#l=0;#c=null;#o=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=gt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=se.prototype;return yt(this,"_keyboardManager",new xr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||se._defaultColor,this.#p=t.thickness||se._defaultThickness,this.opacity=t.opacity||se._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#l=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new mh(this.#n,.001);this.#o=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#o.box;const i=new mh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#a=i.getOutlines();const{firstPoint:s}=this.#o;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#a;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#o=t;const r=1.5;if(this.#a=t.getNewOutline(this.#p/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:se.#_(this.#o.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:se.#_(this.#a.box,y),path:{d:this.#a.toSVGPath()}})}const[l,c,u,h]=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=u,this.height=h;break;case 90:{const[y,b]=this.parentDimensions;this.x=c,this.y=1-l,this.width=u*b/y,this.height=h*y/b;break}case 180:this.x=1-l,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-c,this.y=l,this.width=u*b/y,this.height=h*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-l)/u,(f[1]-c)/h];const{lastPoint:g}=this.#a;this.#m=[(g[0]-l)/u,(g[1]-c)/h]}static initialize(t,i){rt.initialize(t,i),se._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Mt.HIGHLIGHT_COLOR:se._defaultColor=i;break;case Mt.HIGHLIGHT_THICKNESS:se._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case Mt.HIGHLIGHT_COLOR:this.#x(i);break;case Mt.HIGHLIGHT_THICKNESS:this.#E(i);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,se._defaultColor],[Mt.HIGHLIGHT_THICKNESS,se._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||se._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#p||se._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#x(t){const i=(l,c)=>{this.color=l,this.opacity=c,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,se._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#E(t){const i=this.#p,s=r=>{this.#p=r,this.#S(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new hi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#R())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#T():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#S(t){this.#h&&(this.#b({highlightOutlines:this.#o.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#o.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#o.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#_([t,i,s,r],l){switch(l){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=se.#_(this.#o.box,t)):s=se.#_([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:se.#_(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),t0(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#D(t){se._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#l)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#R(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,l=this.#n,c=new Float32Array(l.length*8);let u=0;for(const{x:h,y:f,width:g,height:y}of l){const b=h*t+s,A=(1-f)*i+r;c[u]=c[u+4]=b,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=b+g*t,c[u+5]=c[u+7]=A-y*i,u+=8}return c}#L(t){return this.#o.serialize(t,this.#R())}static startHighlighting(t,i,{target:s,x:r,y:l}){const{x:c,y:u,width:h,height:f}=s.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=A=>{g.abort(),this.#F(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",te,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",di,{signal:y}),s.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new yh({x:r,y:l},[c,u,h,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof E0){const{data:{quadPoints:w,rect:S,rotation:x,id:E,color:T,opacity:C,popupRef:L,richText:N,contentsObj:O,creationDate:P,modificationDate:X},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:gt.HIGHLIGHT,color:Array.from(T),opacity:C,quadPoints:w,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:L,richText:N,comment:O?.str||null,creationDate:P,modificationDate:X}}else if(t instanceof Bh){const{data:{inkLists:w,rect:S,rotation:x,id:E,color:T,borderStyle:{rawWidth:C},popupRef:L,richText:N,contentsObj:O,creationDate:P,modificationDate:X},parent:{page:{pageNumber:K}}}=t;r=t={annotationType:gt.HIGHLIGHT,color:Array.from(T),thickness:C,inkLists:w,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:L,richText:N,comment:O?.str||null,creationDate:P,modificationDate:X}}const{color:l,quadPoints:c,inkLists:u,opacity:h}=t,f=await super.deserialize(t,i,s);f.color=nt.makeHexColor(...l),f.opacity=h||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[g,y]=f.pageDimensions,[b,A]=f.pageTranslation;if(c){const w=f.#n=[];for(let S=0;S<c.length;S+=8)w.push({x:(c[S]-b)/g,y:1-(c[S+1]-A)/y,width:(c[S+2]-c[S])/g,height:(c[S+1]-c[S+5])/y});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-b,y:y-(w[1]-A)},x=new yh(S,[0,0,g,y],1,f.#p/2,!0,.001);for(let C=0,L=w.length;C<L;C+=2)S.x=w[C]-b,S.y=y-(w[C+1]-A),x.add(S);const{id:E,clipPathId:T}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);f.#b({highlightOutlines:x.getOutlines(),highlightId:E,clipPathId:T}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#p,quadPoints:this.#z(),outlines:this.#L(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class C0{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Gt("Not implemented")}}class Ot extends rt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(Ot._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,l]of Object.entries(i))s.has(r)?Object.assign(t[r],l):t[r]=l;return t}static getDefaultDrawingOptions(t){Gt("Not implemented")}static get typesMap(){Gt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(Ot.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,l=r[i],c=u=>{r.updateProperty(i,u);const h=this.#t.updateProperty(i,u);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#l(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#l()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#l(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#o([t,i,s,r]){const{parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(c/l),r*(l/c)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(c/l),r*(l/c)];default:return[t,i,s,r]}}#d(){const{x:t,y:i,width:s,height:r,parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(l/c),r*(c/l)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(l/c),r*(c/l)];default:return[t,i,s,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#o(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:r,rotation:l,parentRotation:c,parentDimensions:[u,h]}=this;switch((l*4+c)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/h),r*(h/u),s*(u/h)];case 5:return[1-i,t,s*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-i,r*(h/u),s*(u/h)];case 7:return[i-s*(u/h),1-t-r*(h/u),s*(u/h),r*(h/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(h/u),i,r*(h/u),s*(u/h)];case 13:return[1-i-s*(u/h),t-r*(h/u),s*(u/h),r*(h/u)];case 14:return[1-t,1-i-s*(u/h),r*(h/u),s*(u/h)];case 15:return[i,1-t,s*(u/h),r*(h/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ot._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,l){Gt("Not implemented")}static startDrawing(t,i,s,r){const{target:l,offsetX:c,offsetY:u,pointerId:h,pointerType:f}=r;if(kt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:y,height:b}=l.getBoundingClientRect(),A=Ot.#i=new AbortController,w=t.combinedSignal(A);if(kt.setPointer(f,h),window.addEventListener("pointerup",S=>{kt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:w}),window.addEventListener("pointercancel",S=>{kt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",S=>{kt.isSamePointerType(S.pointerType)&&(kt.initializeAndAddPointerId(S.pointerId),Ot.#n.isCancellable()&&(Ot.#n.removeLastElement(),Ot.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",di,{signal:w}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),l.addEventListener("touchmove",S=>{kt.isSameTimeStamp(S.timeStamp)&&te(S)},{signal:w}),t.toggleDrawing(),i._editorUndoBar?.hide(),Ot.#n){t.drawLayer.updateProperties(this._currentDrawId,Ot.#n.startNew(c,u,y,b,g));return}i.updateUIForDefaultProperties(this),Ot.#n=this.createDrawerInstance(c,u,y,b,g),Ot.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Ot.#r.toSVGProperties(),Ot.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(kt.isSameTimeStamp(t.timeStamp),!Ot.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(kt.isSamePointerId(r)){if(kt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ot.#n.add(i,s)),kt.setTimeStamp(t.timeStamp),te(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Ot.#n=null,Ot.#r=null,kt.clearPointerType(),kt.clearTimeStamp()),Ot.#i&&(Ot.#i.abort(),Ot.#i=null,kt.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,Ot.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=Ot.#n,r=this._currentDrawId,l=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(l))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Mt.DRAW_STEP),!Ot.#n.isEmpty()){const{pageDimensions:[s,r],scale:l}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ot.#n.getOutlines(s*l,r*l,l,this._INNER_MARGIN),drawingOptions:Ot.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,l,c){Gt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:l,pageX:c,pageY:u}}=i.viewport,h=this.deserializeDraw(c,u,r,l,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#a({drawOutlines:h}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[r,l]=this.pageDimensions;return this.#t.serialize([i,s,r,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class T1{#t=new Float64Array(6);#e;#n;#i;#r;#a;#s="";#l=0;#c=new Tr;#o;#d;constructor(t,i,s,r,l,c){this.#o=s,this.#d=r,this.#i=l,this.#r=c,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i],this.#n=[{line:u,points:this.#a}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#r=i)}#h(t,i){return et._normalizePoint(t,i,this.#o,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,l,c]=this.#t.subarray(2,6),u=t-l,h=i-c;return Math.hypot(this.#o*u,this.#d*h)<=2?null:(this.#a.push(t,i),isNaN(s)?(this.#t.set([l,c,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,l,c,t,i],0),this.#e.push(...et.createBezierPoints(s,r,l,c,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,l){this.#o=s,this.#d=r,this.#i=l,[t,i]=this.#h(t,i);const c=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#a=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#a}),this.#t.set(c,0),this.#l=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#a=t.points,this.#l=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#a=r,this.#l=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=et.svgRound(this.#e[4]),i=et.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#a.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${i}`,this.#l=6}if(this.#a.length===4){const r=et.svgRound(this.#e[10]),l=et.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${l}`,this.#l=12,this.#s}const s=[];this.#l===0&&(s.push(`M ${t} ${i}`),this.#l=6);for(let r=this.#l,l=this.#e.length;r<l;r+=6){const[c,u,h,f,g,y]=this.#e.slice(r,r+6).map(et.svgRound);s.push(`C${c} ${u} ${h} ${f} ${g} ${y}`)}return this.#s+=s.join(" "),this.#l=this.#e.length,this.#s}getOutlines(t,i,s,r){const l=this.#n.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#n,t,i,s,this.#i,this.#r,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Tr extends et{#t;#e=0;#n;#i;#r;#a;#s;#l;#c;build(t,i,s,r,l,c,u){this.#r=i,this.#a=s,this.#s=r,this.#l=l,this.#c=c,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${et.svgRound(i[4])} ${et.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${et.svgRound(i[10])} ${et.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[l,c,u,h,f,g]=i.subarray(s,s+6).map(et.svgRound);t.push(`C${l} ${c} ${u} ${h} ${f} ${g}`)}}return t.join("")}serialize([t,i,s,r],l){const c=[],u=[],[h,f,g,y]=this.#d();let b,A,w,S,x,E,T,C,L;switch(this.#l){case 0:L=et._rescale,b=t,A=i+r,w=s,S=-r,x=t+h*s,E=i+(1-f-y)*r,T=t+(h+g)*s,C=i+(1-f)*r;break;case 90:L=et._rescaleAndSwap,b=t,A=i,w=s,S=r,x=t+f*s,E=i+h*r,T=t+(f+y)*s,C=i+(h+g)*r;break;case 180:L=et._rescale,b=t+s,A=i,w=-s,S=r,x=t+(1-h-g)*s,E=i+f*r,T=t+(1-h)*s,C=i+(f+y)*r;break;case 270:L=et._rescaleAndSwap,b=t+s,A=i+r,w=-s,S=-r,x=t+(1-f-y)*s,E=i+(1-h-g)*r,T=t+(1-f)*s,C=i+(1-h)*r;break}for(const{line:N,points:O}of this.#i)c.push(L(N,b,A,w,S,l?new Array(N.length):null)),u.push(L(O,b,A,w,S,l?new Array(O.length):null));return{lines:c,points:u,rect:[x,E,T,C]}}static deserialize(t,i,s,r,l,{paths:{lines:c,points:u},rotation:h,thickness:f}){const g=[];let y,b,A,w,S;switch(h){case 0:S=et._rescale,y=-t/s,b=i/r+1,A=1/s,w=-1/r;break;case 90:S=et._rescaleAndSwap,y=-i/r,b=-t/s,A=1/r,w=1/s;break;case 180:S=et._rescale,y=t/s+1,b=-i/r,A=-1/s,w=1/r;break;case 270:S=et._rescaleAndSwap,y=i/r+1,b=t/s+1,A=-1/r,w=-1/s;break}if(!c){c=[];for(const E of u){const T=E.length;if(T===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(T===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(T-2));c.push(C);let[L,N,O,P]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,L,N],0);for(let X=4;X<T;X+=2){const K=E[X],J=E[X+1];C.set(et.createBezierPoints(L,N,O,P,K,J),(X-2)*3),[L,N,O,P]=[O,P,K,J]}}}for(let E=0,T=c.length;E<T;E++)g.push({line:S(c[E].map(C=>C??NaN),y,b,A,w),points:S(u[E].map(C=>C??NaN),y,b,A,w)});const x=new this.prototype.constructor;return x.build(g,s,r,1,h,f,l),x}#o(t=this.#c){const i=this.#n+t/2*this.#s;return this.#l%180===0?[i/this.#r,i/this.#a]:[i/this.#a,i/this.#r]}#d(){const[t,i,s,r]=this.#t,[l,c]=this.#o(0);return[t+l,i+c,s-2*l,r-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)nt.pointBoundingBox(r[u],r[u+1],t);continue}let l=r[4],c=r[5];for(let u=6,h=r.length;u<h;u+=6){const[f,g,y,b,A,w]=r.subarray(u,u+6);nt.bezierBoundingBox(l,c,f,g,y,b,A,w,t),l=A,c=w}}const[i,s]=this.#o();t[0]=Re(t[0]-i,0,1),t[1]=Re(t[1]-s,0,1),t[2]=Re(t[2]+i,0,1),t[3]=Re(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#o();this.#c=t;const[r,l]=this.#o(),[c,u]=[r-i,l-s],h=this.#t;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([t,i],s){const[r,l]=this.#o();this.#r=t,this.#a=i,this.#s=s;const[c,u]=this.#o(),h=c-r,f=u-l,g=this.#t;return g[0]-=h,g[1]-=f,g[2]+=2*h,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(et.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,l=0,c=0,u=0,h=0;switch(this.#e){case 90:r=i/t,l=-t/i,u=t;break;case 180:s=-1,c=-1,u=t,h=i;break;case 270:r=-i/t,l=t/i,h=i;break;default:return""}return`matrix(${s} ${r} ${l} ${c} ${et.svgRound(u)} ${et.svgRound(h)})`}getPathResizingSVGProperties([t,i,s,r]){const[l,c]=this.#o(),[u,h,f,g]=this.#t;if(Math.abs(f-l)<=et.PRECISION||Math.abs(g-c)<=et.PRECISION){const S=t+s/2-(u+f/2),x=i+r/2-(h+g/2);return{path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${x})`}}}const y=(s-2*l)/(f-2*l),b=(r-2*c)/(g-2*c),A=f/s,w=g/r;return{path:{"transform-origin":`${et.svgRound(u)} ${et.svgRound(h)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${et.svgRound(l)} ${et.svgRound(c)}) scale(${y} ${b}) translate(${et.svgRound(-l)} ${et.svgRound(-c)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[l,c]=this.#o(),u=this.#t,[h,f,g,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(g-l)<=et.PRECISION||Math.abs(y-c)<=et.PRECISION){const x=t+s/2-(h+g/2),E=i+r/2-(f+y/2);for(const{line:T,points:C}of this.#i)et._translate(T,x,E,T),et._translate(C,x,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*l)/(g-2*l),A=(r-2*c)/(y-2*c),w=-b*(h+l)+t+l,S=-A*(f+c)+i+c;if(b!==1||A!==1||w!==0||S!==0)for(const{line:x,points:E}of this.#i)et._rescale(x,w,S,b,A,x),et._rescale(E,w,S,b,A,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,l]=s,c=this.#t,u=t-c[0],h=i-c[1];if(this.#r===r&&this.#a===l)for(const{line:f,points:g}of this.#i)et._translate(f,u,h,f),et._translate(g,u,h,g);else{const f=this.#r/r,g=this.#a/l;this.#r=r,this.#a=l;for(const{line:y,points:b}of this.#i)et._rescale(y,u,h,f,g,y),et._rescale(b,u,h,f,g,b);c[2]*=f,c[3]*=g}return c[0]=t,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t)} ${et.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t[0])} ${et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class So extends C0{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new So(this._viewParameters);return t.updateAll(this),t}}class zh extends Ot{static _type="ink";static _editorType=gt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){rt.initialize(t,i),this._defaultDrawingOptions=new So(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return yt(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,l){return new T1(t,i,s,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,l,c){return Tr.deserialize(t,i,s,r,l,c)}static async deserialize(t,i,s){let r=null;if(t instanceof Bh){const{data:{inkLists:c,rect:u,rotation:h,id:f,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:w,contentsObj:S,creationDate:x,modificationDate:E},parent:{page:{pageNumber:T}}}=t;r=t={annotationType:gt.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:x,modificationDate:E}}const l=await super.deserialize(t,i,s);return l._initialData=r,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||=new yr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=zh.getDefaultDrawingOptions({stroke:nt.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":l,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:rt._colorManager.convert(r),opacity:l,thickness:c,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class bh extends Tr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const to=8,lr=3;class Ks{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,l,c,u){const h=this.#e(s,r,l,c);for(let f=0;f<8;f++){const g=(-f+h-u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#r(t,i,s,r,l,c,u){const h=this.#e(s,r,l,c);for(let f=0;f<8;f++){const g=(f+h+u+16)%8,y=this.#n[2*g],b=this.#n[2*g+1];if(t[(s+y)*i+(r+b)]!==0)return g}return-1}static#a(t,i,s,r){const l=t.length,c=new Int32Array(l);for(let g=0;g<l;g++)c[g]=t[g]<=r?1:0;for(let g=1;g<s-1;g++)c[g*i]=c[g*i+i-1]=0;for(let g=0;g<i;g++)c[g]=c[i*s-1-g]=0;let u=1,h;const f=[];for(let g=1;g<s-1;g++){h=1;for(let y=1;y<i-1;y++){const b=g*i+y,A=c[b];if(A===0)continue;let w=g,S=y;if(A===1&&c[b-1]===0)u+=1,S-=1;else if(A>=1&&c[b+1]===0)u+=1,S+=1,A>1&&(h=A);else{A!==1&&(h=Math.abs(A));continue}const x=[y,g],E=S===y+1,T={isHole:E,points:x,id:u,parent:0};f.push(T);let C;for(const Z of f)if(Z.id===h){C=Z;break}C?C.isHole?T.parent=E?C.parent:h:T.parent=E?h:C.parent:T.parent=E?h:0;const L=this.#i(c,i,g,y,w,S,0);if(L===-1){c[b]=-u,c[b]!==1&&(h=Math.abs(c[b]));continue}let N=this.#n[2*L],O=this.#n[2*L+1];const P=g+N,X=y+O;w=P,S=X;let K=g,J=y;for(;;){const Z=this.#r(c,i,K,J,w,S,1);N=this.#n[2*Z],O=this.#n[2*Z+1];const ht=K+N,At=J+O;x.push(At,ht);const vt=K*i+J;if(c[vt+1]===0?c[vt]=-u:c[vt]===1&&(c[vt]=u),ht===g&&At===y&&K===P&&J===X){c[b]!==1&&(h=Math.abs(c[b]));break}else w=K,S=J,K=ht,J=At}}}return f}static#s(t,i,s,r){if(s-i<=4){for(let P=i;P<s-2;P+=2)r.push(t[P],t[P+1]);return}const l=t[i],c=t[i+1],u=t[s-4]-l,h=t[s-3]-c,f=Math.hypot(u,h),g=u/f,y=h/f,b=g*c-y*l,A=h/u,w=1/f,S=Math.atan(A),x=Math.cos(S),E=Math.sin(S),T=w*(Math.abs(x)+Math.abs(E)),C=w*(1-T+T**2),L=Math.max(Math.atan(Math.abs(E+x)*C),Math.atan(Math.abs(E-x)*C));let N=0,O=i;for(let P=i+2;P<s-2;P+=2){const X=Math.abs(b-g*t[P+1]+y*t[P]);X>N&&(O=P,N=X)}N>(f*L)**2?(this.#s(t,i,O+2,r),this.#s(t,O,s,r)):r.push(l,c)}static#l(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,l,c){const u=new Float32Array(c**2),h=-2*r**2,f=c>>1;for(let S=0;S<c;S++){const x=(S-f)**2;for(let E=0;E<c;E++)u[S*c+E]=Math.exp((x+(E-f)**2)/h)}const g=new Float32Array(256),y=-2*l**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let x=0;x<i;x++){const E=S*i+x,T=t[E];let C=0,L=0;for(let O=0;O<c;O++){const P=S+O-f;if(!(P<0||P>=s))for(let X=0;X<c;X++){const K=x+X-f;if(K<0||K>=i)continue;const J=t[P*i+K],Z=u[O*c+X]*g[Math.abs(J-T)];C+=J*Z,L+=Z}}const N=A[E]=Math.round(C/L);w[N]++}return[A,w]}static#o(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,l=1/0;for(let u=0,h=s.length;u<h;u++){const f=s[u]=t[u<<2];r=Math.max(r,f),l=Math.min(l,f)}const c=255/(r-l);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-l)*c;return s}static#h(t){let i,s=-1/0,r=-1/0;const l=t.findIndex(h=>h!==0);let c=l,u=l;for(i=l;i<256;i++){const h=t[i];h>s&&(i-c>r&&(r=i-c,u=i-1),s=h,c=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:l}=this.#t;let c=s,u=r;if(s>l||r>l){let b=s,A=r,w=Math.log2(Math.max(s,r)/l);const S=Math.floor(w);w=w===S?S-1:S;for(let E=0;E<w;E++){c=Math.ceil(b/2),u=Math.ceil(A/2);const T=new OffscreenCanvas(c,u);T.getContext("2d").drawImage(t,0,0,b,A,0,0,c,u),b=c,A=u,t!==i&&t.close(),t=T.transferToImageBitmap()}const x=Math.min(l/c,l/u);c=Math.round(c*x),u=Math.round(u*x)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const g=f.getImageData(0,0,c,u).data;return[this.#d(g),c,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},l,c,u,h){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,b=g.font=`${s} ${r} ${y}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:x,fontBoundingBoxAscent:E,fontBoundingBoxDescent:T,width:C}=g.measureText(t),L=1.5,N=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,C)*L),O=Math.ceil(Math.max(Math.abs(S)+Math.abs(x)||y,Math.abs(E)+Math.abs(T)||y)*L);f=new OffscreenCanvas(N,O),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,N,O),g.fillStyle="black",g.fillText(t,N*(L-1)/2,O*(3-L)/2);const P=this.#d(g.getImageData(0,0,N,O).data),X=this.#o(P),K=this.#h(X),J=this.#a(P,N,O,K);return this.processDrawnLines({lines:{curves:J,width:N,height:O},pageWidth:l,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,l){const[c,u,h]=this.#f(t),[f,g]=this.#c(c,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#a(f,u,h,y);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:i,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:c,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:h,width:f,height:g}=t,y=t.thickness??0,b=[],A=Math.min(i/f,s/g),w=A/i,S=A/s,x=[];for(const{points:T}of h){const C=c?this.#l(T):T;if(!C)continue;x.push(C);const L=C.length,N=new Float32Array(L),O=new Float32Array(3*(L===2?2:L-2));if(b.push({line:O,points:N}),L===2){N[0]=C[0]*w,N[1]=C[1]*S,O.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[P,X,K,J]=C;P*=w,X*=S,K*=w,J*=S,N.set([P,X,K,J],0),O.set([NaN,NaN,NaN,NaN,P,X],0);for(let Z=4;Z<L;Z+=2){const ht=N[Z]=C[Z]*w,At=N[Z+1]=C[Z+1]*S;O.set(et.createBezierPoints(P,X,K,J,ht,At),(Z-2)*3),[P,X,K,J]=[K,J,ht,At]}}if(b.length===0)return null;const E=u?new bh:new Tr;return E.build(b,i,s,1,r,u?0:y,l),{outline:E,newCurves:x,areContours:u,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:l}){let c=1/0,u=-1/0,h=0;for(const C of t){h+=C.length;for(let L=2,N=C.length;L<N;L++){const O=C[L]-C[L-2];c=Math.min(c,O),u=Math.max(u,O)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=to+lr*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*g)*f.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=l,b[A++]=i?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=g,b[A++]=f.BYTES_PER_ELEMENT;for(const C of t)b[A++]=C.length-2,b[A++]=C[0],b[A++]=C[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(b);const x=f.prototype.constructor;for(const C of t){const L=new x(C.length-2);for(let N=2,O=C.length;N<O;N++)L[N-2]=C[N]-C[N-2];S.write(L)}S.close();const E=await new Response(w.readable).arrayBuffer(),T=new Uint8Array(E);return Qm(T)}static async decompressSignature(t){try{const i=qA(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(i).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,u=0;for await(const C of s)c||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),c.set(C,u),u+=C.length;const h=new Uint32Array(c.buffer,0,c.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=h[2],y=h[3],b=h[4]===0,A=h[5],w=h[6],S=h[7],x=[],E=(to+lr*w)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(c.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(c.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(c.buffer,E);break}u=0;for(let C=0;C<w;C++){const L=h[lr*C+to],N=new Float32Array(L+2);x.push(N);for(let O=0;O<lr-1;O++)N[O]=h[lr*C+to+O+1];for(let O=0;O<L;O++)N[O+2]=N[O]+T[u++]}return{areContours:b,thickness:A,outlines:x,width:g,height:y}}catch(i){return pt(`decompressSignature: ${i}`),null}}}class Fh extends C0{constructor(){super(),super.updateProperties({fill:rt._defaultLineColor,"stroke-width":0})}clone(){const t=new Fh;return t.updateAll(this),t}}class Uh extends So{constructor(t){super(t),super.updateProperties({stroke:rt._defaultLineColor,"stroke-width":1})}clone(){const t=new Uh(this._viewParameters);return t.updateAll(this),t}}class xi extends Ot{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=gt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){rt.initialize(t,i),this._defaultDrawingOptions=new Fh,this._defaultDrawnSignatureOptions=new Uh(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return yt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:l,areContours:c,description:u,uuid:h,heightInPage:f}=this.#n,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,A=Ks.processDrawnLines({lines:r,pageWidth:g,pageHeight:y,rotation:b,innerMargin:xi._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(A,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:l}=this.#n,c=Math.max(r,l),u=Ks.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:s,width:r,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:l,y:c}=this,{outline:u}=this.#n=t;this.#t=u instanceof bh,this.description=s;let h;this.#t?h=xi.getDefaultDrawingOptions():(h=xi._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let g=i/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Ks.process(t,i,s,r,xi._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:l}=this.parent.viewport;return Ks.extractContoursFromText(t,i,s,r,l,xi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Ks.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:xi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=xi.getDefaultDrawingOptions():(this._drawingOptions=xi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(l),t?(l.paths={lines:i,points:s},l.uuid=this.#i,l.isCopy=!0):l.lines=i,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,i,s,r,l,c){return c.areContours?bh.deserialize(t,i,s,r,l,c):Tr.deserialize(t,i,s,r,l,c)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class M1 extends rt{#t=null;#e=null;#n=null;#i=null;#r=null;#a="";#s=null;#l=!1;#c=null;#o=!1;#d=!1;static _type="stamp";static _editorType=gt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){rt.initialize(t,i)}static isHandlingMimeForPasting(t){return ch.includes(t)}static paste(t,i){i.pasteEditor({mode:gt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#o=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:l,height:c,channels:r.length/(l*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),i&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=ch.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#l)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#l||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#l=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,l]=this.pageDimensions,c=.75;if(this.width)i=this.width*r,s=this.height*l;else if(i>c*r||s>c*l){const h=Math.min(c*r/i,c*l/s);i*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:l}=this.#t,c=new Mi;let u=this.#t,h=r,f=l,g=null;if(i){if(r>i||l>i){const O=Math.min(i/r,i/l);h=Math.floor(r*O),f=Math.floor(l*O)}g=document.createElement("canvas");const b=g.width=Math.ceil(h*c.sx),A=g.height=Math.ceil(f*c.sy);this.#o||(u=this.#u(b,A));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":QA.isDarkMode&&(S="#8f8f9d",x="#42414d");const E=15,T=E*c.sx,C=E*c.sy,L=new OffscreenCanvas(T*2,C*2),N=L.getContext("2d");N.fillStyle=S,N.fillRect(0,0,T*2,C*2),N.fillStyle=x,N.fillRect(0,0,T,C),N.fillRect(T,C,T,C),w.fillStyle=w.createPattern(L,"repeat"),w.fillRect(0,0,b,A),w.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(c.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,r>t||l>t){const x=Math.min(t/r,t/l);b=Math.floor(r*x),A=Math.floor(l*x),this.#o||(u=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:g,width:h,height:f,imageData:y}}#u(t,i){const{width:s,height:r}=this.#t;let l=s,c=r,u=this.#t;for(;l>2*t||c>2*i;){const h=l,f=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(l,c);g.getContext("2d").drawImage(u,0,0,h,f,0,0,l,c),u=g.transferToImageBitmap()}return u}#p(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,l=new Mi,c=Math.ceil(s*t*l.sx),u=Math.ceil(r*i*l.sy),h=this.#s;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const f=this.#o?this.#t:this.#u(c,u),g=h.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(t){if(t){if(this.#o){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#o){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*sa.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*sa.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,l);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,l),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,l=!1;if(t instanceof _0){const{data:{rect:S,rotation:x,id:E,structParent:T,popupRef:C,richText:L,contentsObj:N,creationDate:O,modificationDate:P},container:X,parent:{page:{pageNumber:K}},canvas:J}=t;let Z,ht;J?(delete t.canvas,{id:Z,bitmap:ht}=s.imageManager.getFromCanvas(X.id,J),J.remove()):(l=!0,t._hasNoCanvas=!0);const At=(await i._structTree.getAriaAttributes(`${Qs}${E}`))?.get("aria-label")||"";r=t={annotationType:gt.STAMP,bitmapId:Z,bitmap:ht,pageIndex:K-1,rect:S.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:At},isSvg:!1,structParent:T,popupRef:C,richText:L,comment:N?.str||null,creationDate:O,modificationDate:P}}const c=await super.deserialize(t,i,s),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:b}=t;l?(s.addMissingCanvas(t.id,c),c.#l=!0):g&&s.imageManager.isValidId(g)?(c.#e=g,h&&(c.#t=h)):c.#i=f,c.#o=y;const[A,w]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/w,b&&(c.altTextData=b),c._initialData=r,t.comment&&c.setCommentData(t),c.#d=!!r,c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#o});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const c=this.#o?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#y(!1);else if(this.#o){const u=i.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,l=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Qi{#t;#e=!1;#n=null;#i=null;#r=null;#a=new Map;#s=!1;#l=!1;#c=!1;#o=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([ge,zh,M1,se,xi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:l,annotationLayer:c,drawLayer:u,textLayer:h,viewport:f,l10n:g}){const y=[...Qi.#p.values()];if(!Qi._initialized){Qi._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=i,this.div=s,this.#t=l,this.#n=c,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===gt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case gt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case gt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case gt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===gt.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of Qi.#p.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#y(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#l=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",l=>{const{clientX:u,clientY:h,timeStamp:f}=l,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(u,h);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let A;const w=new RegExp(`^${fr}[0-9]+$`);for(const x of b)if(w.test(x.id)){A=x.id;break}if(!A)return;const S=this.#a.get(A);S?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),S.dblclick(l))},{signal:r,capture:!0})}const t=this.#n,i=[];if(t){const r=new Map,l=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else l.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:h}=u.data;if(this.#u.isDeletedAnnotationElement(h)){u.updateEdited({deleted:!0});continue}let f=l.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(h),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of Qi.#p.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#l=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=_e.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),se.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#l&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),rt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#a.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#b(){return Qi.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#x(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#E(),l=this.getNextId(),c=this.#x({parent:this,id:l,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});c&&this.add(c)}async deserialize(t){return await Qi.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),l=this.#x({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#E(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,l=Math.max(0,t),c=Math.max(0,i),u=Math.min(window.innerWidth,t+s),h=Math.min(window.innerHeight,i+r),f=(l+u)/2-t,g=(c+h)/2-i,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#E(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=_e.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===gt.STAMP||s===gt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===gt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=_e.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#o){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#o=new AbortController;const i=this.#u.combinedSignal(this.#o);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#o?(this.#u.setCurrentDrawingSession(null),this.#o.abort(),this.#o=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#o?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#o&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ss(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,ss(this.div,{rotation:s}),i!==s)for(const r of this.#a.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class we{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return yt(this,"_svgFactory",new uo)}static#r(t,[i,s,r,l]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*i}%`,c.width=`${100*r}%`,c.height=`${100*l}%`}#a(){const t=we._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=we._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const l=we._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${i}`),l.classList.add("clip"),r}#l(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=we.#i++,l=this.#a(),c=we._svgFactory.createElement("defs");l.append(c);const u=we._svgFactory.createElement("path");c.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const f=s?this.#s(c,h):null,g=we._svgFactory.createElement("use");return l.append(g),g.setAttribute("href",`#${h}`),this.updateProperties(l,t),this.#e.set(r,l),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=we.#i++,r=this.#a(),l=we._svgFactory.createElement("defs");r.append(l);const c=we._svgFactory.createElement("path");l.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(i){const y=we._svgFactory.createElement("mask");l.append(y),h=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const b=we._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=we._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=we._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const g=f.cloneNode();return r.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:l,path:c}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#l(u,s),r&&we.#r(u,r),l){const{classList:h}=u;for(const[f,g]of Object.entries(l))h.toggle(f,g)}if(c){const f=u.firstChild.firstChild;this.#l(f,c)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:mh};globalThis.pdfjsLib={AbortException:Nn,AnnotationEditorLayer:Qi,AnnotationEditorParamsType:Mt,AnnotationEditorType:gt,AnnotationEditorUIManager:Ln,AnnotationLayer:Ph,AnnotationMode:Rn,AnnotationType:ue,applyOpacity:ZA,build:s1,ColorPicker:hi,createValidAbsoluteUrl:Xm,CSSConstants:WA,DOMSVGFactory:uo,DrawLayer:we,FeatureTest:_e,fetchData:wr,findContrastColor:JA,getDocument:g0,getFilenameFromUrl:VA,getPdfFilenameFromUrl:XA,getRGB:_r,getUuid:Km,getXfaPageViewport:$A,GlobalWorkerOptions:ia,ImageKind:so,InvalidPDFException:lh,isDataScheme:bo,isPdfFile:Ch,isValidExplicitDest:cS,MathClamp:Re,noContextMenu:di,normalizeUnicode:jA,OPS:pr,OutputScale:Mi,PasswordResponses:OA,PDFDataRangeTransport:m0,PDFDateString:oh,PDFWorker:mr,PermissionFlag:LA,PixelsPerInch:sa,RenderingCancelledException:xh,renderRichText:Zm,ResponseException:oo,setLayerDimensions:ss,shadow:yt,SignatureExtractor:Ks,stopEvent:te,SupportedImageMimeTypes:ch,TextLayer:Te,TouchManager:vo,updateUrlHash:Ym,Util:nt,VerbosityLevel:go,version:v0,XfaLayer:Wm};function R1({title:d,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),d?j.createElement("title",{id:t},d):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const D1=j.forwardRef(R1);function N1({title:d,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),d?j.createElement("title",{id:t},d):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const L1=j.forwardRef(N1);function O1({title:d,titleId:t,...i},s){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},i),d?j.createElement("title",{id:t},d):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const k1=j.forwardRef(O1);function B1({onFileSelect:d}){const[t,i]=j.useState(!1),[s,r]=j.useState(""),l=b=>{if(b.type!=="application/pdf")return"Please upload a PDF file";const A=50*1024*1024;return b.size>A?"File size must be less than 50MB":b.size===0?"File is empty":null},c=j.useCallback(b=>{r("");const A=l(b);if(A){r(A);return}d(b)},[d]),u=j.useCallback(b=>{b.preventDefault(),b.stopPropagation(),i(!0)},[]),h=j.useCallback(b=>{b.preventDefault(),b.stopPropagation(),i(!1)},[]),f=j.useCallback(b=>{b.preventDefault(),b.stopPropagation()},[]),g=j.useCallback(b=>{b.preventDefault(),b.stopPropagation(),i(!1);const A=b.dataTransfer.files;A.length>0&&c(A[0])},[c]),y=j.useCallback(b=>{const A=b.target.files;A&&A.length>0&&c(A[0])},[c]);return U.jsx("div",{className:"w-full max-w-2xl",children:U.jsxs("label",{onDragEnter:u,onDragLeave:h,onDragOver:f,onDrop:g,className:`
          block cursor-pointer rounded-lg border-2 border-dashed p-12 text-center transition-all
          ${t?"border-primary-500 bg-primary-50":"border-neutral-300 bg-white hover:border-neutral-400"}
          ${s?"border-error-500 bg-error-50":""}
        `,children:[U.jsx("input",{type:"file",accept:"application/pdf",onChange:y,className:"sr-only","aria-label":"Upload PDF file"}),U.jsxs("div",{children:[U.jsx(D1,{className:`mx-auto h-16 w-16 ${s?"text-error-400":t?"text-primary-500":"text-neutral-400"}`}),U.jsx("h3",{className:"mt-4 text-lg font-semibold text-neutral-900",children:s?"Upload Failed":"Upload PDF Document"}),s?U.jsx("p",{className:"mt-2 text-sm text-error-600",children:s}):U.jsxs(U.Fragment,{children:[U.jsx("p",{className:"mt-2 text-sm text-neutral-600",children:"Drag and drop your PDF here, or click to browse"}),U.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Maximum file size: 50MB"})]})]})]})})}function P1({fileName:d,fileSize:t,pageCount:i,onClear:s,onChooseAnother:r}){const l=u=>{if(u===0)return"0 Bytes";const h=1024,f=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(u)/Math.log(h));return Math.round(u/Math.pow(h,g)*100)/100+" "+f[g]},c=(u,h=40)=>{if(u.length<=h)return u;const f=u.split(".").pop();return`${u.substring(0,u.lastIndexOf(".")).substring(0,h-f.length-4)}...${f}`};return U.jsx("div",{className:"w-full max-w-2xl rounded-lg border border-neutral-200 bg-white p-6 shadow-soft",children:U.jsxs("div",{className:"flex items-start gap-4",children:[U.jsx("div",{className:"flex-shrink-0",children:U.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary-50",children:U.jsx(L1,{className:"h-6 w-6 text-primary-600"})})}),U.jsxs("div",{className:"flex-1 min-w-0",children:[U.jsx("h3",{className:"text-base font-semibold text-neutral-900 truncate",children:c(d)}),U.jsxs("div",{className:"mt-1 flex flex-wrap gap-x-4 gap-y-1 text-sm text-neutral-600",children:[U.jsx("span",{children:l(t)}),i!==void 0&&U.jsxs("span",{children:[i," pages"]})]}),U.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[U.jsx("button",{onClick:r,className:"rounded-md bg-primary-600 px-4 py-2 text-sm font-semibold text-white hover:bg-primary-500 transition-colors",children:"Choose Another File"}),U.jsx("button",{onClick:s,className:"rounded-md border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-700 hover:bg-neutral-50 transition-colors",children:"Clear"})]})]}),U.jsx("button",{onClick:s,className:"flex-shrink-0 rounded-lg p-1 text-neutral-400 hover:bg-neutral-100 hover:text-neutral-600 transition-colors","aria-label":"Remove file",children:U.jsx(k1,{className:"h-5 w-5"})})]})})}ia.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${v0}/pdf.worker.min.js`;function z1(){const[d,t]=j.useState(null),[i,s]=j.useState(!1),[r,l]=j.useState(""),c=j.useCallback(async f=>{s(!0),l("");try{const g=await f.arrayBuffer(),b=await g0({data:g}).promise;t({file:f,arrayBuffer:g,pageCount:b.numPages})}catch(g){console.error("Error loading PDF:",g),l("Failed to load PDF. The file may be corrupted or password-protected."),t(null)}finally{s(!1)}},[]),u=j.useCallback(()=>{t(null),l("")},[]),h=j.useCallback(()=>{t(null),l("")},[]);return U.jsx("div",{className:"flex-1 bg-neutral-50",children:U.jsx("main",{className:"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8",children:U.jsxs("div",{className:"text-center",children:[U.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Upload Document"}),U.jsx("p",{className:"mt-4 text-neutral-600",children:"Upload a PDF to start redacting sensitive information"}),U.jsx("div",{className:"mt-8 flex justify-center",children:i?U.jsx("div",{className:"w-full max-w-2xl rounded-lg border border-neutral-200 bg-white p-12 text-center",children:U.jsxs("div",{className:"flex items-center justify-center",children:[U.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary-600 border-t-transparent"}),U.jsx("span",{className:"ml-3 text-neutral-600",children:"Processing PDF..."})]})}):d?U.jsx(P1,{fileName:d.file.name,fileSize:d.file.size,pageCount:d.pageCount,onClear:u,onChooseAnother:h}):U.jsx(B1,{onFileSelect:c})}),r&&U.jsx("div",{className:"mt-4 rounded-lg bg-error-50 p-4 text-error-700",children:U.jsx("p",{className:"text-sm font-medium",children:r})})]})})})}function F1(){return U.jsx("div",{className:"flex-1 bg-gray-50 flex items-center justify-center px-4",children:U.jsxs("div",{className:"text-center",children:[U.jsx("h1",{className:"text-6xl font-bold text-gray-900",children:"404"}),U.jsx("p",{className:"mt-4 text-xl text-gray-600",children:"Page not found"}),U.jsx("p",{className:"mt-2 text-gray-500",children:"The page you're looking for doesn't exist."}),U.jsx("div",{className:"mt-8",children:U.jsx(Zi,{to:"/",className:"rounded-md bg-blue-600 px-6 py-3 text-base font-semibold text-white shadow-sm hover:bg-blue-500 transition-colors inline-block",children:"Go back home"})})]})})}function U1(){return U.jsx(vA,{children:U.jsxs("div",{className:"flex min-h-screen flex-col",children:[U.jsx(RA,{}),U.jsxs(Qv,{children:[U.jsx(eo,{path:"/",element:U.jsx(NA,{})}),U.jsx(eo,{path:"/upload",element:U.jsx(z1,{})}),U.jsx(eo,{path:"*",element:U.jsx(F1,{})})]}),U.jsx(DA,{})]})})}av.createRoot(document.getElementById("root")).render(U.jsx(j.StrictMode,{children:U.jsx(U1,{})}));
